{"version":3,"sources":["logging.js","polyfills.js","webStorage.js","BigInt.js","Base64.js","AES.js","SHA256.js","SHA512.js","SecureString.js","CHAP.js","Challenge.js","DiffieHellman.js","ISO10126.js","Ajax.js","Bytes.js","NetworkConfig.js","CommunicationStability.js","Connection.js","ConnectionRequest.js","ConnectionResponse.js","PullConnection.js","PushConnection.js","VideoConnection.js","VideoStream.js","ItemHeaderParser.js","VideoHeaderParser.js","AudioHeaderParser.js","VideoConnectionPool.js","VideoPushConnection.js","AudioPushConnection.js"],"names":["console","log","info","error","warn","XPMobileSDKSettings","EnableConsoleLog","Object","assign","target","varArgs","TypeError","result","index","arguments","length","nextSource","nextKey","prototype","hasOwnProperty","call","window","localStorage","sessionStorage","storages","i","XPMobileSDK","storage","setItem","key","value","expiration","obj","Date","getTime","this","JSON","stringify","getItem","indexOf","parse","substr","removeItem","parseFloat","clear","bpe","mask","radix","digitsStr","findPrimes","n","s","p","ans","Array","millerRabinInt","x","b","mr_x1","dup","mr_r","mr_a","copyInt_","millerRabin","j","k","copy_","addInt_","rightShift_","powMod_","equalsInt","equals","squareMod_","bitSize","z","w","expand","int2bigInt","randTruePrime","randTruePrime_","trim","randProbPrime","randProbPrimeRounds","divisible","primes","rpprb","randBigInt_","modInt","greater","mod","mod_","addInt","mult","y","mult_","powMod","sub","sub_","add","add_","inverseMod","inverseMod_","multMod","multMod_","pm","dd","r","B","zz","recSize","pows","Math","pow","recLimit","s_i2","s_R","s_n1","s_r2","s_d","s_x1","s_x2","s_b","s_n","s_i","s_rm","s_q","s_a","s_aa","floor","random","carry_","divide_","multInt_","isZero","GCD_","randBigInt","a","GCD","xc","xp","yp","A","C","D","q","sing","T","qp","t","linComb_","max","eg_u","eg_v","eg_A","eg_B","eg_C","eg_D","halve_","negative","inverseModInt","inverseModInt_","eGCD_","v","g","leftShift_","greaterShift","shift","kx","ky","y1","y2","c","subShift_","linCombShift_","addShift_","bits","minSize","ceil","buff","str2bigInt","base","d","kk","parseInt","substring","bigInt2str","s6","divInt_","ys","ss","s4","s5","s0","k1","k2","kn","np","s7","s3","mont_","one","ui","ks","sa","s1","s2","md_q1","md_q2","md_q3","md_r","md_r1","md_r2","md_tt","Base64","_keyStr","encode","input","chr1","chr2","chr3","enc1","enc2","enc3","enc4","output","charCodeAt","isNaN","charAt","encodeArray","decode","replace","String","fromCharCode","_utf8_decode","decodeBinary","arrayBuffer","Uint8Array","e","subarray","start","end","slice","set_","array","offset","TypedArray","arg1","buffer","byteLength","set","Uint32Array","Int32Array","uarray","lkey1","lkey2","bytes","_utf8_encode","string","utftext","c1","c2","c3","CryptoJS","u","l","lib","Base","extend","mixIn","init","$super","apply","create","toString","clone","WordArray","words","sigBytes","concat","clamp","push","enc","Hex","join","Latin1","Utf8","decodeURIComponent","escape","Error","unescape","encodeURIComponent","BufferedBlockAlgorithm","reset","_data","_nDataBytes","_append","_process","blockSize","_minBufferSize","min","_doProcessBlock","splice","Hasher","cfg","_doReset","update","finalize","_doFinalize","_createHelper","_createHmacHelper","HMAC","algo","_map","abs","sin","MD5","_hash","E","f","m","h","HmacMD5","EvpKDF","keySize","hasher","iterations","compute","Cipher","createEncryptor","_ENC_XFORM_MODE","createDecryptor","_DEC_XFORM_MODE","_xformMode","_key","process","ivSize","encrypt","decrypt","StreamCipher","mode","_iv","_prevBlock","BlockCipherMode","Encryptor","Decryptor","_cipher","processBlock","encryptBlock","decryptBlock","CBC","pad","Pkcs7","unpad","BlockCipher","padding","iv","_mode","CipherParams","formatter","format","OpenSSL","ciphertext","salt","SerializableCipher","algorithm","_parse","kdf","execute","PasswordBasedCipher","F","G","H","AES","_nRounds","_keySchedule","_invKeySchedule","_doCryptBlock","sqrt","SHA256","HmacSHA256","fa","ga","x64","Word","high","low","toX32","SHA512","N","Z","O","$","P","aa","Q","ba","R","ca","S","da","I","W","J","U","K","V","L","X","M","Y","ha","ia","ea","HmacSHA512","library","SecureString","sharedKey","generateKey","params","Settings","DefaultEncryptionPadding","cip","data","split","Connection","dh","getSharedKey","toUpperCase","CHAP","challenges","monitorTime","minChallenges","haltThreshold","halt","waitingForData","initialize","addObserver","challengeInterval","setInterval","monitor","connectionId","isValid","destroy","NumChallenges","Reset","requestChallenges","challenge","Challenge","takeValidChallenge","getValue","haltSystem","unHaltSystem","exportAll","forEach","sort","first","second","calculate","ChalAnswer","timeout","ttl","undefined","connectionLostConnection","connectionDidDisconnect","[object Object]","document","getElementById","setAttribute","removeAttribute","connectionRequestSucceeded","request","response","CHAPSupported","parameters","clearInterval","self","seconds","clockInterval","valid","computeTime","DiffieHellman","primeKeyBigInt","1024","2048","primeLength","generator","randKey","serverKey","str2byteArray","str","reverse","createPublicKey","byteArrayKey","setServerPublicKey","publicKey","decodedServerKey","reversedServerKey","secretKey","encodeString","secretString","_sharedKey","defaultEncryptionPadding","Iso10126","Ajax","Request","connectionUrl","realTimeout","method","contentType","responseType","encoding","postBody","asynchronous","onLoading","onComplete","onSuccess","onFailure","onTimeout","ajaxRequest","XMLHttpRequest","onreadystatechange","readyState","status","responseText","open","ontimeout","setRequestHeader","send","Bytes","fromHex","hex","numbers","match","item","fromInt","integer","fromGuid","guid","fromBase64","base64","atob","parseXML","XMLNodeTextContent","NETWORK","MIN_REQUEST_TIME_LOWER_BOUND","MIN_REQUEST_TIME_UPPER_BOUND","MAX_REQUEST_TIME","MAX_REQUEST_TIME_ON_FAILURE","REQUEST_TIME_GROW_PER_EMPTY_FRAME","REQUEST_TIME_GROW_PER_HTTP_ERROR","MIN_REQUEST_TIME_GROW","MIN_REQUEST_TIME_DECREASE","MIN_REQUEST_TIME_INCREASE","VIDEO_PROTOCOL_RECOVER_PACE","VIDEO_FAILS_MONITOR","minRequestTime","requestTime","requestTimeOnFailure","websocketSendMessage","CommunicationStability","connectionProtocolFails","videoProtocolFails","videoProtocolFailDate","noRecentVideoFails","interval","addBreakDown","object","brokenDown","removeBreakDown","addVideoBreakDown","isBrokenDown","ConnectionStates","idle","connecting","loggingIn","working","lostConnection","ConnectionObserverInterface","connectionStateChanged","connectionDidConnect","connectionFailedToConnect","connectionFailedToConnectWithId","connectionRequiresCode","provider","connectionCodeError","connectionDidLogIn","connectionFailedToLogIn","connectionProcessingDisconnect","connectionSwitchedToPull","connectionVersionChanged","connectionReloadConfiguration","connectionReloadCameraConfiguration","closeStreamFinished","currentUserName","serverTimeout","state","DSServerStatus","NotAvailable","DoNotEnforce","EnforceWheneverPossible","Enforce","requests","observers","sequenceID","liveMessagesWaiting","features","resizeAvailable","webSocketServer","webSocketBrowser","directStreamingClient","directStreamingServer","exportToAvi","exportToDb","exportToMkv","server","MobileServerURL","location","origin","removeObserver","cancelRequest","connectionRequest","cancel","requestFinished","Connect","successCallback","failCallback","setState","ProcessingMessage","sendCommand","connectCallback","connectionResponse","isError","failedResponseParameter","callMethodOnObservers","options","outputParameters","ConnectionId","Timeout","WebSocketSupport","WebSocket","DirectStreaming","SecurityEnabled","PublicKey","ServerProductCode","scheduleLiveMessage","successResponseParameter","connectWithId","sendLiveMessage","connectingViaExternalConnectionID","Login","LoginType","Username","Password","loginCallback","code","ConnectionError","SecondStepAuthenticationRequired","ssarParameter","SecondStepAuthenticationProvider","cancelLiveMessage","proceedWithLogin","oldServerVersion","ServerVersion","DirectStreamingLive","ExportToAvi","ExportToDb","ExportToMkv","getFeatures","requestCode","requestCodeCallback","callbackAfterRequest","verifyCode","SecondStepAuthenticationPin","verifyCodeCallback","SecondStepAuthenticationCodeError","Disconnect","VideoConnectionPool","logOutCallback","getViews","viewId","ViewId","getViewsCallback","subViews","subViewsNodes","subItems","getElementsByTagName","res","attributes","name","view","id","getAllViews","getAllViewsCallback","items","getOsmServerAddresses","getOsmServerAddressesCallback","getGisMapCameras","getGisMapCamerasCallback","getGisMapLocations","getGisMapLocationsCallback","requestPushStream","RequestStream","SignalType","ByteOrder","requestStream","cameraId","size","CameraId","DestWidth","round","width","DestHeight","height","signal","interfaces","VideoConnectionSignal","playback","MethodType","Fps","ComprLevel","jpegCompressionLevel","KeyFramesOnly","keyFramesOnly","RequestSize","StreamType","streamType","VideoConnectionStream","FragmentedMP4","fragmentDurationMs","FragmentDurationMs","time","SeekType","Time","motionOverlay","MotionOverlay","SupportNoScaledImages","ResizeAvailable","MultiCameraPlayback","playbackControllerId","PlaybackControllerId","reuseConnection","requestStreamCallback","videoId","VideoId","videoConnection","VideoStream","addCamera","RequestAudioStreamIn","requestAudioStreamInCallback","requestAudioStreamIn","itemId","ItemId","AudioEncoding","AudioSamplingRate","AudioBitsPerSample","AudioChannelsNumber","StreamDataType","StreamHeaders","RequestAudioStream","requestAudioStreamCallback","requestAudioStream","microphoneId","CloseConnectionOnError","AudioCompressionLevel","streamId","StreamId","toggleDirectStreaming","enabled","VideoConnection","instances","getState","VideoConnectionState","running","close","changeStream","cropping","top","SrcTop","left","SrcLeft","right","SrcRight","bottom","SrcBottom","ChangeStream","changeStreamCallback","SupportTimeBetweenFrames","resetCommunication","motionDetection","motion","MotionAmount","sensitivity","SensitivityAmount","cpu","CPUImpactAmount","grid","RegionGrid","test","getPtzPresets","getPtzPresetsCallback","closeStream","CloseStream","closeAudioStream","closeAudioStreamCallback","closeStreamCallback","closeStreamGeneralCallback","connectionRequestResponseIsTerminal","fps","decreasing","increasing","current","stable","queueEmptyCount","manage","queueLength","decrease","increase","bind","change","camera","cameras","ptzPreset","presetName","PtzPreset","controlPTZCallback","ptzMove","direction","PtzMove","ptzTapAndHold","ptzTapAndHoldCallback","ptzSwipe","gestureDuration","playbackSpeed","speed","Speed","playbackSeek","seekType","playbackGoTo","millisecondsSinceUnixEpoch","getThumbnail","getThumbnailCallback","thumbnailBase64","getThumbnailByTime","commandParams","getThumbnailByTimeCallback","Thumbnail","Timestamp","getDBStartTime","getDBStartTimeCallback","getNextSequence","timestamp","afterTime","SeqType","AfterTime","AfterCount","getNextSequenceCallback","sequences","getPrevSequence","BeforeTime","daysToSeconds","BeforeCount","getPrevSequenceCallback","getSequencesInInterval","startTime","endTime","investigationId","InvestigationId","getSequencesInIntervalCallback","startVideoExport","StartTime","EndTime","Type","startExportCallback","startImageExport","restartErroneousExport","exportId","ExportId","getUserExports","getUserExportsCallback","exports","getAllExports","getAllExportsCallback","createExportDownloadLink","createExportDownloadLinkCallback","ExportLink","getExport","getExportCallback","deleteExport","deleteExportCallback","getOutputsAndEvents","getOutputsAndEventsCallback","actions","getServerStatus","getServerStatusCallback","ServerStatus","triggerOutputOrEvent","objectId","triggerType","ObjectId","TriggerType","triggerOutputOrEventCallback","getCameraCapabilities","getCameraCapabilitiesCallback","prepareUpload","prepareUploadCallback","getUploadStatus","getUploadStatusCallback","requestChallengesCallback","createPlaybackController","CloseOldControllers","createPlaybackControllerCallback","onClose","onRestart","onPushFailed","changeMultipleStreams","changeMultipleStreamsCallback","getAllInvestigations","getInvestigationsCallback","getUserInvestigations","getInvestigation","getInvestigationCallback","createInvestigation","createInvestigationCallback","updateInvestigation","updateInvestigationCallback","updateInvestigationData","deleteInvestigation","deleteInvestigationCallback","cancelInvestigation","cancelInvestigationCallback","startInvestigationExport","exportType","includeAudio","password","ExportType","IncludeAudio","startInvestigationExportCallback","deleteInvestigationExport","deleteInvestigationExportCallback","getAlarmList","MyAlarms","Operator","Count","Priority","State","getAlarmsCallback","getAlarm","alarmId","AlarmId","getAlarmCallback","updateAlarm","updateAlarmCallback","getAlarmDataSettings","getAlarmDataSettingsCallback","getAlarmUsers","SourceId","getAlarmUsersCallback","acknowledgeAlarm","Id","acknowledgeAlarmCallback","prevCarouselCamera","CarouselCommand","prevCarouselCameraCallback","nextCarouselCamera","nextCarouselCameraCallback","pauseCarousel","pauseCarouselCallback","resumeCarousel","resumeCarouselCallback","registerForNotifications","setting","browser","getBrowser","deviceName","version","os","DeviceName","DeviceId","RegisterForNotifications","registerForNotificationsCallback","errorMessage","callback","commandName","requestParams","supportsCHAP","ConnectionRequest","getNextSequenceID","methodName","args","stack","liveMessageTimer","updateLiveMessageTimer","minInterval","clearTimeout","scheduledDisconnectOnFail","LiveMessage","disconnectOnFail","liveMessageFailCallback","setTimeout","liveMessageCallback","FolderDefinitionsChanged","ViewDefinitionsChanged","CameraDefinitionsChanged","Number","addDirectStreamingStatus","NativeStreamingAvailable","TranscodedStreamingAvailable","NativeStreamingSuggested","errorCode","WrongID","ChallengesLimitReached","errorString","NotImplemented","NotFullyImplemented","BadCommandType","BadCommandKind","MissingInputParameter","WrongInputParameter","InvalidCredentials","IncorrectPublicKey","SurveillanceServerDown","InvalidLicense","SecurityError","UnknownCameraID","UnknownItemID","NoPresetsAvailable","NotAllowedInThisState","FeatureIsDisabled","InsufficientUserRights","TooManySessions","NewConfigurationNotAvailable","AddressesNotReachable","PlaybackStreamsLimitReached","Redirection","MovingInvestigations","NoRecordingsFound","NoRecordingsInInterval","SecondStepAuthenticationEnabledUsersOnly","SecondStepAuthenticationCodeExpired","InputParameterTooLong","UknownIdOrInsufficientRightForSomeItems","UknownIdOrInsufficientRightForAllItems","ItemNotPlayable","Unknown","IncorrectServerResponse","SdkNotConnected","HttpResponseError","HttpRequestError","CommandProcessingError","CommandTimedOut","InternalError","lastLiveMessageRequestTimestamp","command","ajaxRequestTimeout","finished","responseOffset","requestXML","paramsXML","createProperty","generateData","connectionURL","url","protocol","hostname","port","parseURL","communicationChanel","stopRestaringCommands","initializeAjaxRequest","now","parseResponse","liveMessageMinimumInterval","restartHighPriorityCommand","xml","ConnectionResponse","isProcessing","abort","activeRequestCount","xmlString","isResponse","CommandNode","TypeNode","tmp","paramsNodes","attr","paramValue","CPU","DiskUsage","HDD","recording","recorded","exp","user","other","free","thumbnail","thumbnailJSON","parseThumbnail","exportsNodes","exportNodes","attributesToObject","dates","parseExports","rootNode","sequencesNodes","sequence","parseSequences","EMPTY_CAMERA_NAME","headerGroups","headerGroup","action","getAttribute","Name","parseActions","processItem","node","subNodes","childNodes","nodeName","itemData","safe","Items","ItemsNode","findItems","parseItems","ResultNode","message","commandNameNode","keys","attribute","symbols","RegExp","DOMParser","xmlStr","parseFromString","textContent","ActiveXObject","xmlDoc","async","loadXML","text","PullConnectionObserverInterface","onError","onHTTPError","notifyChannel","notifyObservers","videoConnectionTemporaryDown","restart","PullConnection","videoURL","frameRequestParams","notSarted","clearRequestTimeout","videoConnectionTimeout","notClosed","currentData","VideoHeaderParser","duration","delay","videoConnectionState","stream","timeBetweenFrames","frameInterval","requestNextFrameInterval","dataSize","signalType","live","number","requestNextFrame","ArrayBuffer","notWaiting","communicationIsStable","nextFrameTimeout","clearNextFrameTimeout","closed","sendRequest","arg","observer","restartConnection","cleanupCommunication","startCommunication","videoConnectionChangedState","PushConnectionObserverInterface","PushConnection","socket","lastFrame","notOpened","socketFailedTimestamp","videoStreamRestartMinimumInterval","createSocket","socketRestartMinimumInterval","exception","binaryType","onerror","onopen","onOpen","onclose","socketReadyState","onmessage","messageInterval","event","onMessage","addEventListener","closing","native","transcoded","VideoConnectionObserverInterface","videoConnectionReceivedFrame","frame","videoConnectionFailed","videoConnectionRecovered","videoConnectionStreamingError","callbacks","isReusable","isPush","isDirectStreaming","supportsPTZ","PTZ","supportsPTZPresets","Preset","supportsPlayback","Playback","supportsExport","ExportAvi","lastData","channel","connected","channels","videoChanel","getNext","hasNext","noVideoTimeout","Worker","supportsMultiThreaded","worker","postMessage","communication","resetNoVideoTimeout","stopNoVideoTimeout","NoVideoTimeout","ItemHeaderParser","NonFatal","Fatal","wasConnectionDown","cleanup","terminate","newState","CLOSED","onAjaxComplete","onAjaxFailure","onAjaxLoading","VideoStreamState","new","videoConnectionElement","createElement","onReceivedFrame","videoConnectionManagerElement","appendChild","dispatchEvent","CustomEvent","contains","removeChild","detail","parser","bytesOffset","readBytesProcessor","readBytesReversedProcessor","arr","skipBytes","bytesToSkip","readBytes","bytesCount","uintToHexString","map","readToStringBase","count","processor","processed","readToString","readAndReverseToString","getGUID","parseSizeInformation","sizeInfo","sourceSize","sourceCrop","destinationSize","resampling","parseLiveInformation","currentLiveEvents","changedLiveEvents","parsePlaybackInformation","currentPlaybackEvents","changedPlaybackEvents","parseStreamInfo","headerSize","headerVesion","reserved","validFields","dataType","flipEndians","readBytesAsCharacters","flags","profile","level","compatibility","constrains","frameCount","hasKeyFrame","StreamInfoFlags","HasKeyFrame","retrieveData","parseDynamicInformation","dataCount","DynamicInfoDataType","HeaderTypeDeviceStateInfo","tempErrorCode","tempGUID","errorCodes","parseDeviceStateInfo","Frame","Fragment","MainHeaderLength","SizeInfoHeaderLength","LiveInfoHeaderLength","PlaybackInfoHeaderLength","HeaderExtensionSize","HeaderExtensionLiveEvents","HeaderExtensionPlaybackEvents","HeaderExtensionNative","HeaderExtensionMotionEvents","HeaderExtensionLocationInfo","HeaderExtensionStreamInfo","HeaderExtensionCarouselInfo","HeaderExtensionDynamicInfo","LiveFlags","LiveFeed","Motion","Recording","Notification","CameraConnectionLost","DatabaseFail","DiskFull","ClientLiveStopped","PlaybackFlags","Stopped","Forward","Backward","DatabaseStart","DatabaseEnd","DatabaseError","parseMotionInformation","motionHeaderSize","motionAmount","convertToImage","type","blob","Blob","parseCarouselInfo","carousel","uuid","frameNumber","MainHeader","hasSizeInformation","hasLiveInformation","hasPlaybackInformation","hasNativeData","hasMotionInformation","hasLocationData","hasStreamInfo","hasCarouselInfo","parseHeader","getData","AudioHeaderParser","mainHeader","parseAudioHeader","Camera","videoConn","pendingCallbacks","containsCameraByVideoId","some","removeCamera","findIndex","getCameraByVideoId","find","VideoPushConnection","errorCallback","skipUserMedia","onStreamSuccess","onStreamError","isOpen","streamRequest","streamRequestCallback","base64EncodedImage","bytesArray","bufferView","counter","onAjaxSuccess","mediaStream","getTracks","track","stop","getMediaStream","videoPushConnection","navigator","mediaDevices","getUserMedia","video","audio","then","catch","webkitGetUserMedia","mozGetUserMedia","userMediaStream","AudioPushConnection","itemIds","sampleRate","streamRequestErrorCallback","pcmData","Int8Array","audioChannel","Transfer-Encoding"],"mappings":"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","sourcesContent":["if (typeof console === \"undefined\"\n    || typeof console.log === \"undefined\"\n    || typeof console.info === \"undefined\"\n    || typeof console.error === \"undefined\"\n    || typeof console.warn === \"undefined\"\n    || !XPMobileSDKSettings.EnableConsoleLog) {\n    console = {};\n    console.log = function () { };\n    console.info = function () { };\n    console.error = function () { };\n    console.warn = function () { };\n} else if (XPMobileSDKSettings.EnableConsoleLog === \"error\") {\n    console.log = function () { };\n    console.info = function () { };\n    console.warn = function () { };\r\n} else if (XPMobileSDKSettings.EnableConsoleLog === \"warn\") {\r\n    console.log = function () { };\n    console.info = function () { };\r\n}","if (typeof Object.assign != 'function') {\n\t\n\tObject.assign = function (target, varArgs) {\n\t\t\n\t\tif (target == null) {\n\t\t\tthrow new TypeError('Cannot convert undefined or null to object');\n\t\t}\n\t\tvar result = Object(target);\n\n\t\tfor (var index = 1; index < arguments.length; index++) {\n\t\t\tvar nextSource = arguments[index];\n\n\t\t\tif (nextSource) {\n\t\t\t\tfor (var nextKey in nextSource) {\n\t\t\t\t\t// Avoid bugs when hasOwnProperty is shadowed\n\t\t\t\t\tif (Object.prototype.hasOwnProperty.call(nextSource, nextKey)) {\n\t\t\t\t\t\tresult[nextKey] = nextSource[nextKey];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn result;\n\t};\n}","/**\n * This library:\n *\t\t1. aims to solve the problem related to preserving types when it comes to web storage; \n *\t\t2. includes an expiration mechanism similar to the one cookies have. \n *\n * By using localStorage and sessionStorage, no matter what kind of a value is saved, this value is always converted to a string. This might lead to unpleasant results. \n * This library provides proxies for these storages, called XPMobileSDK.localStorage nad XPMobileSDK.sessionStorage. \n * Use the methods setItem, getItem, removeItem and clear in the same way described in the specification. Expect the type to be preserved. \n *\n * Example:\n *\t\tXPMobileSDK.sessionStorage.setItem('myKey', true);\n *\t\tXPMobileSDK.sessionStorage.getItem('myKey') === true;\n *\n * The method setItem provides an additional optional parameter: milliseconds. The item will not be available that many milliseconds from the moment of saving. \n *\n * Example:\n *\t\tXPMobileSDK.sessionStorage.setItem('myKey', 'myValue', 1000 * 60);\n *\t\t// after a minute\n *\t\tXPMobileSDK.sessionStorage.getItem('myKey') === null;\n *\n * @author rvp\n */\n(function () {\n\t\n\tif (!window.localStorage || !window.sessionStorage) {\n\t\treturn;\n\t}\n\n\tvar storages = ['sessionStorage', 'localStorage'];\n\n\tfor (var i in storages) {\n\n\t\tXPMobileSDK[storages[i]] = {\n\t\t\t\n\t\t\tstorage: window[storages[i]],\n\n\t\t\tsetItem: function (key, value, expiration) {\n\n\t\t\t\tif (expiration) {\n\t\t\t\t\t\n\t\t\t\t\tvar obj = {\n\t\t\t\t\t\tvalue: value,\n\t\t\t\t\t\texpiration: new Date().getTime() + expiration\n\t\t\t\t\t};\n\t\t\t\t\tthis.storage.setItem(key, 'expiration::' + JSON.stringify(obj));\n\t\t\t\t\treturn ;\n\t\t\t\t}\n\n\t\t\t\tif (typeof value == 'boolean') {\n\t\t\t\t\tthis.storage.setItem(key, 'boolean::' + value);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif (typeof value == 'number') {\n\t\t\t\t\tthis.storage.setItem(key, 'number::' + value);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif (typeof value == 'object') {\n\t\t\t\t\tthis.storage.setItem(key, 'object::' + JSON.stringify(value));\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tthis.storage.setItem(key, value);\n\t\t\t},\n\n\t\t\tgetItem: function (key) {\n\n\t\t\t\tvar value = this.storage.getItem(key);\n\t\t\t\t\n\t\t\t\tif (value == null) {\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\n\t\t\t\tif (value.indexOf('expiration::') == 0) {\n\t\t\t\t\t\n\t\t\t\t\tvar obj = JSON.parse(value.substr(value.indexOf('::') + 2));\n\t\t\t\t\tif (new Date().getTime() > obj.expiration) {\n\t\t\t\t\t\tthis.storage.removeItem(key);\n\t\t\t\t\t\treturn null;\n\t\t\t\t\t} \n\t\t\t\t\treturn obj.value;\n\t\t\t\t}\n\n\t\t\t\tif (value.indexOf('boolean::') == 0) {\n\t\t\t\t\treturn value == 'boolean::true';\n\t\t\t\t}\n\n\t\t\t\tif (value.indexOf('number::') == 0) {\n\t\t\t\t\treturn parseFloat(value.substr(value.indexOf('::') + 2));\n\t\t\t\t}\n\n\t\t\t\tif (value.indexOf('object::') == 0) {\n\t\t\t\t\treturn JSON.parse(value.substr(value.indexOf('::') + 2));\n\t\t\t\t}\n\n\t\t\t\treturn value;\n\t\t\t},\n\t\t\t\n\t\t\tremoveItem: function (key) {\n\t\t\t\tthis.storage.removeItem(key);\n\t\t\t},\n\t\t\t\n\t\t\tclear: function () {\n\t\t\t\tthis.storage.clear();\n\t\t\t},\n\t\t\t\n\t\t\tkey: function (index) {\n\t\t\t\treturn this.storage.key(index);\n\t\t\t}\n\t\t};\n\t\t\n\t}\n\n})();","////////////////////////////////////////////////////////////////////////////////////////\n// Big Integer Library v. 5.4\n// Created 2000, last modified 2009\n// Leemon Baird\n// www.leemon.com\n//\n// Version history:\n// v 5.4  3 Oct 2009\n//   - added \"var i\" to greaterShift() so i is not global. (Thanks to P�ter Szab� for finding that bug)\n//\n// v 5.3  21 Sep 2009\n//   - added randProbPrime(k) for probable primes\n//   - unrolled loop in mont_ (slightly faster)\n//   - millerRabin now takes a bigInt parameter rather than an int\n//\n// v 5.2  15 Sep 2009\n//   - fixed capitalization in call to int2bigInt in randBigInt\n//     (thanks to Emili Evripidou, Reinhold Behringer, and Samuel Macaleese for finding that bug)\n//\n// v 5.1  8 Oct 2007 \n//   - renamed inverseModInt_ to inverseModInt since it doesn't change its parameters\n//   - added functions GCD and randBigInt, which call GCD_ and randBigInt_\n//   - fixed a bug found by Rob Visser (see comment with his name below)\n//   - improved comments\n//\n// This file is public domain.   You can use it for any purpose without restriction.\n// I do not guarantee that it is correct, so use it at your own risk.  If you use \n// it for something interesting, I'd appreciate hearing about it.  If you find \n// any bugs or make any improvements, I'd appreciate hearing about those too.\n// It would also be nice if my name and URL were left in the comments.  But none \n// of that is required.\n//\n// This code defines a bigInt library for arbitrary-precision integers.\n// A bigInt is an array of integers storing the value in chunks of bpe bits, \n// little endian (buff[0] is the least significant word).\n// Negative bigInts are stored two's complement.  Almost all the functions treat\n// bigInts as nonnegative.  The few that view them as two's complement say so\n// in their comments.  Some functions assume their parameters have at least one \n// leading zero element. Functions with an underscore at the end of the name put\n// their answer into one of the arrays passed in, and have unpredictable behavior \n// in case of overflow, so the caller must make sure the arrays are big enough to \n// hold the answer.  But the average user should never have to call any of the \n// underscored functions.  Each important underscored function has a wrapper function \n// of the same name without the underscore that takes care of the details for you.  \n// For each underscored function where a parameter is modified, that same variable \n// must not be used as another argument too.  So, you cannot square x by doing \n// multMod_(x,x,n).  You must use squareMod_(x,n) instead, or do y=dup(x); multMod_(x,y,n).\n// Or simply use the multMod(x,x,n) function without the underscore, where\n// such issues never arise, because non-underscored functions never change\n// their parameters; they always allocate new memory for the answer that is returned.\n//\n// These functions are designed to avoid frequent dynamic memory allocation in the inner loop.\n// For most functions, if it needs a BigInt as a local variable it will actually use\n// a global, and will only allocate to it only when it's not the right size.  This ensures\n// that when a function is called repeatedly with same-sized parameters, it only allocates\n// memory on the first call.\n//\n// Note that for cryptographic purposes, the calls to Math.random() must \n// be replaced with calls to a better pseudorandom number generator.\n//\n// In the following, \"bigInt\" means a bigInt with at least one leading zero element,\n// and \"integer\" means a nonnegative integer less than radix.  In some cases, integer \n// can be negative.  Negative bigInts are 2s complement.\n// \n// The following functions do not modify their inputs.\n// Those returning a bigInt, string, or Array will dynamically allocate memory for that value.\n// Those returning a boolean will return the integer 0 (false) or 1 (true).\n// Those returning boolean or int will not allocate memory except possibly on the first \n// time they're called with a given parameter size.\n// \n// bigInt  add(x,y)               //return (x+y) for bigInts x and y.  \n// bigInt  addInt(x,n)            //return (x+n) where x is a bigInt and n is an integer.\n// string  bigInt2str(x,base)     //return a string form of bigInt x in a given base, with 2 <= base <= 95\n// int     bitSize(x)             //return how many bits long the bigInt x is, not counting leading zeros\n// bigInt  dup(x)                 //return a copy of bigInt x\n// boolean equals(x,y)            //is the bigInt x equal to the bigint y?\n// boolean equalsInt(x,y)         //is bigint x equal to integer y?\n// bigInt  expand(x,n)            //return a copy of x with at least n elements, adding leading zeros if needed\n// Array   findPrimes(n)          //return array of all primes less than integer n\n// bigInt  GCD(x,y)               //return greatest common divisor of bigInts x and y (each with same number of elements).\n// boolean greater(x,y)           //is x>y?  (x and y are nonnegative bigInts)\n// boolean greaterShift(x,y,shift)//is (x <<(shift*bpe)) > y?\n// bigInt  int2bigInt(t,n,m)      //return a bigInt equal to integer t, with at least n bits and m array elements\n// bigInt  inverseMod(x,n)        //return (x**(-1) mod n) for bigInts x and n.  If no inverse exists, it returns null\n// int     inverseModInt(x,n)     //return x**(-1) mod n, for integers x and n.  Return 0 if there is no inverse\n// boolean isZero(x)              //is the bigInt x equal to zero?\n// boolean millerRabin(x,b)       //does one round of Miller-Rabin base integer b say that bigInt x is possibly prime? (b is bigInt, 1<b<x)\n// boolean millerRabinInt(x,b)    //does one round of Miller-Rabin base integer b say that bigInt x is possibly prime? (b is int,    1<b<x)\n// bigInt  mod(x,n)               //return a new bigInt equal to (x mod n) for bigInts x and n.\n// int     modInt(x,n)            //return x mod n for bigInt x and integer n.\n// bigInt  mult(x,y)              //return x*y for bigInts x and y. This is faster when y<x.\n// bigInt  multMod(x,y,n)         //return (x*y mod n) for bigInts x,y,n.  For greater speed, let y<x.\n// boolean negative(x)            //is bigInt x negative?\n// bigInt  powMod(x,y,n)          //return (x**y mod n) where x,y,n are bigInts and ** is exponentiation.  0**0=1. Faster for odd n.\n// bigInt  randBigInt(n,s)        //return an n-bit random BigInt (n>=1).  If s=1, then the most significant of those n bits is set to 1.\n// bigInt  randTruePrime(k)       //return a new, random, k-bit, true prime bigInt using Maurer's algorithm.\n// bigInt  randProbPrime(k)       //return a new, random, k-bit, probable prime bigInt (probability it's composite less than 2^-80).\n// bigInt  str2bigInt(s,b,n,m)    //return a bigInt for number represented in string s in base b with at least n bits and m array elements\n// bigInt  sub(x,y)               //return (x-y) for bigInts x and y.  Negative answers will be 2s complement\n// bigInt  trim(x,k)              //return a copy of x with exactly k leading zero elements\n//\n//\n// The following functions each have a non-underscored version, which most users should call instead.\n// These functions each write to a single parameter, and the caller is responsible for ensuring the array \n// passed in is large enough to hold the result. \n//\n// void    addInt_(x,n)          //do x=x+n where x is a bigInt and n is an integer\n// void    add_(x,y)             //do x=x+y for bigInts x and y\n// void    copy_(x,y)            //do x=y on bigInts x and y\n// void    copyInt_(x,n)         //do x=n on bigInt x and integer n\n// void    GCD_(x,y)             //set x to the greatest common divisor of bigInts x and y, (y is destroyed).  (This never overflows its array).\n// boolean inverseMod_(x,n)      //do x=x**(-1) mod n, for bigInts x and n. Returns 1 (0) if inverse does (doesn't) exist\n// void    mod_(x,n)             //do x=x mod n for bigInts x and n. (This never overflows its array).\n// void    mult_(x,y)            //do x=x*y for bigInts x and y.\n// void    multMod_(x,y,n)       //do x=x*y  mod n for bigInts x,y,n.\n// void    powMod_(x,y,n)        //do x=x**y mod n, where x,y,n are bigInts (n is odd) and ** is exponentiation.  0**0=1.\n// void    randBigInt_(b,n,s)    //do b = an n-bit random BigInt. if s=1, then nth bit (most significant bit) is set to 1. n>=1.\n// void    randTruePrime_(ans,k) //do ans = a random k-bit true random prime (not just probable prime) with 1 in the msb.\n// void    sub_(x,y)             //do x=x-y for bigInts x and y. Negative answers will be 2s complement.\n//\n// The following functions do NOT have a non-underscored version. \n// They each write a bigInt result to one or more parameters.  The caller is responsible for\n// ensuring the arrays passed in are large enough to hold the results. \n//\n// void addShift_(x,y,ys)       //do x=x+(y<<(ys*bpe))\n// void carry_(x)               //do carries and borrows so each element of the bigInt x fits in bpe bits.\n// void divide_(x,y,q,r)        //divide x by y giving quotient q and remainder r\n// int  divInt_(x,n)            //do x=floor(x/n) for bigInt x and integer n, and return the remainder. (This never overflows its array).\n// int  eGCD_(x,y,d,a,b)        //sets a,b,d to positive bigInts such that d = GCD_(x,y) = a*x-b*y\n// void halve_(x)               //do x=floor(|x|/2)*sgn(x) for bigInt x in 2's complement.  (This never overflows its array).\n// void leftShift_(x,n)         //left shift bigInt x by n bits.  n<bpe.\n// void linComb_(x,y,a,b)       //do x=a*x+b*y for bigInts x and y and integers a and b\n// void linCombShift_(x,y,b,ys) //do x=x+b*(y<<(ys*bpe)) for bigInts x and y, and integers b and ys\n// void mont_(x,y,n,np)         //Montgomery multiplication (see comments where the function is defined)\n// void multInt_(x,n)           //do x=x*n where x is a bigInt and n is an integer.\n// void rightShift_(x,n)        //right shift bigInt x by n bits.  0 <= n < bpe. (This never overflows its array).\n// void squareMod_(x,n)         //do x=x*x  mod n for bigInts x,n\n// void subShift_(x,y,ys)       //do x=x-(y<<(ys*bpe)). Negative answers will be 2s complement.\n//\n// The following functions are based on algorithms from the _Handbook of Applied Cryptography_\n//    powMod_()           = algorithm 14.94, Montgomery exponentiation\n//    eGCD_,inverseMod_() = algorithm 14.61, Binary extended GCD_\n//    GCD_()              = algorothm 14.57, Lehmer's algorithm\n//    mont_()             = algorithm 14.36, Montgomery multiplication\n//    divide_()           = algorithm 14.20  Multiple-precision division\n//    squareMod_()        = algorithm 14.16  Multiple-precision squaring\n//    randTruePrime_()    = algorithm  4.62, Maurer's algorithm\n//    millerRabin()       = algorithm  4.24, Miller-Rabin algorithm\n//\n// Profiling shows:\n//     randTruePrime_() spends:\n//         10% of its time in calls to powMod_()\n//         85% of its time in calls to millerRabin()\n//     millerRabin() spends:\n//         99% of its time in calls to powMod_()   (always with a base of 2)\n//     powMod_() spends:\n//         94% of its time in calls to mont_()  (almost always with x==y)\n//\n// This suggests there are several ways to speed up this library slightly:\n//     - convert powMod_ to use a Montgomery form of k-ary window (or maybe a Montgomery form of sliding window)\n//         -- this should especially focus on being fast when raising 2 to a power mod n\n//     - convert randTruePrime_() to use a minimum r of 1/3 instead of 1/2 with the appropriate change to the test\n//     - tune the parameters in randTruePrime_(), including c, m, and recLimit\n//     - speed up the single loop in mont_() that takes 95% of the runtime, perhaps by reducing checking\n//       within the loop when all the parameters are the same length.\n//\n// There are several ideas that look like they wouldn't help much at all:\n//     - replacing trial division in randTruePrime_() with a sieve (that speeds up something taking almost no time anyway)\n//     - increase bpe from 15 to 30 (that would help if we had a 32*32->64 multiplier, but not with JavaScript's 32*32->32)\n//     - speeding up mont_(x,y,n,np) when x==y by doing a non-modular, non-Montgomery square\n//       followed by a Montgomery reduction.  The intermediate answer will be twice as long as x, so that\n//       method would be slower.  This is unfortunate because the code currently spends almost all of its time\n//       doing mont_(x,x,...), both for randTruePrime_() and powMod_().  A faster method for Montgomery squaring\n//       would have a large impact on the speed of randTruePrime_() and powMod_().  HAC has a couple of poorly-worded\n//       sentences that seem to imply it's faster to do a non-modular square followed by a single\n//       Montgomery reduction, but that's obviously wrong.\n////////////////////////////////////////////////////////////////////////////////////////\n\n//globals\nbpe=0;         //bits stored per array element\nmask=0;        //AND this with an array element to chop it down to bpe bits\nradix=mask+1;  //equals 2^bpe.  A single 1 bit to the left of the last bit of mask.\n\n//the digits for converting to different bases\ndigitsStr='0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz_=!@#$%^&*()[]{}|;:,.<>/?`~ \\\\\\'\\\"+-';\n\n//initialize the global variables\nfor (bpe=0; (1<<(bpe+1)) > (1<<bpe); bpe++);  //bpe=number of bits in the mantissa on this platform\nbpe>>=1;                   //bpe=number of bits in one element of the array representing the bigInt\nmask=(1<<bpe)-1;           //AND the mask with an integer to get its bpe least significant bits\nradix=mask+1;              //2^bpe.  a single 1 bit to the left of the first bit of mask\none=int2bigInt(1,1,1);     //constant used in powMod_()\n\n//the following global variables are scratchpad memory to \n//reduce dynamic memory allocation in the inner loop\nt=new Array(0);\nss=t;       //used in mult_()\ns0=t;       //used in multMod_(), squareMod_() \ns1=t;       //used in powMod_(), multMod_(), squareMod_() \ns2=t;       //used in powMod_(), multMod_()\ns3=t;       //used in powMod_()\ns4=t; s5=t; //used in mod_()\ns6=t;       //used in bigInt2str()\ns7=t;       //used in powMod_()\nT=t;        //used in GCD_()\nsa=t;       //used in mont_()\nmr_x1=t; mr_r=t; mr_a=t;                                      //used in millerRabin()\neg_v=t; eg_u=t; eg_A=t; eg_B=t; eg_C=t; eg_D=t;               //used in eGCD_(), inverseMod_()\nmd_q1=t; md_q2=t; md_q3=t; md_r=t; md_r1=t; md_r2=t; md_tt=t; //used in mod_()\n\nprimes=t; pows=t; s_i=t; s_i2=t; s_R=t; s_rm=t; s_q=t; s_n1=t; \n  s_a=t; s_r2=t; s_n=t; s_b=t; s_d=t; s_x1=t; s_x2=t, s_aa=t; //used in randTruePrime_()\n  \nrpprb=t; //used in randProbPrimeRounds() (which also uses \"primes\")\n\n////////////////////////////////////////////////////////////////////////////////////////\n\n\n//return array of all primes less than integer n\nfunction findPrimes(n) {\n  var i,s,p,ans;\n  s=new Array(n);\n  for (i=0;i<n;i++)\n    s[i]=0;\n  s[0]=2;\n  p=0;    //first p elements of s are primes, the rest are a sieve\n  for(;s[p]<n;) {                  //s[p] is the pth prime\n    for(i=s[p]*s[p]; i<n; i+=s[p]) //mark multiples of s[p]\n      s[i]=1;\n    p++;\n    s[p]=s[p-1]+1;\n    for(; s[p]<n && s[s[p]]; s[p]++); //find next prime (where s[p]==0)\n  }\n  ans=new Array(p);\n  for(i=0;i<p;i++)\n    ans[i]=s[i];\n  return ans;\n}\n\n\n//does a single round of Miller-Rabin base b consider x to be a possible prime?\n//x is a bigInt, and b is an integer, with b<x\nfunction millerRabinInt(x,b) {\n  if (mr_x1.length!=x.length) {\n    mr_x1=dup(x);\n    mr_r=dup(x);\n    mr_a=dup(x);\n  }\n\n  copyInt_(mr_a,b);\n  return millerRabin(x,mr_a);\n}\n\n//does a single round of Miller-Rabin base b consider x to be a possible prime?\n//x and b are bigInts with b<x\nfunction millerRabin(x,b) {\n  var i,j,k,s;\n\n  if (mr_x1.length!=x.length) {\n    mr_x1=dup(x);\n    mr_r=dup(x);\n    mr_a=dup(x);\n  }\n\n  copy_(mr_a,b);\n  copy_(mr_r,x);\n  copy_(mr_x1,x);\n\n  addInt_(mr_r,-1);\n  addInt_(mr_x1,-1);\n\n  //s=the highest power of two that divides mr_r\n  k=0;\n  for (i=0;i<mr_r.length;i++)\n    for (j=1;j<mask;j<<=1)\n      if (x[i] & j) {\n        s=(k<mr_r.length+bpe ? k : 0); \n         i=mr_r.length;\n         j=mask;\n      } else\n        k++;\n\n  if (s)                \n    rightShift_(mr_r,s);\n\n  powMod_(mr_a,mr_r,x);\n\n  if (!equalsInt(mr_a,1) && !equals(mr_a,mr_x1)) {\n    j=1;\n    while (j<=s-1 && !equals(mr_a,mr_x1)) {\n      squareMod_(mr_a,x);\n      if (equalsInt(mr_a,1)) {\n        return 0;\n      }\n      j++;\n    }\n    if (!equals(mr_a,mr_x1)) {\n      return 0;\n    }\n  }\n  return 1;  \n}\n\n//returns how many bits long the bigInt is, not counting leading zeros.\nfunction bitSize(x) {\n  var j,z,w;\n  for (j=x.length-1; (x[j]==0) && (j>0); j--);\n  for (z=0,w=x[j]; w; (w>>=1),z++);\n  z+=bpe*j;\n  return z;\n}\n\n//return a copy of x with at least n elements, adding leading zeros if needed\nfunction expand(x,n) {\n  var ans=int2bigInt(0,(x.length>n ? x.length : n)*bpe,0);\n  copy_(ans,x);\n  return ans;\n}\n\n//return a k-bit true random prime using Maurer's algorithm.\nfunction randTruePrime(k) {\n  var ans=int2bigInt(0,k,0);\n  randTruePrime_(ans,k);\n  return trim(ans,1);\n}\n\n//return a k-bit random probable prime with probability of error < 2^-80\nfunction randProbPrime(k) {\n  if (k>=600) return randProbPrimeRounds(k,2); //numbers from HAC table 4.3\n  if (k>=550) return randProbPrimeRounds(k,4);\n  if (k>=500) return randProbPrimeRounds(k,5);\n  if (k>=400) return randProbPrimeRounds(k,6);\n  if (k>=350) return randProbPrimeRounds(k,7);\n  if (k>=300) return randProbPrimeRounds(k,9);\n  if (k>=250) return randProbPrimeRounds(k,12); //numbers from HAC table 4.4\n  if (k>=200) return randProbPrimeRounds(k,15);\n  if (k>=150) return randProbPrimeRounds(k,18);\n  if (k>=100) return randProbPrimeRounds(k,27);\n              return randProbPrimeRounds(k,40); //number from HAC remark 4.26 (only an estimate)\n}\n\n//return a k-bit probable random prime using n rounds of Miller Rabin (after trial division with small primes)\t\nfunction randProbPrimeRounds(k,n) {\n  var ans, i, divisible, B; \n  B=30000;  //B is largest prime to use in trial division\n  ans=int2bigInt(0,k,0);\n  \n  //optimization: try larger and smaller B to find the best limit.\n  \n  if (primes.length==0)\n    primes=findPrimes(30000);  //check for divisibility by primes <=30000\n\n  if (rpprb.length!=ans.length)\n    rpprb=dup(ans);\n\n  for (;;) { //keep trying random values for ans until one appears to be prime\n    //optimization: pick a random number times L=2*3*5*...*p, plus a \n    //   random element of the list of all numbers in [0,L) not divisible by any prime up to p.\n    //   This can reduce the amount of random number generation.\n    \n    randBigInt_(ans,k,0); //ans = a random odd number to check\n    ans[0] |= 1; \n    divisible=0;\n  \n    //check ans for divisibility by small primes up to B\n    for (i=0; (i<primes.length) && (primes[i]<=B); i++)\n      if (modInt(ans,primes[i])==0 && !equalsInt(ans,primes[i])) {\n        divisible=1;\n        break;\n      }      \n    \n    //optimization: change millerRabin so the base can be bigger than the number being checked, then eliminate the while here.\n    \n    //do n rounds of Miller Rabin, with random bases less than ans\n    for (i=0; i<n && !divisible; i++) {\n      randBigInt_(rpprb,k,0);\n      while(!greater(ans,rpprb)) //pick a random rpprb that's < ans\n        randBigInt_(rpprb,k,0);\n      if (!millerRabin(ans,rpprb))\n        divisible=1;\n    }\n    \n    if(!divisible)\n      return ans;\n  }  \n}\n\n//return a new bigInt equal to (x mod n) for bigInts x and n.\nfunction mod(x,n) {\n  var ans=dup(x);\n  mod_(ans,n);\n  return trim(ans,1);\n}\n\n//return (x+n) where x is a bigInt and n is an integer.\nfunction addInt(x,n) {\n  var ans=expand(x,x.length+1);\n  addInt_(ans,n);\n  return trim(ans,1);\n}\n\n//return x*y for bigInts x and y. This is faster when y<x.\nfunction mult(x,y) {\n  var ans=expand(x,x.length+y.length);\n  mult_(ans,y);\n  return trim(ans,1);\n}\n\n//return (x**y mod n) where x,y,n are bigInts and ** is exponentiation.  0**0=1. Faster for odd n.\nfunction powMod(x,y,n) {\n  var ans=expand(x,n.length);  \n  powMod_(ans,trim(y,2),trim(n,2),0);  //this should work without the trim, but doesn't\n  return trim(ans,1);\n}\n\n//return (x-y) for bigInts x and y.  Negative answers will be 2s complement\nfunction sub(x,y) {\n  var ans=expand(x,(x.length>y.length ? x.length+1 : y.length+1)); \n  sub_(ans,y);\n  return trim(ans,1);\n}\n\n//return (x+y) for bigInts x and y.  \nfunction add(x,y) {\n  var ans=expand(x,(x.length>y.length ? x.length+1 : y.length+1)); \n  add_(ans,y);\n  return trim(ans,1);\n}\n\n//return (x**(-1) mod n) for bigInts x and n.  If no inverse exists, it returns null\nfunction inverseMod(x,n) {\n  var ans=expand(x,n.length); \n  var s;\n  s=inverseMod_(ans,n);\n  return s ? trim(ans,1) : null;\n}\n\n//return (x*y mod n) for bigInts x,y,n.  For greater speed, let y<x.\nfunction multMod(x,y,n) {\n  var ans=expand(x,n.length);\n  multMod_(ans,y,n);\n  return trim(ans,1);\n}\n\n//generate a k-bit true random prime using Maurer's algorithm,\n//and put it into ans.  The bigInt ans must be large enough to hold it.\nfunction randTruePrime_(ans,k) {\n  var c,m,pm,dd,j,r,B,divisible,z,zz,recSize;\n\n  if (primes.length==0)\n    primes=findPrimes(30000);  //check for divisibility by primes <=30000\n\n  if (pows.length==0) {\n    pows=new Array(512);\n    for (j=0;j<512;j++) {\n      pows[j]=Math.pow(2,j/511.-1.);\n    }\n  }\n\n  //c and m should be tuned for a particular machine and value of k, to maximize speed\n  c=0.1;  //c=0.1 in HAC\n  m=20;   //generate this k-bit number by first recursively generating a number that has between k/2 and k-m bits\n  recLimit=20; //stop recursion when k <=recLimit.  Must have recLimit >= 2\n\n  if (s_i2.length!=ans.length) {\n    s_i2=dup(ans);\n    s_R =dup(ans);\n    s_n1=dup(ans);\n    s_r2=dup(ans);\n    s_d =dup(ans);\n    s_x1=dup(ans);\n    s_x2=dup(ans);\n    s_b =dup(ans);\n    s_n =dup(ans);\n    s_i =dup(ans);\n    s_rm=dup(ans);\n    s_q =dup(ans);\n    s_a =dup(ans);\n    s_aa=dup(ans);\n  }\n\n  if (k <= recLimit) {  //generate small random primes by trial division up to its square root\n    pm=(1<<((k+2)>>1))-1; //pm is binary number with all ones, just over sqrt(2^k)\n    copyInt_(ans,0);\n    for (dd=1;dd;) {\n      dd=0;\n      ans[0]= 1 | (1<<(k-1)) | Math.floor(Math.random()*(1<<k));  //random, k-bit, odd integer, with msb 1\n      for (j=1;(j<primes.length) && ((primes[j]&pm)==primes[j]);j++) { //trial division by all primes 3...sqrt(2^k)\n        if (0==(ans[0]%primes[j])) {\n          dd=1;\n          break;\n        }\n      }\n    }\n    carry_(ans);\n    return;\n  }\n\n  B=c*k*k;    //try small primes up to B (or all the primes[] array if the largest is less than B).\n  if (k>2*m)  //generate this k-bit number by first recursively generating a number that has between k/2 and k-m bits\n    for (r=1; k-k*r<=m; )\n      r=pows[Math.floor(Math.random()*512)];   //r=Math.pow(2,Math.random()-1);\n  else\n    r=.5;\n\n  //simulation suggests the more complex algorithm using r=.333 is only slightly faster.\n\n  recSize=Math.floor(r*k)+1;\n\n  randTruePrime_(s_q,recSize);\n  copyInt_(s_i2,0);\n  s_i2[Math.floor((k-2)/bpe)] |= (1<<((k-2)%bpe));   //s_i2=2^(k-2)\n  divide_(s_i2,s_q,s_i,s_rm);                        //s_i=floor((2^(k-1))/(2q))\n\n  z=bitSize(s_i);\n\n  for (;;) {\n    for (;;) {  //generate z-bit numbers until one falls in the range [0,s_i-1]\n      randBigInt_(s_R,z,0);\n      if (greater(s_i,s_R))\n        break;\n    }                //now s_R is in the range [0,s_i-1]\n    addInt_(s_R,1);  //now s_R is in the range [1,s_i]\n    add_(s_R,s_i);   //now s_R is in the range [s_i+1,2*s_i]\n\n    copy_(s_n,s_q);\n    mult_(s_n,s_R); \n    multInt_(s_n,2);\n    addInt_(s_n,1);    //s_n=2*s_R*s_q+1\n    \n    copy_(s_r2,s_R);\n    multInt_(s_r2,2);  //s_r2=2*s_R\n\n    //check s_n for divisibility by small primes up to B\n    for (divisible=0,j=0; (j<primes.length) && (primes[j]<B); j++)\n      if (modInt(s_n,primes[j])==0 && !equalsInt(s_n,primes[j])) {\n        divisible=1;\n        break;\n      }      \n\n    if (!divisible)    //if it passes small primes check, then try a single Miller-Rabin base 2\n      if (!millerRabinInt(s_n,2)) //this line represents 75% of the total runtime for randTruePrime_ \n        divisible=1;\n\n    if (!divisible) {  //if it passes that test, continue checking s_n\n      addInt_(s_n,-3);\n      for (j=s_n.length-1;(s_n[j]==0) && (j>0); j--);  //strip leading zeros\n      for (zz=0,w=s_n[j]; w; (w>>=1),zz++);\n      zz+=bpe*j;                             //zz=number of bits in s_n, ignoring leading zeros\n      for (;;) {  //generate z-bit numbers until one falls in the range [0,s_n-1]\n        randBigInt_(s_a,zz,0);\n        if (greater(s_n,s_a))\n          break;\n      }                //now s_a is in the range [0,s_n-1]\n      addInt_(s_n,3);  //now s_a is in the range [0,s_n-4]\n      addInt_(s_a,2);  //now s_a is in the range [2,s_n-2]\n      copy_(s_b,s_a);\n      copy_(s_n1,s_n);\n      addInt_(s_n1,-1);\n      powMod_(s_b,s_n1,s_n);   //s_b=s_a^(s_n-1) modulo s_n\n      addInt_(s_b,-1);\n      if (isZero(s_b)) {\n        copy_(s_b,s_a);\n        powMod_(s_b,s_r2,s_n);\n        addInt_(s_b,-1);\n        copy_(s_aa,s_n);\n        copy_(s_d,s_b);\n        GCD_(s_d,s_n);  //if s_b and s_n are relatively prime, then s_n is a prime\n        if (equalsInt(s_d,1)) {\n          copy_(ans,s_aa);\n          return;     //if we've made it this far, then s_n is absolutely guaranteed to be prime\n        }\n      }\n    }\n  }\n}\n\n//Return an n-bit random BigInt (n>=1).  If s=1, then the most significant of those n bits is set to 1.\nfunction randBigInt(n,s) {\n  var a,b;\n  a=Math.floor((n-1)/bpe)+2; //# array elements to hold the BigInt with a leading 0 element\n  b=int2bigInt(0,0,a);\n  randBigInt_(b,n,s);\n  return b;\n}\n\n//Set b to an n-bit random BigInt.  If s=1, then the most significant of those n bits is set to 1.\n//Array b must be big enough to hold the result. Must have n>=1\nfunction randBigInt_(b,n,s) {\n  var i,a;\n  for (i=0;i<b.length;i++)\n    b[i]=0;\n  a=Math.floor((n-1)/bpe)+1; //# array elements to hold the BigInt\n  for (i=0;i<a;i++) {\n    b[i]=Math.floor(Math.random()*(1<<(bpe-1)));\n  }\n  b[a-1] &= (2<<((n-1)%bpe))-1;\n  if (s==1)\n    b[a-1] |= (1<<((n-1)%bpe));\n}\n\n//Return the greatest common divisor of bigInts x and y (each with same number of elements).\nfunction GCD(x,y) {\n  var xc,yc;\n  xc=dup(x);\n  yc=dup(y);\n  GCD_(xc,yc);\n  return xc;\n}\n\n//set x to the greatest common divisor of bigInts x and y (each with same number of elements).\n//y is destroyed.\nfunction GCD_(x,y) {\n  var i,xp,yp,A,B,C,D,q,sing;\n  if (T.length!=x.length)\n    T=dup(x);\n\n  sing=1;\n  while (sing) { //while y has nonzero elements other than y[0]\n    sing=0;\n    for (i=1;i<y.length;i++) //check if y has nonzero elements other than 0\n      if (y[i]) {\n        sing=1;\n        break;\n      }\n    if (!sing) break; //quit when y all zero elements except possibly y[0]\n\n    for (i=x.length;!x[i] && i>=0;i--);  //find most significant element of x\n    xp=x[i];\n    yp=y[i];\n    A=1; B=0; C=0; D=1;\n    while ((yp+C) && (yp+D)) {\n      q =Math.floor((xp+A)/(yp+C));\n      qp=Math.floor((xp+B)/(yp+D));\n      if (q!=qp)\n        break;\n      t= A-q*C;   A=C;   C=t;    //  do (A,B,xp, C,D,yp) = (C,D,yp, A,B,xp) - q*(0,0,0, C,D,yp)      \n      t= B-q*D;   B=D;   D=t;\n      t=xp-q*yp; xp=yp; yp=t;\n    }\n    if (B) {\n      copy_(T,x);\n      linComb_(x,y,A,B); //x=A*x+B*y\n      linComb_(y,T,D,C); //y=D*y+C*T\n    } else {\n      mod_(x,y);\n      copy_(T,x);\n      copy_(x,y);\n      copy_(y,T);\n    } \n  }\n  if (y[0]==0)\n    return;\n  t=modInt(x,y[0]);\n  copyInt_(x,y[0]);\n  y[0]=t;\n  while (y[0]) {\n    x[0]%=y[0];\n    t=x[0]; x[0]=y[0]; y[0]=t;\n  }\n}\n\n//do x=x**(-1) mod n, for bigInts x and n.\n//If no inverse exists, it sets x to zero and returns 0, else it returns 1.\n//The x array must be at least as large as the n array.\nfunction inverseMod_(x,n) {\n  var k=1+2*Math.max(x.length,n.length);\n\n  if(!(x[0]&1)  && !(n[0]&1)) {  //if both inputs are even, then inverse doesn't exist\n    copyInt_(x,0);\n    return 0;\n  }\n\n  if (eg_u.length!=k) {\n    eg_u=new Array(k);\n    eg_v=new Array(k);\n    eg_A=new Array(k);\n    eg_B=new Array(k);\n    eg_C=new Array(k);\n    eg_D=new Array(k);\n  }\n\n  copy_(eg_u,x);\n  copy_(eg_v,n);\n  copyInt_(eg_A,1);\n  copyInt_(eg_B,0);\n  copyInt_(eg_C,0);\n  copyInt_(eg_D,1);\n  for (;;) {\n    while(!(eg_u[0]&1)) {  //while eg_u is even\n      halve_(eg_u);\n      if (!(eg_A[0]&1) && !(eg_B[0]&1)) { //if eg_A==eg_B==0 mod 2\n        halve_(eg_A);\n        halve_(eg_B);      \n      } else {\n        add_(eg_A,n);  halve_(eg_A);\n        sub_(eg_B,x);  halve_(eg_B);\n      }\n    }\n\n    while (!(eg_v[0]&1)) {  //while eg_v is even\n      halve_(eg_v);\n      if (!(eg_C[0]&1) && !(eg_D[0]&1)) { //if eg_C==eg_D==0 mod 2\n        halve_(eg_C);\n        halve_(eg_D);      \n      } else {\n        add_(eg_C,n);  halve_(eg_C);\n        sub_(eg_D,x);  halve_(eg_D);\n      }\n    }\n\n    if (!greater(eg_v,eg_u)) { //eg_v <= eg_u\n      sub_(eg_u,eg_v);\n      sub_(eg_A,eg_C);\n      sub_(eg_B,eg_D);\n    } else {                   //eg_v > eg_u\n      sub_(eg_v,eg_u);\n      sub_(eg_C,eg_A);\n      sub_(eg_D,eg_B);\n    }\n  \n    if (equalsInt(eg_u,0)) {\n      if (negative(eg_C)) //make sure answer is nonnegative\n        add_(eg_C,n);\n      copy_(x,eg_C);\n\n      if (!equalsInt(eg_v,1)) { //if GCD_(x,n)!=1, then there is no inverse\n        copyInt_(x,0);\n        return 0;\n      }\n      return 1;\n    }\n  }\n}\n\n//return x**(-1) mod n, for integers x and n.  Return 0 if there is no inverse\nfunction inverseModInt(x,n) {\n  var a=1,b=0,t;\n  for (;;) {\n    if (x==1) return a;\n    if (x==0) return 0;\n    b-=a*Math.floor(n/x);\n    n%=x;\n\n    if (n==1) return b; //to avoid negatives, change this b to n-b, and each -= to +=\n    if (n==0) return 0;\n    a-=b*Math.floor(x/n);\n    x%=n;\n  }\n}\n\n//this deprecated function is for backward compatibility only. \nfunction inverseModInt_(x,n) {\n   return inverseModInt(x,n);\n}\n\n\n//Given positive bigInts x and y, change the bigints v, a, and b to positive bigInts such that:\n//     v = GCD_(x,y) = a*x-b*y\n//The bigInts v, a, b, must have exactly as many elements as the larger of x and y.\nfunction eGCD_(x,y,v,a,b) {\n  var g=0;\n  var k=Math.max(x.length,y.length);\n  if (eg_u.length!=k) {\n    eg_u=new Array(k);\n    eg_A=new Array(k);\n    eg_B=new Array(k);\n    eg_C=new Array(k);\n    eg_D=new Array(k);\n  }\n  while(!(x[0]&1)  && !(y[0]&1)) {  //while x and y both even\n    halve_(x);\n    halve_(y);\n    g++;\n  }\n  copy_(eg_u,x);\n  copy_(v,y);\n  copyInt_(eg_A,1);\n  copyInt_(eg_B,0);\n  copyInt_(eg_C,0);\n  copyInt_(eg_D,1);\n  for (;;) {\n    while(!(eg_u[0]&1)) {  //while u is even\n      halve_(eg_u);\n      if (!(eg_A[0]&1) && !(eg_B[0]&1)) { //if A==B==0 mod 2\n        halve_(eg_A);\n        halve_(eg_B);      \n      } else {\n        add_(eg_A,y);  halve_(eg_A);\n        sub_(eg_B,x);  halve_(eg_B);\n      }\n    }\n\n    while (!(v[0]&1)) {  //while v is even\n      halve_(v);\n      if (!(eg_C[0]&1) && !(eg_D[0]&1)) { //if C==D==0 mod 2\n        halve_(eg_C);\n        halve_(eg_D);      \n      } else {\n        add_(eg_C,y);  halve_(eg_C);\n        sub_(eg_D,x);  halve_(eg_D);\n      }\n    }\n\n    if (!greater(v,eg_u)) { //v<=u\n      sub_(eg_u,v);\n      sub_(eg_A,eg_C);\n      sub_(eg_B,eg_D);\n    } else {                //v>u\n      sub_(v,eg_u);\n      sub_(eg_C,eg_A);\n      sub_(eg_D,eg_B);\n    }\n    if (equalsInt(eg_u,0)) {\n      if (negative(eg_C)) {   //make sure a (C)is nonnegative\n        add_(eg_C,y);\n        sub_(eg_D,x);\n      }\n      multInt_(eg_D,-1);  ///make sure b (D) is nonnegative\n      copy_(a,eg_C);\n      copy_(b,eg_D);\n      leftShift_(v,g);\n      return;\n    }\n  }\n}\n\n\n//is bigInt x negative?\nfunction negative(x) {\n  return ((x[x.length-1]>>(bpe-1))&1);\n}\n\n\n//is (x << (shift*bpe)) > y?\n//x and y are nonnegative bigInts\n//shift is a nonnegative integer\nfunction greaterShift(x,y,shift) {\n  var i, kx=x.length, ky=y.length;\n  k=((kx+shift)<ky) ? (kx+shift) : ky;\n  for (i=ky-1-shift; i<kx && i>=0; i++) \n    if (x[i]>0)\n      return 1; //if there are nonzeros in x to the left of the first column of y, then x is bigger\n  for (i=kx-1+shift; i<ky; i++)\n    if (y[i]>0)\n      return 0; //if there are nonzeros in y to the left of the first column of x, then x is not bigger\n  for (i=k-1; i>=shift; i--)\n    if      (x[i-shift]>y[i]) return 1;\n    else if (x[i-shift]<y[i]) return 0;\n  return 0;\n}\n\n//is x > y? (x and y both nonnegative)\nfunction greater(x,y) {\n  var i;\n  var k=(x.length<y.length) ? x.length : y.length;\n\n  for (i=x.length;i<y.length;i++)\n    if (y[i])\n      return 0;  //y has more digits\n\n  for (i=y.length;i<x.length;i++)\n    if (x[i])\n      return 1;  //x has more digits\n\n  for (i=k-1;i>=0;i--)\n    if (x[i]>y[i])\n      return 1;\n    else if (x[i]<y[i])\n      return 0;\n  return 0;\n}\n\n//divide x by y giving quotient q and remainder r.  (q=floor(x/y),  r=x mod y).  All 4 are bigints.\n//x must have at least one leading zero element.\n//y must be nonzero.\n//q and r must be arrays that are exactly the same length as x. (Or q can have more).\n//Must have x.length >= y.length >= 2.\nfunction divide_(x,y,q,r) {\n  var kx, ky;\n  var i,j,y1,y2,c,a,b;\n  copy_(r,x);\n  for (ky=y.length;y[ky-1]==0;ky--); //ky is number of elements in y, not including leading zeros\n\n  //normalize: ensure the most significant element of y has its highest bit set  \n  b=y[ky-1];\n  for (a=0; b; a++)\n    b>>=1;  \n  a=bpe-a;  //a is how many bits to shift so that the high order bit of y is leftmost in its array element\n  leftShift_(y,a);  //multiply both by 1<<a now, then divide both by that at the end\n  leftShift_(r,a);\n\n  //Rob Visser discovered a bug: the following line was originally just before the normalization.\n  for (kx=r.length;r[kx-1]==0 && kx>ky;kx--); //kx is number of elements in normalized x, not including leading zeros\n\n  copyInt_(q,0);                      // q=0\n  while (!greaterShift(y,r,kx-ky)) {  // while (leftShift_(y,kx-ky) <= r) {\n    subShift_(r,y,kx-ky);             //   r=r-leftShift_(y,kx-ky)\n    q[kx-ky]++;                       //   q[kx-ky]++;\n  }                                   // }\n\n  for (i=kx-1; i>=ky; i--) {\n    if (r[i]==y[ky-1])\n      q[i-ky]=mask;\n    else\n      q[i-ky]=Math.floor((r[i]*radix+r[i-1])/y[ky-1]);\t\n\n    //The following for(;;) loop is equivalent to the commented while loop, \n    //except that the uncommented version avoids overflow.\n    //The commented loop comes from HAC, which assumes r[-1]==y[-1]==0\n    //  while (q[i-ky]*(y[ky-1]*radix+y[ky-2]) > r[i]*radix*radix+r[i-1]*radix+r[i-2])\n    //    q[i-ky]--;    \n    for (;;) {\n      y2=(ky>1 ? y[ky-2] : 0)*q[i-ky];\n      c=y2>>bpe;\n      y2=y2 & mask;\n      y1=c+q[i-ky]*y[ky-1];\n      c=y1>>bpe;\n      y1=y1 & mask;\n\n      if (c==r[i] ? y1==r[i-1] ? y2>(i>1 ? r[i-2] : 0) : y1>r[i-1] : c>r[i]) \n        q[i-ky]--;\n      else\n        break;\n    }\n\n    linCombShift_(r,y,-q[i-ky],i-ky);    //r=r-q[i-ky]*leftShift_(y,i-ky)\n    if (negative(r)) {\n      addShift_(r,y,i-ky);         //r=r+leftShift_(y,i-ky)\n      q[i-ky]--;\n    }\n  }\n\n  rightShift_(y,a);  //undo the normalization step\n  rightShift_(r,a);  //undo the normalization step\n}\n\n//do carries and borrows so each element of the bigInt x fits in bpe bits.\nfunction carry_(x) {\n  var i,k,c,b;\n  k=x.length;\n  c=0;\n  for (i=0;i<k;i++) {\n    c+=x[i];\n    b=0;\n    if (c<0) {\n      b=-(c>>bpe);\n      c+=b*radix;\n    }\n    x[i]=c & mask;\n    c=(c>>bpe)-b;\n  }\n}\n\n//return x mod n for bigInt x and integer n.\nfunction modInt(x,n) {\n  var i,c=0;\n  for (i=x.length-1; i>=0; i--)\n    c=(c*radix+x[i])%n;\n  return c;\n}\n\n//convert the integer t into a bigInt with at least the given number of bits.\n//the returned array stores the bigInt in bpe-bit chunks, little endian (buff[0] is least significant word)\n//Pad the array with leading zeros so that it has at least minSize elements.\n//There will always be at least one leading 0 element.\nfunction int2bigInt(t,bits,minSize) {   \n  var i,k;\n  k=Math.ceil(bits/bpe)+1;\n  k=minSize>k ? minSize : k;\n  buff=new Array(k);\n  copyInt_(buff,t);\n  return buff;\n}\n\n//return the bigInt given a string representation in a given base.  \n//Pad the array with leading zeros so that it has at least minSize elements.\n//If base=-1, then it reads in a space-separated list of array elements in decimal.\n//The array will always have at least one leading zero, unless base=-1.\nfunction str2bigInt(s,base,minSize) {\n  var d, i, j, x, y, kk;\n  var k=s.length;\n  if (base==-1) { //comma-separated list of array elements in decimal\n    x=new Array(0);\n    for (;;) {\n      y=new Array(x.length+1);\n      for (i=0;i<x.length;i++)\n        y[i+1]=x[i];\n      y[0]=parseInt(s,10);\n      x=y;\n      d=s.indexOf(',',0);\n      if (d<1) \n        break;\n      s=s.substring(d+1);\n      if (s.length==0)\n        break;\n    }\n    if (x.length<minSize) {\n      y=new Array(minSize);\n      copy_(y,x);\n      return y;\n    }\n    return x;\n  }\n\n  x=int2bigInt(0,base*k,0);\n  for (i=0;i<k;i++) {\n    d=digitsStr.indexOf(s.substring(i,i+1),0);\n    if (base<=36 && d>=36)  //convert lowercase to uppercase if base<=36\n      d-=26;\n    if (d>=base || d<0) {   //stop at first illegal character\n      break;\n    }\n    multInt_(x,base);\n    addInt_(x,d);\n  }\n\n  for (k=x.length;k>0 && !x[k-1];k--); //strip off leading zeros\n  k=minSize>k+1 ? minSize : k+1;\n  y=new Array(k);\n  kk=k<x.length ? k : x.length;\n  for (i=0;i<kk;i++)\n    y[i]=x[i];\n  for (;i<k;i++)\n    y[i]=0;\n  return y;\n}\n\n//is bigint x equal to integer y?\n//y must have less than bpe bits\nfunction equalsInt(x,y) {\n  var i;\n  if (x[0]!=y)\n    return 0;\n  for (i=1;i<x.length;i++)\n    if (x[i])\n      return 0;\n  return 1;\n}\n\n//are bigints x and y equal?\n//this works even if x and y are different lengths and have arbitrarily many leading zeros\nfunction equals(x,y) {\n  var i;\n  var k=x.length<y.length ? x.length : y.length;\n  for (i=0;i<k;i++)\n    if (x[i]!=y[i])\n      return 0;\n  if (x.length>y.length) {\n    for (;i<x.length;i++)\n      if (x[i])\n        return 0;\n  } else {\n    for (;i<y.length;i++)\n      if (y[i])\n        return 0;\n  }\n  return 1;\n}\n\n//is the bigInt x equal to zero?\nfunction isZero(x) {\n  var i;\n  for (i=0;i<x.length;i++)\n    if (x[i])\n      return 0;\n  return 1;\n}\n\n//convert a bigInt into a string in a given base, from base 2 up to base 95.\n//Base -1 prints the contents of the array representing the number.\nfunction bigInt2str(x,base) {\n  var i,t,s=\"\";\n\n  if (s6.length!=x.length) \n    s6=dup(x);\n  else\n    copy_(s6,x);\n\n  if (base==-1) { //return the list of array contents\n    for (i=x.length-1;i>0;i--)\n      s+=x[i]+',';\n    s+=x[0];\n  }\n  else { //return it in the given base\n    while (!isZero(s6)) {\n      t=divInt_(s6,base);  //t=s6 % base; s6=floor(s6/base);\n      s=digitsStr.substring(t,t+1)+s;\n    }\n  }\n  if (s.length==0)\n    s=\"0\";\n  return s;\n}\n\n//returns a duplicate of bigInt x\nfunction dup(x) {\n  var i;\n  buff=new Array(x.length);\n  copy_(buff,x);\n  return buff;\n}\n\n//do x=y on bigInts x and y.  x must be an array at least as big as y (not counting the leading zeros in y).\nfunction copy_(x,y) {\n  var i;\n  var k=x.length<y.length ? x.length : y.length;\n  for (i=0;i<k;i++)\n    x[i]=y[i];\n  for (i=k;i<x.length;i++)\n    x[i]=0;\n}\n\n//do x=y on bigInt x and integer y.  \nfunction copyInt_(x,n) {\n  var i,c;\n  for (c=n,i=0;i<x.length;i++) {\n    x[i]=c & mask;\n    c>>=bpe;\n  }\n}\n\n//do x=x+n where x is a bigInt and n is an integer.\n//x must be large enough to hold the result.\nfunction addInt_(x,n) {\n  var i,k,c,b;\n  x[0]+=n;\n  k=x.length;\n  c=0;\n  for (i=0;i<k;i++) {\n    c+=x[i];\n    b=0;\n    if (c<0) {\n      b=-(c>>bpe);\n      c+=b*radix;\n    }\n    x[i]=c & mask;\n    c=(c>>bpe)-b;\n    if (!c) return; //stop carrying as soon as the carry is zero\n  }\n}\n\n//right shift bigInt x by n bits.  0 <= n < bpe.\nfunction rightShift_(x,n) {\n  var i;\n  var k=Math.floor(n/bpe);\n  if (k) {\n    for (i=0;i<x.length-k;i++) //right shift x by k elements\n      x[i]=x[i+k];\n    for (;i<x.length;i++)\n      x[i]=0;\n    n%=bpe;\n  }\n  for (i=0;i<x.length-1;i++) {\n    x[i]=mask & ((x[i+1]<<(bpe-n)) | (x[i]>>n));\n  }\n  x[i]>>=n;\n}\n\n//do x=floor(|x|/2)*sgn(x) for bigInt x in 2's complement\nfunction halve_(x) {\n  var i;\n  for (i=0;i<x.length-1;i++) {\n    x[i]=mask & ((x[i+1]<<(bpe-1)) | (x[i]>>1));\n  }\n  x[i]=(x[i]>>1) | (x[i] & (radix>>1));  //most significant bit stays the same\n}\n\n//left shift bigInt x by n bits.\nfunction leftShift_(x,n) {\n  var i;\n  var k=Math.floor(n/bpe);\n  if (k) {\n    for (i=x.length; i>=k; i--) //left shift x by k elements\n      x[i]=x[i-k];\n    for (;i>=0;i--)\n      x[i]=0;  \n    n%=bpe;\n  }\n  if (!n)\n    return;\n  for (i=x.length-1;i>0;i--) {\n    x[i]=mask & ((x[i]<<n) | (x[i-1]>>(bpe-n)));\n  }\n  x[i]=mask & (x[i]<<n);\n}\n\n//do x=x*n where x is a bigInt and n is an integer.\n//x must be large enough to hold the result.\nfunction multInt_(x,n) {\n  var i,k,c,b;\n  if (!n)\n    return;\n  k=x.length;\n  c=0;\n  for (i=0;i<k;i++) {\n    c+=x[i]*n;\n    b=0;\n    if (c<0) {\n      b=-(c>>bpe);\n      c+=b*radix;\n    }\n    x[i]=c & mask;\n    c=(c>>bpe)-b;\n  }\n}\n\n//do x=floor(x/n) for bigInt x and integer n, and return the remainder\nfunction divInt_(x,n) {\n  var i,r=0,s;\n  for (i=x.length-1;i>=0;i--) {\n    s=r*radix+x[i];\n    x[i]=Math.floor(s/n);\n    r=s%n;\n  }\n  return r;\n}\n\n//do the linear combination x=a*x+b*y for bigInts x and y, and integers a and b.\n//x must be large enough to hold the answer.\nfunction linComb_(x,y,a,b) {\n  var i,c,k,kk;\n  k=x.length<y.length ? x.length : y.length;\n  kk=x.length;\n  for (c=0,i=0;i<k;i++) {\n    c+=a*x[i]+b*y[i];\n    x[i]=c & mask;\n    c>>=bpe;\n  }\n  for (i=k;i<kk;i++) {\n    c+=a*x[i];\n    x[i]=c & mask;\n    c>>=bpe;\n  }\n}\n\n//do the linear combination x=a*x+b*(y<<(ys*bpe)) for bigInts x and y, and integers a, b and ys.\n//x must be large enough to hold the answer.\nfunction linCombShift_(x,y,b,ys) {\n  var i,c,k,kk;\n  k=x.length<ys+y.length ? x.length : ys+y.length;\n  kk=x.length;\n  for (c=0,i=ys;i<k;i++) {\n    c+=x[i]+b*y[i-ys];\n    x[i]=c & mask;\n    c>>=bpe;\n  }\n  for (i=k;c && i<kk;i++) {\n    c+=x[i];\n    x[i]=c & mask;\n    c>>=bpe;\n  }\n}\n\n//do x=x+(y<<(ys*bpe)) for bigInts x and y, and integers a,b and ys.\n//x must be large enough to hold the answer.\nfunction addShift_(x,y,ys) {\n  var i,c,k,kk;\n  k=x.length<ys+y.length ? x.length : ys+y.length;\n  kk=x.length;\n  for (c=0,i=ys;i<k;i++) {\n    c+=x[i]+y[i-ys];\n    x[i]=c & mask;\n    c>>=bpe;\n  }\n  for (i=k;c && i<kk;i++) {\n    c+=x[i];\n    x[i]=c & mask;\n    c>>=bpe;\n  }\n}\n\n//do x=x-(y<<(ys*bpe)) for bigInts x and y, and integers a,b and ys.\n//x must be large enough to hold the answer.\nfunction subShift_(x,y,ys) {\n  var i,c,k,kk;\n  k=x.length<ys+y.length ? x.length : ys+y.length;\n  kk=x.length;\n  for (c=0,i=ys;i<k;i++) {\n    c+=x[i]-y[i-ys];\n    x[i]=c & mask;\n    c>>=bpe;\n  }\n  for (i=k;c && i<kk;i++) {\n    c+=x[i];\n    x[i]=c & mask;\n    c>>=bpe;\n  }\n}\n\n//do x=x-y for bigInts x and y.\n//x must be large enough to hold the answer.\n//negative answers will be 2s complement\nfunction sub_(x,y) {\n  var i,c,k,kk;\n  k=x.length<y.length ? x.length : y.length;\n  for (c=0,i=0;i<k;i++) {\n    c+=x[i]-y[i];\n    x[i]=c & mask;\n    c>>=bpe;\n  }\n  for (i=k;c && i<x.length;i++) {\n    c+=x[i];\n    x[i]=c & mask;\n    c>>=bpe;\n  }\n}\n\n//do x=x+y for bigInts x and y.\n//x must be large enough to hold the answer.\nfunction add_(x,y) {\n  var i,c,k,kk;\n  k=x.length<y.length ? x.length : y.length;\n  for (c=0,i=0;i<k;i++) {\n    c+=x[i]+y[i];\n    x[i]=c & mask;\n    c>>=bpe;\n  }\n  for (i=k;c && i<x.length;i++) {\n    c+=x[i];\n    x[i]=c & mask;\n    c>>=bpe;\n  }\n}\n\n//do x=x*y for bigInts x and y.  This is faster when y<x.\nfunction mult_(x,y) {\n  var i;\n  if (ss.length!=2*x.length)\n    ss=new Array(2*x.length);\n  copyInt_(ss,0);\n  for (i=0;i<y.length;i++)\n    if (y[i])\n      linCombShift_(ss,x,y[i],i);   //ss=1*ss+y[i]*(x<<(i*bpe))\n  copy_(x,ss);\n}\n\n//do x=x mod n for bigInts x and n.\nfunction mod_(x,n) {\n  if (s4.length!=x.length)\n    s4=dup(x);\n  else\n    copy_(s4,x);\n  if (s5.length!=x.length)\n    s5=dup(x);  \n  divide_(s4,n,s5,x);  //x = remainder of s4 / n\n}\n\n//do x=x*y mod n for bigInts x,y,n.\n//for greater speed, let y<x.\nfunction multMod_(x,y,n) {\n  var i;\n  if (s0.length!=2*x.length)\n    s0=new Array(2*x.length);\n  copyInt_(s0,0);\n  for (i=0;i<y.length;i++)\n    if (y[i])\n      linCombShift_(s0,x,y[i],i);   //s0=1*s0+y[i]*(x<<(i*bpe))\n  mod_(s0,n);\n  copy_(x,s0);\n}\n\n//do x=x*x mod n for bigInts x,n.\nfunction squareMod_(x,n) {\n  var i,j,d,c,kx,kn,k;\n  for (kx=x.length; kx>0 && !x[kx-1]; kx--);  //ignore leading zeros in x\n  k=kx>n.length ? 2*kx : 2*n.length; //k=# elements in the product, which is twice the elements in the larger of x and n\n  if (s0.length!=k) \n    s0=new Array(k);\n  copyInt_(s0,0);\n  for (i=0;i<kx;i++) {\n    c=s0[2*i]+x[i]*x[i];\n    s0[2*i]=c & mask;\n    c>>=bpe;\n    for (j=i+1;j<kx;j++) {\n      c=s0[i+j]+2*x[i]*x[j]+c;\n      s0[i+j]=(c & mask);\n      c>>=bpe;\n    }\n    s0[i+kx]=c;\n  }\n  mod_(s0,n);\n  copy_(x,s0);\n}\n\n//return x with exactly k leading zero elements\nfunction trim(x,k) {\n  var i,y;\n  for (i=x.length; i>0 && !x[i-1]; i--);\n  y=new Array(i+k);\n  copy_(y,x);\n  return y;\n}\n\n//do x=x**y mod n, where x,y,n are bigInts and ** is exponentiation.  0**0=1.\n//this is faster when n is odd.  x usually needs to have as many elements as n.\nfunction powMod_(x,y,n) {\n  var k1,k2,kn,np;\n  if(s7.length!=n.length)\n    s7=dup(n);\n\n  //for even modulus, use a simple square-and-multiply algorithm,\n  //rather than using the more complex Montgomery algorithm.\n  if ((n[0]&1)==0) {\n    copy_(s7,x);\n    copyInt_(x,1);\n    while(!equalsInt(y,0)) {\n      if (y[0]&1)\n        multMod_(x,s7,n);\n      divInt_(y,2);\n      squareMod_(s7,n); \n    }\n    return;\n  }\n\n  //calculate np from n for the Montgomery multiplications\n  copyInt_(s7,0);\n  for (kn=n.length;kn>0 && !n[kn-1];kn--);\n  np=radix-inverseModInt(modInt(n,radix),radix);\n  s7[kn]=1;\n  multMod_(x ,s7,n);   // x = x * 2**(kn*bp) mod n\n\n  if (s3.length!=x.length)\n    s3=dup(x);\n  else\n    copy_(s3,x);\n\n  for (k1=y.length-1;k1>0 & !y[k1]; k1--);  //k1=first nonzero element of y\n  if (y[k1]==0) {  //anything to the 0th power is 1\n    copyInt_(x,1);\n    return;\n  }\n  for (k2=1<<(bpe-1);k2 && !(y[k1] & k2); k2>>=1);  //k2=position of first 1 bit in y[k1]\n  for (;;) {\n    if (!(k2>>=1)) {  //look at next bit of y\n      k1--;\n      if (k1<0) {\n        mont_(x,one,n,np);\n        return;\n      }\n      k2=1<<(bpe-1);\n    }    \n    mont_(x,x,n,np);\n\n    if (k2 & y[k1]) //if next bit is a 1\n      mont_(x,s3,n,np);\n  }\n}\n\n\n//do x=x*y*Ri mod n for bigInts x,y,n, \n//  where Ri = 2**(-kn*bpe) mod n, and kn is the \n//  number of elements in the n array, not \n//  counting leading zeros.  \n//x array must have at least as many elemnts as the n array\n//It's OK if x and y are the same variable.\n//must have:\n//  x,y < n\n//  n is odd\n//  np = -(n^(-1)) mod radix\nfunction mont_(x,y,n,np) {\n  var i,j,c,ui,t,ks;\n  var kn=n.length;\n  var ky=y.length;\n\n  if (sa.length!=kn)\n    sa=new Array(kn);\n    \n  copyInt_(sa,0);\n\n  for (;kn>0 && n[kn-1]==0;kn--); //ignore leading zeros of n\n  for (;ky>0 && y[ky-1]==0;ky--); //ignore leading zeros of y\n  ks=sa.length-1; //sa will never have more than this many nonzero elements.  \n\n  //the following loop consumes 95% of the runtime for randTruePrime_() and powMod_() for large numbers\n  for (i=0; i<kn; i++) {\n    t=sa[0]+x[i]*y[0];\n    ui=((t & mask) * np) & mask;  //the inner \"& mask\" was needed on Safari (but not MSIE) at one time\n    c=(t+ui*n[0]) >> bpe;\n    t=x[i];\n    \n    //do sa=(sa+x[i]*y+ui*n)/b   where b=2**bpe.  Loop is unrolled 5-fold for speed\n    j=1;\n    for (;j<ky-4;) { c+=sa[j]+ui*n[j]+t*y[j];   sa[j-1]=c & mask;   c>>=bpe;   j++;\n                     c+=sa[j]+ui*n[j]+t*y[j];   sa[j-1]=c & mask;   c>>=bpe;   j++;\n                     c+=sa[j]+ui*n[j]+t*y[j];   sa[j-1]=c & mask;   c>>=bpe;   j++;\n                     c+=sa[j]+ui*n[j]+t*y[j];   sa[j-1]=c & mask;   c>>=bpe;   j++;\n                     c+=sa[j]+ui*n[j]+t*y[j];   sa[j-1]=c & mask;   c>>=bpe;   j++; }    \n    for (;j<ky;)   { c+=sa[j]+ui*n[j]+t*y[j];   sa[j-1]=c & mask;   c>>=bpe;   j++; }\n    for (;j<kn-4;) { c+=sa[j]+ui*n[j];          sa[j-1]=c & mask;   c>>=bpe;   j++;\n                     c+=sa[j]+ui*n[j];          sa[j-1]=c & mask;   c>>=bpe;   j++;\n                     c+=sa[j]+ui*n[j];          sa[j-1]=c & mask;   c>>=bpe;   j++;\n                     c+=sa[j]+ui*n[j];          sa[j-1]=c & mask;   c>>=bpe;   j++;\n                     c+=sa[j]+ui*n[j];          sa[j-1]=c & mask;   c>>=bpe;   j++; }  \n    for (;j<kn;)   { c+=sa[j]+ui*n[j];          sa[j-1]=c & mask;   c>>=bpe;   j++; }   \n    for (;j<ks;)   { c+=sa[j];                  sa[j-1]=c & mask;   c>>=bpe;   j++; }  \n    sa[j-1]=c & mask;\n  }\n\n  if (!greater(n,sa))\n    sub_(sa,n);\n  copy_(x,sa);\n}\n\n\n","/**\n*\n*  Base64 encode / decode\n*  http://www.webtoolkit.info/\n*\n**/\n\nvar Base64 = {\n\n\t// private property\n\t_keyStr : \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\",\n\n\t// public method for encoding\n\tencode : function (input) {\n\t\tvar output = \"\";\n\t\tvar chr1, chr2, chr3, enc1, enc2, enc3, enc4;\n\t\tvar i = 0;\n\n\t\t//input = Base64._utf8_encode(input);\n\n\t\twhile (i < input.length) {\n\n\t\t\tchr1 = input.charCodeAt(i++);\n\t\t\tchr2 = input.charCodeAt(i++);\n\t\t\tchr3 = input.charCodeAt(i++);\n\n\t\t\tenc1 = chr1 >> 2;\n\t\t\tenc2 = ((chr1 & 3) << 4) | (chr2 >> 4);\n\t\t\tenc3 = ((chr2 & 15) << 2) | (chr3 >> 6);\n\t\t\tenc4 = chr3 & 63;\n\n\t\t\tif (isNaN(chr2)) {\n\t\t\t\tenc3 = enc4 = 64;\n\t\t\t} else if (isNaN(chr3)) {\n\t\t\t\tenc4 = 64;\n\t\t\t}\n\n\t\t\toutput = output +\n\t\t\tthis._keyStr.charAt(enc1) + this._keyStr.charAt(enc2) +\n\t\t\tthis._keyStr.charAt(enc3) + this._keyStr.charAt(enc4);\n\n\t\t}\n\n\t\treturn output;\n\t},\n\t\n\tencodeArray : function (input) {\n\t\tvar output = \"\";\n\t\tvar chr1, chr2, chr3, enc1, enc2, enc3, enc4;\n\t\tvar i = 0;\n\n\t\t//input = Base64._utf8_encode(input);\n\n\t\twhile (i < input.length) {\n\n\t\t\tchr1 = input[i++];\n\t\t\tchr2 = input[i++];\n\t\t\tchr3 = input[i++];\n\n\t\t\tenc1 = chr1 >> 2;\n\t\t\tenc2 = ((chr1 & 3) << 4) | (chr2 >> 4);\n\t\t\tenc3 = ((chr2 & 15) << 2) | (chr3 >> 6);\n\t\t\tenc4 = chr3 & 63;\n\n\t\t\tif (isNaN(chr2)) {\n\t\t\t\tenc3 = enc4 = 64;\n\t\t\t} else if (isNaN(chr3)) {\n\t\t\t\tenc4 = 64;\n\t\t\t}\n\n\t\t\toutput = output +\n\t\t\tthis._keyStr.charAt(enc1) + this._keyStr.charAt(enc2) +\n\t\t\tthis._keyStr.charAt(enc3) + this._keyStr.charAt(enc4);\n\n\t\t}\n\n\t\treturn output;\n\t},\n\n\t// public method for decoding\n\tdecode : function (input) {\n\t\tvar output = \"\";\n\t\tvar chr1, chr2, chr3;\n\t\tvar enc1, enc2, enc3, enc4;\n\t\tvar i = 0;\n\n\t\tinput = input.replace(/[^A-Za-z0-9\\+\\/\\=]/g, \"\");\n\n\t\twhile (i < input.length) {\n\n\t\t\tenc1 = this._keyStr.indexOf(input.charAt(i++));\n\t\t\tenc2 = this._keyStr.indexOf(input.charAt(i++));\n\t\t\tenc3 = this._keyStr.indexOf(input.charAt(i++));\n\t\t\tenc4 = this._keyStr.indexOf(input.charAt(i++));\n\n\t\t\tchr1 = (enc1 << 2) | (enc2 >> 4);\n\t\t\tchr2 = ((enc2 & 15) << 4) | (enc3 >> 2);\n\t\t\tchr3 = ((enc3 & 3) << 6) | enc4;\n\n\t\t\toutput = output + String.fromCharCode(chr1);\n\n\t\t\tif (enc3 != 64) {\n\t\t\t\toutput = output + String.fromCharCode(chr2);\n\t\t\t}\n\t\t\tif (enc4 != 64) {\n\t\t\t\toutput = output + String.fromCharCode(chr3);\n\t\t\t}\n\n\t\t}\n\n\t\toutput = Base64._utf8_decode(output);\n\n\t\treturn output;\n\n\t},\n\t\n\t// public method for decoding binary\n\tdecodeBinary: function(input, arrayBuffer) {\n\t\t(function() {\n\t\t\ttry {\n\t\t\t\tvar a = new Uint8Array(1);\n\t\t\t\treturn; //no need\n\t\t\t} catch(e) { }\n\t\t\t\n\t\t\tfunction subarray(start, end) {\n\t\t\t\treturn this.slice(start, end);\n\t\t\t}\n\t\t\t\n\t\t\tfunction set_(array, offset) {\n\t\t\t\tif (arguments.length < 2) offset = 0;\n\t\t\t\tfor (var i = 0, n = array.length; i < n; ++i, ++offset)\n\t\t\t\t\tthis[offset] = array[i] & 0xFF;\n\t\t\t}\n\t\t\t\n\t\t\t// we need typed arrays\n\t\t\tfunction TypedArray(arg1) {\n\t\t\t\tvar result;\n\t\t\t\tif (typeof arg1 === \"number\") {\n\t\t\t\t\tresult = new Array(arg1);\n\t\t\t\t\tfor (var i = 0; i < arg1; ++i)\n\t\t\t\t\t\tresult[i] = 0;\n\t\t\t\t} else\n\t\t\t\t\tresult = arg1.slice(0);\n\t\t\t\tresult.subarray = subarray;\n\t\t\t\tresult.buffer = result;\n\t\t\t\tresult.byteLength = result.length;\n\t\t\t\tresult.set = set_;\n\t\t\t\tif (typeof arg1 === \"object\" && arg1.buffer)\n\t\t\t\t\tresult.buffer = arg1.buffer;\n\t\t\t\treturn result;\n\t\t\t}\n\t\t\twindow.Uint8Array = TypedArray;\n\t\t\twindow.Uint32Array = TypedArray;\n\t\t\twindow.Int32Array = TypedArray;\n\t\t})();\n\t\n\t\t//get last chars to see if are valid\n\t\tvar lkey1 = this._keyStr.indexOf(input.charAt(input.length-1));\t\t \n\t\tvar lkey2 = this._keyStr.indexOf(input.charAt(input.length-2));\t\t \n\t\n\t\tvar bytes = (input.length / 4) * 3;\n\n\t    // The input is not always the same number, which divided by 4 does not always return an integer\n\t    // This doesn't seem to bother most platforms and it sounds perfectly fine to browsers and the iOS parser, \n\t\t// but somehow the Android parser expects integer number and throws an exception that it cannot parse the input.\n\t\tbytes = parseInt(bytes);\n\n\t\tif (lkey1 == 64) bytes--; //padding chars, so skip\n\t\tif (lkey2 == 64) bytes--; //padding chars, so skip\n\t\t\n\t\tvar uarray;\n\t\tvar chr1, chr2, chr3;\n\t\tvar enc1, enc2, enc3, enc4;\n\t\tvar i = 0;\n\t\tvar j = 0;\n\t\t\n\t\tif (arrayBuffer)\n\t\t\tuarray = new Uint8Array(arrayBuffer);\n\t\telse\n\t\t\tuarray = new Uint8Array(bytes);\n\t\t\n\t\tinput = input.replace(/[^A-Za-z0-9\\+\\/\\=]/g, \"\");\n\t\t\n\t\tfor (i=0; i<bytes; i+=3) {\t\n\t\t\t//get the 3 octects in 4 ascii chars\n\t\t\tenc1 = this._keyStr.indexOf(input.charAt(j++));\n\t\t\tenc2 = this._keyStr.indexOf(input.charAt(j++));\n\t\t\tenc3 = this._keyStr.indexOf(input.charAt(j++));\n\t\t\tenc4 = this._keyStr.indexOf(input.charAt(j++));\n\t\n\t\t\tchr1 = (enc1 << 2) | (enc2 >> 4);\n\t\t\tchr2 = ((enc2 & 15) << 4) | (enc3 >> 2);\n\t\t\tchr3 = ((enc3 & 3) << 6) | enc4;\n\t\n\t\t\tuarray[i] = chr1;\t\t\t\n\t\t\tif (enc3 != 64) uarray[i+1] = chr2;\n\t\t\tif (enc4 != 64) uarray[i+2] = chr3;\n\t\t}\n\t\n\t\treturn uarray;\t\n\t},\n\n\t// private method for UTF-8 encoding\n\t_utf8_encode : function (string) {\n\t\tstring = string.replace(/\\r\\n/g,\"\\n\");\n\t\tvar utftext = \"\";\n\n\t\tfor (var n = 0; n < string.length; n++) {\n\n\t\t\tvar c = string.charCodeAt(n);\n\n\t\t\tif (c < 128) {\n\t\t\t\tutftext += String.fromCharCode(c);\n\t\t\t}\n\t\t\telse if((c > 127) && (c < 2048)) {\n\t\t\t\tutftext += String.fromCharCode((c >> 6) | 192);\n\t\t\t\tutftext += String.fromCharCode((c & 63) | 128);\n\t\t\t}\n\t\t\telse {\n\t\t\t\tutftext += String.fromCharCode((c >> 12) | 224);\n\t\t\t\tutftext += String.fromCharCode(((c >> 6) & 63) | 128);\n\t\t\t\tutftext += String.fromCharCode((c & 63) | 128);\n\t\t\t}\n\n\t\t}\n\n\t\treturn utftext;\n\t},\n\n\t// private method for UTF-8 decoding\n\t_utf8_decode : function (utftext) {\n\t\tvar string = \"\";\n\t\tvar i = 0;\n\t\tvar c = c1 = c2 = 0;\n\n\t\twhile ( i < utftext.length ) {\n\n\t\t\tc = utftext.charCodeAt(i);\n\n\t\t\tif (c < 128) {\n\t\t\t\tstring += String.fromCharCode(c);\n\t\t\t\ti++;\n\t\t\t}\n\t\t\telse if((c > 191) && (c < 224)) {\n\t\t\t\tc2 = utftext.charCodeAt(i+1);\n\t\t\t\tstring += String.fromCharCode(((c & 31) << 6) | (c2 & 63));\n\t\t\t\ti += 2;\n\t\t\t}\n\t\t\telse {\n\t\t\t\tc2 = utftext.charCodeAt(i+1);\n\t\t\t\tc3 = utftext.charCodeAt(i+2);\n\t\t\t\tstring += String.fromCharCode(((c & 15) << 12) | ((c2 & 63) << 6) | (c3 & 63));\n\t\t\t\ti += 3;\n\t\t\t}\n\n\t\t}\n\n\t\treturn string;\n\t}\n\n};\n","/*\nCryptoJS v3.1\ncode.google.com/p/crypto-js\n(c) 2009-2013 by Jeff Mott. All rights reserved.\ncode.google.com/p/crypto-js/wiki/License\n*/\nvar CryptoJS=CryptoJS||function(u,p){var d={},l=d.lib={},s=function(){},t=l.Base={extend:function(a){s.prototype=this;var c=new s;a&&c.mixIn(a);c.hasOwnProperty(\"init\")||(c.init=function(){c.$super.init.apply(this,arguments)});c.init.prototype=c;c.$super=this;return c},create:function(){var a=this.extend();a.init.apply(a,arguments);return a},init:function(){},mixIn:function(a){for(var c in a)a.hasOwnProperty(c)&&(this[c]=a[c]);a.hasOwnProperty(\"toString\")&&(this.toString=a.toString)},clone:function(){return this.init.prototype.extend(this)}},\nr=l.WordArray=t.extend({init:function(a,c){a=this.words=a||[];this.sigBytes=c!=p?c:4*a.length},toString:function(a){return(a||v).stringify(this)},concat:function(a){var c=this.words,e=a.words,j=this.sigBytes;a=a.sigBytes;this.clamp();if(j%4)for(var k=0;k<a;k++)c[j+k>>>2]|=(e[k>>>2]>>>24-8*(k%4)&255)<<24-8*((j+k)%4);else if(65535<e.length)for(k=0;k<a;k+=4)c[j+k>>>2]=e[k>>>2];else c.push.apply(c,e);this.sigBytes+=a;return this},clamp:function(){var a=this.words,c=this.sigBytes;a[c>>>2]&=4294967295<<\n32-8*(c%4);a.length=u.ceil(c/4)},clone:function(){var a=t.clone.call(this);a.words=this.words.slice(0);return a},random:function(a){for(var c=[],e=0;e<a;e+=4)c.push(4294967296*u.random()|0);return new r.init(c,a)}}),w=d.enc={},v=w.Hex={stringify:function(a){var c=a.words;a=a.sigBytes;for(var e=[],j=0;j<a;j++){var k=c[j>>>2]>>>24-8*(j%4)&255;e.push((k>>>4).toString(16));e.push((k&15).toString(16))}return e.join(\"\")},parse:function(a){for(var c=a.length,e=[],j=0;j<c;j+=2)e[j>>>3]|=parseInt(a.substr(j,\n2),16)<<24-4*(j%8);return new r.init(e,c/2)}},b=w.Latin1={stringify:function(a){var c=a.words;a=a.sigBytes;for(var e=[],j=0;j<a;j++)e.push(String.fromCharCode(c[j>>>2]>>>24-8*(j%4)&255));return e.join(\"\")},parse:function(a){for(var c=a.length,e=[],j=0;j<c;j++)e[j>>>2]|=(a.charCodeAt(j)&255)<<24-8*(j%4);return new r.init(e,c)}},x=w.Utf8={stringify:function(a){try{return decodeURIComponent(escape(b.stringify(a)))}catch(c){throw Error(\"Malformed UTF-8 data\");}},parse:function(a){return b.parse(unescape(encodeURIComponent(a)))}},\nq=l.BufferedBlockAlgorithm=t.extend({reset:function(){this._data=new r.init;this._nDataBytes=0},_append:function(a){\"string\"==typeof a&&(a=x.parse(a));this._data.concat(a);this._nDataBytes+=a.sigBytes},_process:function(a){var c=this._data,e=c.words,j=c.sigBytes,k=this.blockSize,b=j/(4*k),b=a?u.ceil(b):u.max((b|0)-this._minBufferSize,0);a=b*k;j=u.min(4*a,j);if(a){for(var q=0;q<a;q+=k)this._doProcessBlock(e,q);q=e.splice(0,a);c.sigBytes-=j}return new r.init(q,j)},clone:function(){var a=t.clone.call(this);\na._data=this._data.clone();return a},_minBufferSize:0});l.Hasher=q.extend({cfg:t.extend(),init:function(a){this.cfg=this.cfg.extend(a);this.reset()},reset:function(){q.reset.call(this);this._doReset()},update:function(a){this._append(a);this._process();return this},finalize:function(a){a&&this._append(a);return this._doFinalize()},blockSize:16,_createHelper:function(a){return function(b,e){return(new a.init(e)).finalize(b)}},_createHmacHelper:function(a){return function(b,e){return(new n.HMAC.init(a,\ne)).finalize(b)}}});var n=d.algo={};return d}(Math);\n(function(){var u=CryptoJS,p=u.lib.WordArray;u.enc.Base64={stringify:function(d){var l=d.words,p=d.sigBytes,t=this._map;d.clamp();d=[];for(var r=0;r<p;r+=3)for(var w=(l[r>>>2]>>>24-8*(r%4)&255)<<16|(l[r+1>>>2]>>>24-8*((r+1)%4)&255)<<8|l[r+2>>>2]>>>24-8*((r+2)%4)&255,v=0;4>v&&r+0.75*v<p;v++)d.push(t.charAt(w>>>6*(3-v)&63));if(l=t.charAt(64))for(;d.length%4;)d.push(l);return d.join(\"\")},parse:function(d){var l=d.length,s=this._map,t=s.charAt(64);t&&(t=d.indexOf(t),-1!=t&&(l=t));for(var t=[],r=0,w=0;w<\nl;w++)if(w%4){var v=s.indexOf(d.charAt(w-1))<<2*(w%4),b=s.indexOf(d.charAt(w))>>>6-2*(w%4);t[r>>>2]|=(v|b)<<24-8*(r%4);r++}return p.create(t,r)},_map:\"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\"}})();\n(function(u){function p(b,n,a,c,e,j,k){b=b+(n&a|~n&c)+e+k;return(b<<j|b>>>32-j)+n}function d(b,n,a,c,e,j,k){b=b+(n&c|a&~c)+e+k;return(b<<j|b>>>32-j)+n}function l(b,n,a,c,e,j,k){b=b+(n^a^c)+e+k;return(b<<j|b>>>32-j)+n}function s(b,n,a,c,e,j,k){b=b+(a^(n|~c))+e+k;return(b<<j|b>>>32-j)+n}for(var t=CryptoJS,r=t.lib,w=r.WordArray,v=r.Hasher,r=t.algo,b=[],x=0;64>x;x++)b[x]=4294967296*u.abs(u.sin(x+1))|0;r=r.MD5=v.extend({_doReset:function(){this._hash=new w.init([1732584193,4023233417,2562383102,271733878])},\n_doProcessBlock:function(q,n){for(var a=0;16>a;a++){var c=n+a,e=q[c];q[c]=(e<<8|e>>>24)&16711935|(e<<24|e>>>8)&4278255360}var a=this._hash.words,c=q[n+0],e=q[n+1],j=q[n+2],k=q[n+3],z=q[n+4],r=q[n+5],t=q[n+6],w=q[n+7],v=q[n+8],A=q[n+9],B=q[n+10],C=q[n+11],u=q[n+12],D=q[n+13],E=q[n+14],x=q[n+15],f=a[0],m=a[1],g=a[2],h=a[3],f=p(f,m,g,h,c,7,b[0]),h=p(h,f,m,g,e,12,b[1]),g=p(g,h,f,m,j,17,b[2]),m=p(m,g,h,f,k,22,b[3]),f=p(f,m,g,h,z,7,b[4]),h=p(h,f,m,g,r,12,b[5]),g=p(g,h,f,m,t,17,b[6]),m=p(m,g,h,f,w,22,b[7]),\nf=p(f,m,g,h,v,7,b[8]),h=p(h,f,m,g,A,12,b[9]),g=p(g,h,f,m,B,17,b[10]),m=p(m,g,h,f,C,22,b[11]),f=p(f,m,g,h,u,7,b[12]),h=p(h,f,m,g,D,12,b[13]),g=p(g,h,f,m,E,17,b[14]),m=p(m,g,h,f,x,22,b[15]),f=d(f,m,g,h,e,5,b[16]),h=d(h,f,m,g,t,9,b[17]),g=d(g,h,f,m,C,14,b[18]),m=d(m,g,h,f,c,20,b[19]),f=d(f,m,g,h,r,5,b[20]),h=d(h,f,m,g,B,9,b[21]),g=d(g,h,f,m,x,14,b[22]),m=d(m,g,h,f,z,20,b[23]),f=d(f,m,g,h,A,5,b[24]),h=d(h,f,m,g,E,9,b[25]),g=d(g,h,f,m,k,14,b[26]),m=d(m,g,h,f,v,20,b[27]),f=d(f,m,g,h,D,5,b[28]),h=d(h,f,\nm,g,j,9,b[29]),g=d(g,h,f,m,w,14,b[30]),m=d(m,g,h,f,u,20,b[31]),f=l(f,m,g,h,r,4,b[32]),h=l(h,f,m,g,v,11,b[33]),g=l(g,h,f,m,C,16,b[34]),m=l(m,g,h,f,E,23,b[35]),f=l(f,m,g,h,e,4,b[36]),h=l(h,f,m,g,z,11,b[37]),g=l(g,h,f,m,w,16,b[38]),m=l(m,g,h,f,B,23,b[39]),f=l(f,m,g,h,D,4,b[40]),h=l(h,f,m,g,c,11,b[41]),g=l(g,h,f,m,k,16,b[42]),m=l(m,g,h,f,t,23,b[43]),f=l(f,m,g,h,A,4,b[44]),h=l(h,f,m,g,u,11,b[45]),g=l(g,h,f,m,x,16,b[46]),m=l(m,g,h,f,j,23,b[47]),f=s(f,m,g,h,c,6,b[48]),h=s(h,f,m,g,w,10,b[49]),g=s(g,h,f,m,\nE,15,b[50]),m=s(m,g,h,f,r,21,b[51]),f=s(f,m,g,h,u,6,b[52]),h=s(h,f,m,g,k,10,b[53]),g=s(g,h,f,m,B,15,b[54]),m=s(m,g,h,f,e,21,b[55]),f=s(f,m,g,h,v,6,b[56]),h=s(h,f,m,g,x,10,b[57]),g=s(g,h,f,m,t,15,b[58]),m=s(m,g,h,f,D,21,b[59]),f=s(f,m,g,h,z,6,b[60]),h=s(h,f,m,g,C,10,b[61]),g=s(g,h,f,m,j,15,b[62]),m=s(m,g,h,f,A,21,b[63]);a[0]=a[0]+f|0;a[1]=a[1]+m|0;a[2]=a[2]+g|0;a[3]=a[3]+h|0},_doFinalize:function(){var b=this._data,n=b.words,a=8*this._nDataBytes,c=8*b.sigBytes;n[c>>>5]|=128<<24-c%32;var e=u.floor(a/\n4294967296);n[(c+64>>>9<<4)+15]=(e<<8|e>>>24)&16711935|(e<<24|e>>>8)&4278255360;n[(c+64>>>9<<4)+14]=(a<<8|a>>>24)&16711935|(a<<24|a>>>8)&4278255360;b.sigBytes=4*(n.length+1);this._process();b=this._hash;n=b.words;for(a=0;4>a;a++)c=n[a],n[a]=(c<<8|c>>>24)&16711935|(c<<24|c>>>8)&4278255360;return b},clone:function(){var b=v.clone.call(this);b._hash=this._hash.clone();return b}});t.MD5=v._createHelper(r);t.HmacMD5=v._createHmacHelper(r)})(Math);\n(function(){var u=CryptoJS,p=u.lib,d=p.Base,l=p.WordArray,p=u.algo,s=p.EvpKDF=d.extend({cfg:d.extend({keySize:4,hasher:p.MD5,iterations:1}),init:function(d){this.cfg=this.cfg.extend(d)},compute:function(d,r){for(var p=this.cfg,s=p.hasher.create(),b=l.create(),u=b.words,q=p.keySize,p=p.iterations;u.length<q;){n&&s.update(n);var n=s.update(d).finalize(r);s.reset();for(var a=1;a<p;a++)n=s.finalize(n),s.reset();b.concat(n)}b.sigBytes=4*q;return b}});u.EvpKDF=function(d,l,p){return s.create(p).compute(d,\nl)}})();\nCryptoJS.lib.Cipher||function(u){var p=CryptoJS,d=p.lib,l=d.Base,s=d.WordArray,t=d.BufferedBlockAlgorithm,r=p.enc.Base64,w=p.algo.EvpKDF,v=d.Cipher=t.extend({cfg:l.extend(),createEncryptor:function(e,a){return this.create(this._ENC_XFORM_MODE,e,a)},createDecryptor:function(e,a){return this.create(this._DEC_XFORM_MODE,e,a)},init:function(e,a,b){this.cfg=this.cfg.extend(b);this._xformMode=e;this._key=a;this.reset()},reset:function(){t.reset.call(this);this._doReset()},process:function(e){this._append(e);return this._process()},\nfinalize:function(e){e&&this._append(e);return this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(e){return{encrypt:function(b,k,d){return(\"string\"==typeof k?c:a).encrypt(e,b,k,d)},decrypt:function(b,k,d){return(\"string\"==typeof k?c:a).decrypt(e,b,k,d)}}}});d.StreamCipher=v.extend({_doFinalize:function(){return this._process(!0)},blockSize:1});var b=p.mode={},x=function(e,a,b){var c=this._iv;c?this._iv=u:c=this._prevBlock;for(var d=0;d<b;d++)e[a+d]^=\nc[d]},q=(d.BlockCipherMode=l.extend({createEncryptor:function(e,a){return this.Encryptor.create(e,a)},createDecryptor:function(e,a){return this.Decryptor.create(e,a)},init:function(e,a){this._cipher=e;this._iv=a}})).extend();q.Encryptor=q.extend({processBlock:function(e,a){var b=this._cipher,c=b.blockSize;x.call(this,e,a,c);b.encryptBlock(e,a);this._prevBlock=e.slice(a,a+c)}});q.Decryptor=q.extend({processBlock:function(e,a){var b=this._cipher,c=b.blockSize,d=e.slice(a,a+c);b.decryptBlock(e,a);x.call(this,\ne,a,c);this._prevBlock=d}});b=b.CBC=q;q=(p.pad={}).Pkcs7={pad:function(a,b){for(var c=4*b,c=c-a.sigBytes%c,d=c<<24|c<<16|c<<8|c,l=[],n=0;n<c;n+=4)l.push(d);c=s.create(l,c);a.concat(c)},unpad:function(a){a.sigBytes-=a.words[a.sigBytes-1>>>2]&255}};d.BlockCipher=v.extend({cfg:v.cfg.extend({mode:b,padding:q}),reset:function(){v.reset.call(this);var a=this.cfg,b=a.iv,a=a.mode;if(this._xformMode==this._ENC_XFORM_MODE)var c=a.createEncryptor;else c=a.createDecryptor,this._minBufferSize=1;this._mode=c.call(a,\nthis,b&&b.words)},_doProcessBlock:function(a,b){this._mode.processBlock(a,b)},_doFinalize:function(){var a=this.cfg.padding;if(this._xformMode==this._ENC_XFORM_MODE){a.pad(this._data,this.blockSize);var b=this._process(!0)}else b=this._process(!0),a.unpad(b);return b},blockSize:4});var n=d.CipherParams=l.extend({init:function(a){this.mixIn(a)},toString:function(a){return(a||this.formatter).stringify(this)}}),b=(p.format={}).OpenSSL={stringify:function(a){var b=a.ciphertext;a=a.salt;return(a?s.create([1398893684,\n1701076831]).concat(a).concat(b):b).toString(r)},parse:function(a){a=r.parse(a);var b=a.words;if(1398893684==b[0]&&1701076831==b[1]){var c=s.create(b.slice(2,4));b.splice(0,4);a.sigBytes-=16}return n.create({ciphertext:a,salt:c})}},a=d.SerializableCipher=l.extend({cfg:l.extend({format:b}),encrypt:function(a,b,c,d){d=this.cfg.extend(d);var l=a.createEncryptor(c,d);b=l.finalize(b);l=l.cfg;return n.create({ciphertext:b,key:c,iv:l.iv,algorithm:a,mode:l.mode,padding:l.padding,blockSize:a.blockSize,formatter:d.format})},\ndecrypt:function(a,b,c,d){d=this.cfg.extend(d);b=this._parse(b,d.format);return a.createDecryptor(c,d).finalize(b.ciphertext)},_parse:function(a,b){return\"string\"==typeof a?b.parse(a,this):a}}),p=(p.kdf={}).OpenSSL={execute:function(a,b,c,d){d||(d=s.random(8));a=w.create({keySize:b+c}).compute(a,d);c=s.create(a.words.slice(b),4*c);a.sigBytes=4*b;return n.create({key:a,iv:c,salt:d})}},c=d.PasswordBasedCipher=a.extend({cfg:a.cfg.extend({kdf:p}),encrypt:function(b,c,d,l){l=this.cfg.extend(l);d=l.kdf.execute(d,\nb.keySize,b.ivSize);l.iv=d.iv;b=a.encrypt.call(this,b,c,d.key,l);b.mixIn(d);return b},decrypt:function(b,c,d,l){l=this.cfg.extend(l);c=this._parse(c,l.format);d=l.kdf.execute(d,b.keySize,b.ivSize,c.salt);l.iv=d.iv;return a.decrypt.call(this,b,c,d.key,l)}})}();\n(function(){for(var u=CryptoJS,p=u.lib.BlockCipher,d=u.algo,l=[],s=[],t=[],r=[],w=[],v=[],b=[],x=[],q=[],n=[],a=[],c=0;256>c;c++)a[c]=128>c?c<<1:c<<1^283;for(var e=0,j=0,c=0;256>c;c++){var k=j^j<<1^j<<2^j<<3^j<<4,k=k>>>8^k&255^99;l[e]=k;s[k]=e;var z=a[e],F=a[z],G=a[F],y=257*a[k]^16843008*k;t[e]=y<<24|y>>>8;r[e]=y<<16|y>>>16;w[e]=y<<8|y>>>24;v[e]=y;y=16843009*G^65537*F^257*z^16843008*e;b[k]=y<<24|y>>>8;x[k]=y<<16|y>>>16;q[k]=y<<8|y>>>24;n[k]=y;e?(e=z^a[a[a[G^z]]],j^=a[a[j]]):e=j=1}var H=[0,1,2,4,8,\n16,32,64,128,27,54],d=d.AES=p.extend({_doReset:function(){for(var a=this._key,c=a.words,d=a.sigBytes/4,a=4*((this._nRounds=d+6)+1),e=this._keySchedule=[],j=0;j<a;j++)if(j<d)e[j]=c[j];else{var k=e[j-1];j%d?6<d&&4==j%d&&(k=l[k>>>24]<<24|l[k>>>16&255]<<16|l[k>>>8&255]<<8|l[k&255]):(k=k<<8|k>>>24,k=l[k>>>24]<<24|l[k>>>16&255]<<16|l[k>>>8&255]<<8|l[k&255],k^=H[j/d|0]<<24);e[j]=e[j-d]^k}c=this._invKeySchedule=[];for(d=0;d<a;d++)j=a-d,k=d%4?e[j]:e[j-4],c[d]=4>d||4>=j?k:b[l[k>>>24]]^x[l[k>>>16&255]]^q[l[k>>>\n8&255]]^n[l[k&255]]},encryptBlock:function(a,b){this._doCryptBlock(a,b,this._keySchedule,t,r,w,v,l)},decryptBlock:function(a,c){var d=a[c+1];a[c+1]=a[c+3];a[c+3]=d;this._doCryptBlock(a,c,this._invKeySchedule,b,x,q,n,s);d=a[c+1];a[c+1]=a[c+3];a[c+3]=d},_doCryptBlock:function(a,b,c,d,e,j,l,f){for(var m=this._nRounds,g=a[b]^c[0],h=a[b+1]^c[1],k=a[b+2]^c[2],n=a[b+3]^c[3],p=4,r=1;r<m;r++)var q=d[g>>>24]^e[h>>>16&255]^j[k>>>8&255]^l[n&255]^c[p++],s=d[h>>>24]^e[k>>>16&255]^j[n>>>8&255]^l[g&255]^c[p++],t=\nd[k>>>24]^e[n>>>16&255]^j[g>>>8&255]^l[h&255]^c[p++],n=d[n>>>24]^e[g>>>16&255]^j[h>>>8&255]^l[k&255]^c[p++],g=q,h=s,k=t;q=(f[g>>>24]<<24|f[h>>>16&255]<<16|f[k>>>8&255]<<8|f[n&255])^c[p++];s=(f[h>>>24]<<24|f[k>>>16&255]<<16|f[n>>>8&255]<<8|f[g&255])^c[p++];t=(f[k>>>24]<<24|f[n>>>16&255]<<16|f[g>>>8&255]<<8|f[h&255])^c[p++];n=(f[n>>>24]<<24|f[g>>>16&255]<<16|f[h>>>8&255]<<8|f[k&255])^c[p++];a[b]=q;a[b+1]=s;a[b+2]=t;a[b+3]=n},keySize:8});u.AES=p._createHelper(d)})();\n","/*\nCryptoJS v3.1.2\ncode.google.com/p/crypto-js\n(c) 2009-2013 by Jeff Mott. All rights reserved.\ncode.google.com/p/crypto-js/wiki/License\n*/\nvar CryptoJS=CryptoJS||function(h,s){var f={},t=f.lib={},g=function(){},j=t.Base={extend:function(a){g.prototype=this;var c=new g;a&&c.mixIn(a);c.hasOwnProperty(\"init\")||(c.init=function(){c.$super.init.apply(this,arguments)});c.init.prototype=c;c.$super=this;return c},create:function(){var a=this.extend();a.init.apply(a,arguments);return a},init:function(){},mixIn:function(a){for(var c in a)a.hasOwnProperty(c)&&(this[c]=a[c]);a.hasOwnProperty(\"toString\")&&(this.toString=a.toString)},clone:function(){return this.init.prototype.extend(this)}},\nq=t.WordArray=j.extend({init:function(a,c){a=this.words=a||[];this.sigBytes=c!=s?c:4*a.length},toString:function(a){return(a||u).stringify(this)},concat:function(a){var c=this.words,d=a.words,b=this.sigBytes;a=a.sigBytes;this.clamp();if(b%4)for(var e=0;e<a;e++)c[b+e>>>2]|=(d[e>>>2]>>>24-8*(e%4)&255)<<24-8*((b+e)%4);else if(65535<d.length)for(e=0;e<a;e+=4)c[b+e>>>2]=d[e>>>2];else c.push.apply(c,d);this.sigBytes+=a;return this},clamp:function(){var a=this.words,c=this.sigBytes;a[c>>>2]&=4294967295<<\n32-8*(c%4);a.length=h.ceil(c/4)},clone:function(){var a=j.clone.call(this);a.words=this.words.slice(0);return a},random:function(a){for(var c=[],d=0;d<a;d+=4)c.push(4294967296*h.random()|0);return new q.init(c,a)}}),v=f.enc={},u=v.Hex={stringify:function(a){var c=a.words;a=a.sigBytes;for(var d=[],b=0;b<a;b++){var e=c[b>>>2]>>>24-8*(b%4)&255;d.push((e>>>4).toString(16));d.push((e&15).toString(16))}return d.join(\"\")},parse:function(a){for(var c=a.length,d=[],b=0;b<c;b+=2)d[b>>>3]|=parseInt(a.substr(b,\n2),16)<<24-4*(b%8);return new q.init(d,c/2)}},k=v.Latin1={stringify:function(a){var c=a.words;a=a.sigBytes;for(var d=[],b=0;b<a;b++)d.push(String.fromCharCode(c[b>>>2]>>>24-8*(b%4)&255));return d.join(\"\")},parse:function(a){for(var c=a.length,d=[],b=0;b<c;b++)d[b>>>2]|=(a.charCodeAt(b)&255)<<24-8*(b%4);return new q.init(d,c)}},l=v.Utf8={stringify:function(a){try{return decodeURIComponent(escape(k.stringify(a)))}catch(c){throw Error(\"Malformed UTF-8 data\");}},parse:function(a){return k.parse(unescape(encodeURIComponent(a)))}},\nx=t.BufferedBlockAlgorithm=j.extend({reset:function(){this._data=new q.init;this._nDataBytes=0},_append:function(a){\"string\"==typeof a&&(a=l.parse(a));this._data.concat(a);this._nDataBytes+=a.sigBytes},_process:function(a){var c=this._data,d=c.words,b=c.sigBytes,e=this.blockSize,f=b/(4*e),f=a?h.ceil(f):h.max((f|0)-this._minBufferSize,0);a=f*e;b=h.min(4*a,b);if(a){for(var m=0;m<a;m+=e)this._doProcessBlock(d,m);m=d.splice(0,a);c.sigBytes-=b}return new q.init(m,b)},clone:function(){var a=j.clone.call(this);\na._data=this._data.clone();return a},_minBufferSize:0});t.Hasher=x.extend({cfg:j.extend(),init:function(a){this.cfg=this.cfg.extend(a);this.reset()},reset:function(){x.reset.call(this);this._doReset()},update:function(a){this._append(a);this._process();return this},finalize:function(a){a&&this._append(a);return this._doFinalize()},blockSize:16,_createHelper:function(a){return function(c,d){return(new a.init(d)).finalize(c)}},_createHmacHelper:function(a){return function(c,d){return(new w.HMAC.init(a,\nd)).finalize(c)}}});var w=f.algo={};return f}(Math);\n(function(h){for(var s=CryptoJS,f=s.lib,t=f.WordArray,g=f.Hasher,f=s.algo,j=[],q=[],v=function(a){return 4294967296*(a-(a|0))|0},u=2,k=0;64>k;){var l;a:{l=u;for(var x=h.sqrt(l),w=2;w<=x;w++)if(!(l%w)){l=!1;break a}l=!0}l&&(8>k&&(j[k]=v(h.pow(u,0.5))),q[k]=v(h.pow(u,1/3)),k++);u++}var a=[],f=f.SHA256=g.extend({_doReset:function(){this._hash=new t.init(j.slice(0))},_doProcessBlock:function(c,d){for(var b=this._hash.words,e=b[0],f=b[1],m=b[2],h=b[3],p=b[4],j=b[5],k=b[6],l=b[7],n=0;64>n;n++){if(16>n)a[n]=\nc[d+n]|0;else{var r=a[n-15],g=a[n-2];a[n]=((r<<25|r>>>7)^(r<<14|r>>>18)^r>>>3)+a[n-7]+((g<<15|g>>>17)^(g<<13|g>>>19)^g>>>10)+a[n-16]}r=l+((p<<26|p>>>6)^(p<<21|p>>>11)^(p<<7|p>>>25))+(p&j^~p&k)+q[n]+a[n];g=((e<<30|e>>>2)^(e<<19|e>>>13)^(e<<10|e>>>22))+(e&f^e&m^f&m);l=k;k=j;j=p;p=h+r|0;h=m;m=f;f=e;e=r+g|0}b[0]=b[0]+e|0;b[1]=b[1]+f|0;b[2]=b[2]+m|0;b[3]=b[3]+h|0;b[4]=b[4]+p|0;b[5]=b[5]+j|0;b[6]=b[6]+k|0;b[7]=b[7]+l|0},_doFinalize:function(){var a=this._data,d=a.words,b=8*this._nDataBytes,e=8*a.sigBytes;\nd[e>>>5]|=128<<24-e%32;d[(e+64>>>9<<4)+14]=h.floor(b/4294967296);d[(e+64>>>9<<4)+15]=b;a.sigBytes=4*d.length;this._process();return this._hash},clone:function(){var a=g.clone.call(this);a._hash=this._hash.clone();return a}});s.SHA256=g._createHelper(f);s.HmacSHA256=g._createHmacHelper(f)})(Math);\n","/*\nCryptoJS v3.1.2\ncode.google.com/p/crypto-js\n(c) 2009-2013 by Jeff Mott. All rights reserved.\ncode.google.com/p/crypto-js/wiki/License\n*/\nvar CryptoJS=CryptoJS||function(a,m){var r={},f=r.lib={},g=function(){},l=f.Base={extend:function(a){g.prototype=this;var b=new g;a&&b.mixIn(a);b.hasOwnProperty(\"init\")||(b.init=function(){b.$super.init.apply(this,arguments)});b.init.prototype=b;b.$super=this;return b},create:function(){var a=this.extend();a.init.apply(a,arguments);return a},init:function(){},mixIn:function(a){for(var b in a)a.hasOwnProperty(b)&&(this[b]=a[b]);a.hasOwnProperty(\"toString\")&&(this.toString=a.toString)},clone:function(){return this.init.prototype.extend(this)}},\np=f.WordArray=l.extend({init:function(a,b){a=this.words=a||[];this.sigBytes=b!=m?b:4*a.length},toString:function(a){return(a||q).stringify(this)},concat:function(a){var b=this.words,d=a.words,c=this.sigBytes;a=a.sigBytes;this.clamp();if(c%4)for(var j=0;j<a;j++)b[c+j>>>2]|=(d[j>>>2]>>>24-8*(j%4)&255)<<24-8*((c+j)%4);else if(65535<d.length)for(j=0;j<a;j+=4)b[c+j>>>2]=d[j>>>2];else b.push.apply(b,d);this.sigBytes+=a;return this},clamp:function(){var n=this.words,b=this.sigBytes;n[b>>>2]&=4294967295<<\n32-8*(b%4);n.length=a.ceil(b/4)},clone:function(){var a=l.clone.call(this);a.words=this.words.slice(0);return a},random:function(n){for(var b=[],d=0;d<n;d+=4)b.push(4294967296*a.random()|0);return new p.init(b,n)}}),y=r.enc={},q=y.Hex={stringify:function(a){var b=a.words;a=a.sigBytes;for(var d=[],c=0;c<a;c++){var j=b[c>>>2]>>>24-8*(c%4)&255;d.push((j>>>4).toString(16));d.push((j&15).toString(16))}return d.join(\"\")},parse:function(a){for(var b=a.length,d=[],c=0;c<b;c+=2)d[c>>>3]|=parseInt(a.substr(c,\n2),16)<<24-4*(c%8);return new p.init(d,b/2)}},G=y.Latin1={stringify:function(a){var b=a.words;a=a.sigBytes;for(var d=[],c=0;c<a;c++)d.push(String.fromCharCode(b[c>>>2]>>>24-8*(c%4)&255));return d.join(\"\")},parse:function(a){for(var b=a.length,d=[],c=0;c<b;c++)d[c>>>2]|=(a.charCodeAt(c)&255)<<24-8*(c%4);return new p.init(d,b)}},fa=y.Utf8={stringify:function(a){try{return decodeURIComponent(escape(G.stringify(a)))}catch(b){throw Error(\"Malformed UTF-8 data\");}},parse:function(a){return G.parse(unescape(encodeURIComponent(a)))}},\nh=f.BufferedBlockAlgorithm=l.extend({reset:function(){this._data=new p.init;this._nDataBytes=0},_append:function(a){\"string\"==typeof a&&(a=fa.parse(a));this._data.concat(a);this._nDataBytes+=a.sigBytes},_process:function(n){var b=this._data,d=b.words,c=b.sigBytes,j=this.blockSize,l=c/(4*j),l=n?a.ceil(l):a.max((l|0)-this._minBufferSize,0);n=l*j;c=a.min(4*n,c);if(n){for(var h=0;h<n;h+=j)this._doProcessBlock(d,h);h=d.splice(0,n);b.sigBytes-=c}return new p.init(h,c)},clone:function(){var a=l.clone.call(this);\na._data=this._data.clone();return a},_minBufferSize:0});f.Hasher=h.extend({cfg:l.extend(),init:function(a){this.cfg=this.cfg.extend(a);this.reset()},reset:function(){h.reset.call(this);this._doReset()},update:function(a){this._append(a);this._process();return this},finalize:function(a){a&&this._append(a);return this._doFinalize()},blockSize:16,_createHelper:function(a){return function(b,d){return(new a.init(d)).finalize(b)}},_createHmacHelper:function(a){return function(b,d){return(new ga.HMAC.init(a,\nd)).finalize(b)}}});var ga=r.algo={};return r}(Math);\n(function(a){var m=CryptoJS,r=m.lib,f=r.Base,g=r.WordArray,m=m.x64={};m.Word=f.extend({init:function(a,p){this.high=a;this.low=p}});m.WordArray=f.extend({init:function(l,p){l=this.words=l||[];this.sigBytes=p!=a?p:8*l.length},toX32:function(){for(var a=this.words,p=a.length,f=[],q=0;q<p;q++){var G=a[q];f.push(G.high);f.push(G.low)}return g.create(f,this.sigBytes)},clone:function(){for(var a=f.clone.call(this),p=a.words=this.words.slice(0),g=p.length,q=0;q<g;q++)p[q]=p[q].clone();return a}})})();\n(function(){function a(){return g.create.apply(g,arguments)}for(var m=CryptoJS,r=m.lib.Hasher,f=m.x64,g=f.Word,l=f.WordArray,f=m.algo,p=[a(1116352408,3609767458),a(1899447441,602891725),a(3049323471,3964484399),a(3921009573,2173295548),a(961987163,4081628472),a(1508970993,3053834265),a(2453635748,2937671579),a(2870763221,3664609560),a(3624381080,2734883394),a(310598401,1164996542),a(607225278,1323610764),a(1426881987,3590304994),a(1925078388,4068182383),a(2162078206,991336113),a(2614888103,633803317),\na(3248222580,3479774868),a(3835390401,2666613458),a(4022224774,944711139),a(264347078,2341262773),a(604807628,2007800933),a(770255983,1495990901),a(1249150122,1856431235),a(1555081692,3175218132),a(1996064986,2198950837),a(2554220882,3999719339),a(2821834349,766784016),a(2952996808,2566594879),a(3210313671,3203337956),a(3336571891,1034457026),a(3584528711,2466948901),a(113926993,3758326383),a(338241895,168717936),a(666307205,1188179964),a(773529912,1546045734),a(1294757372,1522805485),a(1396182291,\n2643833823),a(1695183700,2343527390),a(1986661051,1014477480),a(2177026350,1206759142),a(2456956037,344077627),a(2730485921,1290863460),a(2820302411,3158454273),a(3259730800,3505952657),a(3345764771,106217008),a(3516065817,3606008344),a(3600352804,1432725776),a(4094571909,1467031594),a(275423344,851169720),a(430227734,3100823752),a(506948616,1363258195),a(659060556,3750685593),a(883997877,3785050280),a(958139571,3318307427),a(1322822218,3812723403),a(1537002063,2003034995),a(1747873779,3602036899),\na(1955562222,1575990012),a(2024104815,1125592928),a(2227730452,2716904306),a(2361852424,442776044),a(2428436474,593698344),a(2756734187,3733110249),a(3204031479,2999351573),a(3329325298,3815920427),a(3391569614,3928383900),a(3515267271,566280711),a(3940187606,3454069534),a(4118630271,4000239992),a(116418474,1914138554),a(174292421,2731055270),a(289380356,3203993006),a(460393269,320620315),a(685471733,587496836),a(852142971,1086792851),a(1017036298,365543100),a(1126000580,2618297676),a(1288033470,\n3409855158),a(1501505948,4234509866),a(1607167915,987167468),a(1816402316,1246189591)],y=[],q=0;80>q;q++)y[q]=a();f=f.SHA512=r.extend({_doReset:function(){this._hash=new l.init([new g.init(1779033703,4089235720),new g.init(3144134277,2227873595),new g.init(1013904242,4271175723),new g.init(2773480762,1595750129),new g.init(1359893119,2917565137),new g.init(2600822924,725511199),new g.init(528734635,4215389547),new g.init(1541459225,327033209)])},_doProcessBlock:function(a,f){for(var h=this._hash.words,\ng=h[0],n=h[1],b=h[2],d=h[3],c=h[4],j=h[5],l=h[6],h=h[7],q=g.high,m=g.low,r=n.high,N=n.low,Z=b.high,O=b.low,$=d.high,P=d.low,aa=c.high,Q=c.low,ba=j.high,R=j.low,ca=l.high,S=l.low,da=h.high,T=h.low,v=q,s=m,H=r,E=N,I=Z,F=O,W=$,J=P,w=aa,t=Q,U=ba,K=R,V=ca,L=S,X=da,M=T,x=0;80>x;x++){var B=y[x];if(16>x)var u=B.high=a[f+2*x]|0,e=B.low=a[f+2*x+1]|0;else{var u=y[x-15],e=u.high,z=u.low,u=(e>>>1|z<<31)^(e>>>8|z<<24)^e>>>7,z=(z>>>1|e<<31)^(z>>>8|e<<24)^(z>>>7|e<<25),D=y[x-2],e=D.high,k=D.low,D=(e>>>19|k<<13)^\n(e<<3|k>>>29)^e>>>6,k=(k>>>19|e<<13)^(k<<3|e>>>29)^(k>>>6|e<<26),e=y[x-7],Y=e.high,C=y[x-16],A=C.high,C=C.low,e=z+e.low,u=u+Y+(e>>>0<z>>>0?1:0),e=e+k,u=u+D+(e>>>0<k>>>0?1:0),e=e+C,u=u+A+(e>>>0<C>>>0?1:0);B.high=u;B.low=e}var Y=w&U^~w&V,C=t&K^~t&L,B=v&H^v&I^H&I,ha=s&E^s&F^E&F,z=(v>>>28|s<<4)^(v<<30|s>>>2)^(v<<25|s>>>7),D=(s>>>28|v<<4)^(s<<30|v>>>2)^(s<<25|v>>>7),k=p[x],ia=k.high,ea=k.low,k=M+((t>>>14|w<<18)^(t>>>18|w<<14)^(t<<23|w>>>9)),A=X+((w>>>14|t<<18)^(w>>>18|t<<14)^(w<<23|t>>>9))+(k>>>0<M>>>\n0?1:0),k=k+C,A=A+Y+(k>>>0<C>>>0?1:0),k=k+ea,A=A+ia+(k>>>0<ea>>>0?1:0),k=k+e,A=A+u+(k>>>0<e>>>0?1:0),e=D+ha,B=z+B+(e>>>0<D>>>0?1:0),X=V,M=L,V=U,L=K,U=w,K=t,t=J+k|0,w=W+A+(t>>>0<J>>>0?1:0)|0,W=I,J=F,I=H,F=E,H=v,E=s,s=k+e|0,v=A+B+(s>>>0<k>>>0?1:0)|0}m=g.low=m+s;g.high=q+v+(m>>>0<s>>>0?1:0);N=n.low=N+E;n.high=r+H+(N>>>0<E>>>0?1:0);O=b.low=O+F;b.high=Z+I+(O>>>0<F>>>0?1:0);P=d.low=P+J;d.high=$+W+(P>>>0<J>>>0?1:0);Q=c.low=Q+t;c.high=aa+w+(Q>>>0<t>>>0?1:0);R=j.low=R+K;j.high=ba+U+(R>>>0<K>>>0?1:0);S=l.low=\nS+L;l.high=ca+V+(S>>>0<L>>>0?1:0);T=h.low=T+M;h.high=da+X+(T>>>0<M>>>0?1:0)},_doFinalize:function(){var a=this._data,f=a.words,h=8*this._nDataBytes,g=8*a.sigBytes;f[g>>>5]|=128<<24-g%32;f[(g+128>>>10<<5)+30]=Math.floor(h/4294967296);f[(g+128>>>10<<5)+31]=h;a.sigBytes=4*f.length;this._process();return this._hash.toX32()},clone:function(){var a=r.clone.call(this);a._hash=this._hash.clone();return a},blockSize:32});m.SHA512=r._createHelper(f);m.HmacSHA512=r._createHmacHelper(f)})();\n","/**\n * Encrypt/Decrtpt a string based on the user share key taken at login\n * \n * @author \t\ttvh\n */\nXPMobileSDK.library.SecureString = {\n\n\tsharedKey: null,\n\t\n\t/**\n\t * Creates an encrypted string using the Diffie-Hellmen shared key and random initialization vector\n\t * Both vector and encrypted string are concatenated using \":\".\n\t * First part is base64 encoded initialization vector and the second one is AES ancrypted string that use the initialization vector and shared key\n\t *\n\t * @param\t\t\tstring\t\tstring\t\t\tString to encrypt\n\t * @return\t\t\t\t\t\tstring\t\t\tEncrypted string\n\t */\n\tencrypt: function(string) {\n\t\tvar key = this.generateKey();\n\t\tvar iv = CryptoJS.lib.WordArray.random(16);\n\t\tvar params = { 'iv': iv };\n\t\tif (Settings.DefaultEncryptionPadding && CryptoJS.pad[Settings.DefaultEncryptionPadding]) {\r\n\t\t    params.padding = CryptoJS.pad[Settings.DefaultEncryptionPadding];\r\n\t\t}\n\t\tvar cip = CryptoJS.AES.encrypt(string, CryptoJS.SHA256(key), params);\n\t\treturn cip.iv.toString(CryptoJS.enc.Base64) + ':' + cip.ciphertext.toString(CryptoJS.enc.Base64);\n\t},\n\t\n\t/**\n\t * Decrypt a string which was encrypted byt the encrypt method\n\t *\n\t * @param\t\t\tstring\t\tstring\t\t\tBase64 string to decrypt\n\t * @return\t\t\t\t\t\tstring\t\t\tDecrypted string\n\t */\n\tdecrypt: function(string) {\n\t\tvar result = '';\n\t\tif(string.indexOf(':') > -1) {\n\t\t\n\t\t\tvar key = this.generateKey();\n\t\t\tvar data = string.split(':');\n\t\t\tvar iv = CryptoJS.enc.Base64.parse(data[0]);\n\t\t\tvar cip = CryptoJS.enc.Base64.parse(data[1]);\n\t\t\tvar params = { 'iv': iv };\n\t\t\tif (Settings.DefaultEncryptionPadding && CryptoJS.pad[Settings.DefaultEncryptionPadding]) {\r\n\t\t\t    params.padding = CryptoJS.pad[Settings.DefaultEncryptionPadding];\r\n\t\t\t}\n\t\t\tvar result = CryptoJS.AES.decrypt({ciphertext: cip}, CryptoJS.SHA256(key),params);\n\t\t\tresult = CryptoJS.enc.Utf8.stringify(result);\n\t\t}\n\t\treturn result;\n\t},\n\t\n\t/**\n\t * Generate a key based on the shared key used in Diffie-Hellman that will be used to AES ancrypt the string\n\t *\n\t * @return\t\t\tstring\t\t\tSHA256 encrypted string\n\t */\n\tgenerateKey: function() {\n\t\tvar sharedKey = '';\n\t\tif(!this.sharedKey) {\n\t\t    if (XPMobileSDK.library.Connection.dh) {\n\t\t\t    sharedKey = this.sharedKey = XPMobileSDK.library.Connection.dh.getSharedKey().toUpperCase();\n\t\t\t}\n\t\t    else if (XPMobileSDK.library.CHAP.sharedKey) {\n\t\t        sharedKey = this.sharedKey = XPMobileSDK.library.CHAP.sharedKey.toUpperCase();\n\t\t\t}\n\t\t}\n\t\telse {\n\t\t\tsharedKey = this.sharedKey;\n\t\t}\n\t\treturn sharedKey;\n\t}\n\t\n};","/**\n * Implement the CHAP security alorythm that will secure the connection(session) ID\n * \n *  This library requires SHA512 (http://code.google.com/p/crypto-js/#SHA-2)\n *\n * @see\t\t\thttp://en.wikipedia.org/wiki/Challenge-Handshake_Authentication_Protocol\n * \n * @author \t\ttvh\n */\n \nXPMobileSDK.library.CHAP = {\n\t/**\n\t * Stores a list of salts that will be used for hashing\n\t */\n\tchallenges: [],\n\t\n\t/**\n\t * Time interval constant in ms which defines how often the clallenges status will be checked\n\t */\n\tmonitorTime: 1000,\n\t\n\t/**\n\t * Diffie-Hellman shared key\n\t */\n\tsharedKey: '',\n\t\n\t/**\n\t * Minimum amount of challenges that needs to be kept in cache\n\t */\n\tminChallenges: 200,\n\n\t/**\n\t * Amount of challenges kept in the list betor the system halts. Set in the initialize method\n\t */\n\thaltThreshold: 0,\n\n\t/**\n\t * Flag defining if the system id haled for lack of challenges\n\t */\n\thalt: false,\n\n\t/**\n\t * Flag indicating that the component is waiting for challenges and not to request more until the data is received\n\t */\n\twaitingForData: false,\n\t\n\t/**\n\t * Constructor\n\t */\n\tinitialize: function () {\n\t\tthis.haltThreshold = this.minChallenges * 5 / 100,\n\t\tXPMobileSDK.library.Connection.addObserver(this);\n\t},\n\t\n\t/**\n\t * Start the checking mechanism of the challenges status\n\t */\n\tstart: function() {\n\t\tif(!this.challengeInterval) {\n\t\t\tthis.challengeInterval = setInterval(function () {\n\t\t\t\tXPMobileSDK.library.CHAP.monitor();\n\t\t\t}, this.monitorTime);\n\t\t}\n\t},\n\t\n\t/**\n\t * Check challenges\n\t */\n\tmonitor: function() {\n\t\t// Uncomment this line if sorting is required.\n\t\t// Currently it is made without sorting because the rule is first in last out from the array\n\t\t//this.challenges.sort(this.sort);\n\n\t\tif (!XPMobileSDK.library.Connection.connectionId) return;\n\t\tif (this.waitingForData) return;\n\t    \n\t\tif(this.challenges.length > 0) {\r\n\t\t    for(var i = 0; i < this.challenges.length; i++) {\r\n\t\t        if (!this.challenges[i].isValid()) {\r\n\t\t            this.challenges[i].destroy();\r\n\t\t            this.challenges.splice(i, 1);\r\n\t\t        }\r\n\t\t    }\r\n\t\t}\n\t\tif(this.challenges.length < this.minChallenges) {\n\t\t\tvar params = {NumChallenges: 100};\n\t\t\tif (this.challenges.length <= this.haltThreshold) {\n\t\t\t\tparams.Reset = 'Yes';\n\t\t\t}\n\t\t\tthis.waitingForData = true;\n\t\t\tXPMobileSDK.requestChallenges(params, () => {\n\t\t\t\tthis.waitingForData = false;\n\t\t\t});\n\t\t}\n\t},\n\t\n\t/**\n\t * Add new challenges\n\t *\n\t * @param\tchallenges\t\tarray\t\tList of challenges\n\t */\n\tadd: function (challenges) {\r\n\t    \n\t\tif(typeof challenges == 'string') {\n\t\t\tvar challenge = new XPMobileSDK.library.Challenge(challenges);\n\t\t\tthis.challenges.push(challenge);\n\t\t}\n\t\telse if(typeof challenges == 'object' && challenges.length > 0) {\n\t\t\tfor(var i = 0; i < challenges.length; i++) {\n\t\t\t\tvar challenge = new XPMobileSDK.library.Challenge(challenges[i]);\n\t\t\t\tthis.challenges.push(challenge);\n\t\t\t}\n\t\t}\n\t\tthis.start();\n\t},\n\t\n\t/**\n\t * Try to find a valid challenge\n\t *\n\t * @return\t\tstring\t\tValid challege value\n\t */\n\ttakeValidChallenge: function() {\n\t    if(this.challenges.length > 0) {\n\t        for (var i = 0; i < this.challenges.length; i++) {\n\n\t\t\t\tvar challenge = this.challenges.shift();\n\n\t\t\t\tif (this.challenges.length < this.haltThreshold) {\n\t\t\t\t\tthis.haltSystem();\r\n\t\t\t\t} else {\n\t\t\t\t\tthis.unHaltSystem();\r\n                }\n\n\t            if (challenge.isValid()) {\n\t                return challenge;\n\t            }\n\t\t\t\tchallenge.destroy();\n\t        }\n\t    }\n\t    else {\n\t        console.warn('No challenges in the list!');\n\t        return {getValue: function(){}, getTime: function(){}};\n\t    }\n\t},\n\t\n\t/**\n\t * Export all challenges. Used for stored in the localStorage when page is reloaded\n\t *\n\t * @return\t\tarray\t\tArray of all challeges\n\t */\n\texportAll: function() {\n\t\tvar result = [];\n\t\tthis.challenges.forEach(function(challenge){\n\t\t\tvar value = challenge.getValue();\n\t\t\tif(value) {\n\t\t\t\tresult.push(value);\n\t\t\t}\n\t\t});\n\t\treturn result;\n\t},\n\t\n\t/**\n\t * Sort an array of Challenge object based on their expiration time.\n\t *\n\t * @param\tfirst\t\tobject\t\tChallenge object\n\t * @param\tsecond\t\tobject\t\tChallenge object\n\t */\n\tsort: function(first, second) {\n\t\treturn second.getTime() - first.getTime();\n\t},\n\t\n\t/**\n\t * Calculate the challenge answer\n\t */\n\tcalculate: function() {\n\t    var challenge = this.takeValidChallenge();\n\n\t    if (challenge)\n\t    {\r\n\t        return {\r\n\t            'Challenge': challenge.getValue(),\n\t            'ChalAnswer': CryptoJS.SHA512((challenge.getValue() + this.sharedKey).toUpperCase()).toString(CryptoJS.enc.Base64),\n\t            'timeout': (challenge.ttl - challenge.getTime()) * 1000\r\n\t        };\r\n\t    }\n\n\t    return {\r\n\t        'Challenge': undefined,\n\t        'ChalAnswer': undefined,\n\t        'timeout': undefined\r\n\t    };\n\t},\n\t\n\t/**\n\t * Connection state observing\n\t */ \n\tconnectionLostConnection: function () {\n\t\tthis.destroy();\n\t},\n\t\n\t/**\n\t * Connection state observing\n\t */ \n\tconnectionDidDisconnect: function () {\n\t\tthis.destroy();\n\t},\n\n\thaltSystem() {\n\t\tdocument.getElementById('systemErrorModal').setAttribute(\"show\", true);\n\t\tthis.halt = true;\n\t},\n\n\tunHaltSystem() {\n\t\tif (!this.halt) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.halt = false;\n\t\tdocument.getElementById('systemErrorModal').removeAttribute(\"show\");\n\t},\n\t\n\t/**\n\t * Connection request observer\n\t */ \n\tconnectionRequestSucceeded: function(request, response) {\n\t    if (XPMobileSDK.library.Connection.CHAPSupported == 'Yes'\n            && response\n            && response.parameters\n            && response.parameters.Challenge\n            && XPMobileSDK.library.Connection.connectionId) {\n\t\t\tthis.add(response.parameters.Challenge);\n\t\t}\n\t},\n\t\n\t/**\n\t * Destructor\n\t */\n\tdestroy: function() {\n\t\tif(this.challengeInterval) {\n\t\t\tclearInterval(this.challengeInterval);\n\t\t\tthis.challengeInterval = null;\n\t\t}\n\t\tif(this.challenges.length > 0) {\n\t\t\tfor(var i = 0; i < this.challenges.length; i++) {\n\t\t\t\tvar challenge = this.challenges.shift();\n\t\t\t\tchallenge.destroy();\n\t\t\t}\n\t\t}\n\t\tthis.challenges = [];\n\t\tthis.unHaltSystem();\n\t\tXPMobileSDK.library.SecureString.sharedKey = null;\n\t}\n};","/**\n * Generate a challenge that will be used to hash connectino id\n * \n * @param \t\tvalue\t\t\tstring\t\tValue of the challenge\n * @author \t\ttvh\n */\nXPMobileSDK.library.Challenge = function(value) {\n\t\n\t/**\n\t * Stores context of execution\n\t * \n\t * @var\t\t\tobject\n\t * @access\t\tprivate\n\t */\n\tvar self = this;\n\t\n\t/**\n\t * Stores the number of seconds sinse challeve was received from server\n\t * \n\t * @var\t\t\tinteger\n\t * @access\t\tprivate\n\t */\n\tvar seconds = 1;\n\t\n\t/**\n\t * Stores a reference from setInterval function that is used to calculate the number of seconds sinse challege was received from server\n\t * \n\t * @var\t\t\tinteger\n\t * @access\t\tprivate\n\t */\n\tvar clockInterval = null;\n\t\n\t/**\n\t * Stores a flag that points our of the challenge is valid or not\n\t * \n\t * @var\t\t\tboolean\n\t * @access\t\tprivate\n\t */\n\tvar valid = true;\n\t\n\t/**\n\t * Time to live constant - in seconds\n\t * \n\t * @var\t\t\tinteger\n\t * @access\t\tpublic\n\t */\n\tthis.ttl = 59 * 60; // 5 * Connection.serverTimeout;\n\t\n\t/**\n\t * Starts the clock that will calcute the number of seconds sinse challenge was received from server\n\t * \n\t * @access\t\t\t\t\tprivate\n\t */\n\tvar startClock = function() {\n\t\tif(!clockInterval) {\n\t\t\tclockInterval = setInterval(function () {\n\t\t\t\tcomputeTime();\n\t\t\t}, 1000);\n\t\t}\n\t};\n\t\n\tstartClock();\n\t\n\t/**\n\t * Calculete the number of seconds sinse challenge was received from server\n\t * \n\t * @access\t\t\t\t\tprivate\n\t */\n\tvar computeTime = function () {\n\t\tvalid = seconds >= self.ttl ? false : true;\n\t\tif(!valid) {\n\t\t\tself.destroy();\n\t\t}\n\t\telse {\n\t\t\tseconds++;\n\t\t}\n\t};\n\t\n\t/**\n\t * Check if the challenge is valid or not\n\t * \n\t * @access\t\t\t\t\tpublic\n\t * @return\t\t\t\t\tboolean\t\ttrue if challenge is suitable for usage / false otherwise\n\t */\n\tthis.isValid = function() {\n\t\treturn valid;\n\t};\n\t\n\n\t/**\n\t * Return the value of the challege\n\t * \n\t * @access\t\t\t\t\tpublic\n\t * @return\t\t\t\t\tstring\t\tValue of the challenge\n\t */\n\tthis.getValue = function() {\n\t\treturn value;\n\t};\n\t\n\t/**\n\t * Return the time in seconds of how long we keep the challenge in memory\n\t * \n\t * @access\t\t\t\t\tpublic\n\t * @return\t\t\t\t\tnumber\t\tseconds\n\t */\n\tthis.getTime = function() {\n\t\treturn seconds;\n\t};\n\t\n\t/**\n\t * Destructor\n\t * \n\t * @access\t\t\t\t\tpublic\n\t */\n\tthis.destroy = function() {\n\t\tif(clockInterval) {\n\t\t\tclearInterval(clockInterval);\n\t\t\tclockInterval = null;\n\t\t}\n\t\tvalid = false;\n\t};\n\n};","/**\n * Implementing Diffie Hellman algorithm for exchange shared key between two parties\n * \n *  This library requires BigInt (http://www.leemon.com/crypto/BigInt.js) and \n *  Advanced Encryption Standard library (http://crypto-js.googlecode.com/svn/tags/3.1/build/rollups/aes.js) \n *\n * @see\t\t\thttp://en.wikipedia.org/wiki/Diffie%E2%80%93Hellman_key_exchange\n * \n * @author \t\ttvh <tvh@milestonesys.com>\n */\n\nXPMobileSDK.library.DiffieHellman = function(params) {\n\t/**\n\t * Server and client prime key\n\t * \n\t * @var\t\t\tstring\n\t * @access\t\tprivate\n\t */\n    var primeKey = {\n        1024: \"F488FD584E49DBCD20B49DE49107366B336C380D451D0F7C88B31C7C5B2D8EF6F3C923C043F0A55B188D8EBB558CB85D38D334FD7C175743A31D186CDE33212CB52AFF3CE1B1294018118D7C84A70A72D686C40319C807297ACA950CD9969FABD00A509B0246D3083D66A45D419F9C7CBD894B221926BAABA25EC355E92F78C7\",\n        2048: \"87A8E61DB4B6663CFFBBD19C651959998CEEF608660DD0F25D2CEED4435E3B00E00DF8F1D61957D4FAF7DF4561B2AA3016C3D91134096FAA3BF4296D830E9A7C209E0C6497517ABD5A8A9D306BCF67ED91F9E6725B4758C022E0B1EF4275BF7B6C5BFC11D45F9088B941F54EB1E59BB8BC39A0BF12307F5C4FDB70C581B23F76B63ACAE1CAA6B7902D52526735488A0EF13C6D9A51BFA4AB3AD8347796524D8EF6A167B5A41825D967E144E5140564251CCACB83E6B486F6B3CA3F7971506026C0B857F689962856DED4010ABD0BE621C3A3960A54E710C375F26375D7014103A4B54330C198AF126116D2276E11715F693877FAD7EF09CADB094AE91E1A1597\"\n    };\n\t\n\t/**\n\t * Converted prime key into big int\n\t * \n\t * @var\t\t\tarray\n\t * @access\t\tprivate\n\t */\n    var primeKeyBigInt = str2bigInt(primeKey[XPMobileSDKSettings.primeLength], 16, 1);\n\t\n\t/**\n\t * Generator key\n\t * \n\t * @var\t\t\tarray\n\t * @access\t\tprivate\n\t */\n\tvar generator = str2bigInt('2',10,1);\n\t\n\t/**\n\t * Client specific random key\n\t * \n\t * @var\t\t\tarray\n\t * @access\t\tprivate\n\t */\n\tvar randKey = [];\n\n\t/**\n\t * Server public key\n\t * \n\t * @var\t\t\tarray\n\t * @access\t\tprivate\n\t */\n\tvar serverKey = null;\n\t\n\t/**\n\t * Stores context of execution\n\t * \n\t * @var\t\t\tobject\n\t * @access\t\tprivate\n\t */\n\tvar self = this;\n\t\n\t/**\n\t * Convert string to byte array\n\t * \n\t * @param \t\tstr\t\t\tstring\t\tString to convert to\n\t * @access\t\t\t\t\tprivate\n\t * @return\t\t\t\t\tarray\t\tConverted string to byte array\n\t */\n\tvar str2byteArray = function (str) {\n\t\tif (str.length % 2 != 0) {\n            str = '0' + str;\n\t\t}\n\n\t\tvar result = [];\n\t\tfor(var i=0; i<str.length; i=i+2)\n\t\t\tresult.push(parseInt(str.substring(i,i+2),16));\n\t\t\n\t\tresult.reverse();\n\t\treturn result;\n\t};\n\t\n\t/**\n\t * Generates client public key\n\t * \n\t * @access\t\t\t\t\tpublic\n\t * @return\t\t\t\t\tstring\t\tBase64 encoded public key\n\t */\n\tthis.createPublicKey = function () {\n\t\trandKey = randBigInt(160, 0);\n\t\tvar byteArrayKey = str2byteArray(bigInt2str(powMod(generator,randKey,primeKeyBigInt),16));\n\t\tbyteArrayKey.push(0);\n\t\tvar key = Base64.encodeArray(byteArrayKey);\n\t\treturn key;\n\t};\n\n\t/**\n\t * Decode and set server public key\n\t * \n\t * @param \t\tstr\t\t\tstring\t\tServer public key\n\t * @access\t\t\t\t\tpublic\n\t */\n\tthis.setServerPublicKey = function (publicKey) {\n\t\tvar decodedServerKey = Base64.decodeBinary(publicKey);\n\n\t\tvar reversedServerKey = [];\n\t\t\n\t\tfor(i=decodedServerKey.length-1; i>=0; i--)\n\t\t\treversedServerKey.push(decodedServerKey[i]);\n\t\t\n\t\tserverKey = CryptoJS.enc.Base64.parse(Base64.encodeArray(reversedServerKey)).toString();\n\t};\n\n\t/**\n\t * Return the skared key\n\t * \n\t * @return\t\t\t\t\tstring\t\tShared key\n\t * @access\t\t\t\t\tpublic\n\t */\n\tthis.getSharedKey = function () {\n\t\tvar secretKey = str2byteArray(bigInt2str(powMod(str2bigInt(serverKey,16,1),randKey,primeKeyBigInt),16));\n\t\treturn CryptoJS.enc.Base64.parse(Base64.encodeArray(secretKey)).toString();\n\t};\n\t\n\t/**\n\t * Encode a string using client and server public keys\n\t * \n\t * @param \t\tstr\t\t\tstring\t\tString to encode\n\t * @access\t\t\t\t\tpublic\n\t * @return\t\t\t\t\tstring\t\tBase64 encoded encrypted string\n\t */\n\tthis.encodeString = function(str) {\n\t\tvar secretString = this._sharedKey || this.getSharedKey().substring(0, 96);\n\n\t\tvar key = CryptoJS.enc.Hex.parse(secretString.substring(32, 96)); \n\t\tvar iv = CryptoJS.enc.Hex.parse( secretString.substring(0,32) ); \n\t\t\n\t\tvar params = { 'iv': iv };\n\t\tif (XPMobileSDKSettings.defaultEncryptionPadding && CryptoJS.pad[XPMobileSDKSettings.defaultEncryptionPadding]) {\n\t\t    params.padding = CryptoJS.pad[XPMobileSDKSettings.defaultEncryptionPadding];\n\t\t}\n\t\treturn CryptoJS.AES.encrypt(str, key, params).ciphertext.toString(CryptoJS.enc.Base64);\n\t};\n};","/*\nCryptoJS v3.1.2\ncode.google.com/p/crypto-js\n(c) 2009-2013 by Jeff Mott. All rights reserved.\ncode.google.com/p/crypto-js/wiki/License\n*/\nCryptoJS.pad.Iso10126={pad:function(a,c){var b=4*c,b=b-a.sigBytes%b;a.concat(CryptoJS.lib.WordArray.random(b-1)).concat(CryptoJS.lib.WordArray.create([b<<24],1))},unpad:function(a){a.sigBytes-=a.words[a.sigBytes-1>>>2]&255}};\n","XPMobileSDK.library.Ajax = new function () {\r\n\n    this.Request = function (connectionUrl, params) {\r\n        var realTimeout = params.timeout || 0;\n\n        // remove timeout, set it later only for asynchronous requests\n        delete params.timeout;\r\n\n        params = Object.assign({\r\n            method: 'POST',\n            contentType: 'plain/text',\n            responseType: 'text',\n            encoding: 'utf-8',\n            postBody: null,\n            asynchronous: true,\n            onLoading: function () { },\n            onComplete: function () { },\n            onSuccess: function () { },\n            onFailure: function () { },\n            onTimeout: function () { }\r\n        }, params);\n\n        var ajaxRequest = new XMLHttpRequest();\n\n        var checkReadyState = function () {\r\n\n            if (ajaxRequest.readyState == 1) {\r\n                params.onLoading(ajaxRequest);\r\n            }\n            else if (ajaxRequest.readyState == 4) {\r\n\n                params.onComplete(ajaxRequest);\n\n                if ((ajaxRequest.responseType == '' || ajaxRequest.responseType == 'text') && ajaxRequest.status == 0 && ajaxRequest.responseText == '') {\r\n                    params.onFailure(ajaxRequest);\n                    return;\r\n                }\n\n                if (ajaxRequest.responseType == 'arraybuffer' && ajaxRequest.status == 0 && (ajaxRequest.response == null || ajaxRequest.response == '')) {\r\n                    params.onFailure(ajaxRequest);\n                    return;\r\n                }\n\n                if (ajaxRequest.status == 200 || ajaxRequest.status == 0) {\r\n                    params.onSuccess(ajaxRequest);\r\n                }\r\n                else {\r\n                    params.onFailure(ajaxRequest);\r\n                }\r\n            }\r\n        };\n\n        ajaxRequest.onreadystatechange = checkReadyState;\n\n        ajaxRequest.open(params.method, connectionUrl, params.asynchronous);\n\n        if (params.asynchronous) {\r\n            ajaxRequest.responseType = params.responseType;\r\n            ajaxRequest.timeout = realTimeout;\r\n            ajaxRequest.ontimeout = params.onTimeout;\r\n        }\n\n        ajaxRequest.setRequestHeader('Content-Type', params.contentType + '; charset=' + params.encoding);\n        ajaxRequest.send(params.postBody);\n\n        return ajaxRequest;\r\n\n    };\r\n\n};","XPMobileSDK.library.Bytes = new function () {\n\n\tvar fromInt = function (integer, bytes) {\n\t\t\n\t\treturn fromHex(integer.toString(16), bytes);\n\t\t\n\t};\n\t\t\n\tvar fromGuid = function (guid, bytes) {\n\t\t\n\t\treturn fromHex(guid.replace(/[^a-f0-9]/gi, ''), bytes);\n\t\t\n\t};\n\n\tvar fromBase64 = function (base64, bytes) {\n\t\t\n\t\tvar string = atob(base64.replace(/^.*?,/, '')).slice(- bytes);\n\t\tvar array = new Array(bytes ? bytes - string.length : 0);\n\t\t\n\t\tfor (var i = 0; i < string.length; i++)\n\t\t\tarray.push(string.charCodeAt(i));\n\t\t\n\t\treturn array;\n\n\t};\n\n\tvar fromHex = function (hex, bytes) {\n\t\t\n\t\thex = hex.length % 2 ? \"0\" + hex : hex;\n\t\t\n\t\tvar numbers = hex.match(/../g).splice(- bytes);\n\t\tvar array = new Array(bytes ? bytes - numbers.length : 0);\n\t\t\n\t\tarray.push.apply(array, numbers);\n\t\tarray.forEach(function (item, index) {\n\t\t\tarray[index] = parseInt(item || 0, 16);\n\t\t});\n\t\t\t\t\n\t\treturn array;\n\t\t\t\t\n\t};\n\t\n\treturn {\n\t\tfromInt: fromInt,\n\t\tfromGuid: fromGuid,\n\t\tfromBase64: fromBase64,\n\t\tfromHex: fromHex\n\t}\n\n};","/**\n * Network parameters - see CommunicationStability.\n * \n * @author rvp\n */\nvar NETWORK = {\n\t\n\t/**\n\t * Constant.\n\t * This is the lower bound for the NETWORK.minRequestTime.\n\t */\n\tMIN_REQUEST_TIME_LOWER_BOUND: 100,\n\t\n\t/**\n\t * Constant.\n\t * This is the upper bound for the NETWORK.minRequestTime.\n\t */\n\tMIN_REQUEST_TIME_UPPER_BOUND: 1000,\n\t\n\t/**\n\t * Constant.\n\t * Interval: maximum interval for requesting next camera frame after the last frame is received from the server.\n\t * This is the upper bound for the NETWORK.requestTime which can grow exponentially for cameras that are currently not working and do not receive frames. \n\t */\n\tMAX_REQUEST_TIME: 10000,\n\t\n\t/**\n\t * Constant.\n\t * Interval: maximum interval for requesting next camera frame after the last frame is not received due to a HTTP error. \n\t */\n\tMAX_REQUEST_TIME_ON_FAILURE: 4000,\n\t\n\t/**\n\t * Constant.\n\t * Coefficient: when the server returns only header instead of frame for a certain camera stream, the next frame will be requested with delay, determined by this coefficient. \n\t */\n\tREQUEST_TIME_GROW_PER_EMPTY_FRAME: 1.32,\n\t\n\t/**\n\t * Constant.\n\t * Coefficient: how much the NETWORK.requestTime and NETWORK.requestTimeOnFailure grow depending on the number of recent HTTP errors \n\t */\n\tREQUEST_TIME_GROW_PER_HTTP_ERROR: 10,\n\n\t/**\n\t * Constant.\n\t * Coefficient: how much the NETWORK.minRequestTime grows when HTTP errors occur\n\t */\n\tMIN_REQUEST_TIME_GROW: 1.4,\n\t\n\t/**\n\t * Constant.\n\t * Difference between dates: used to reduce NETWORK.minRequestTime if no HTTP errors have recently occurred. \n\t */\n\tMIN_REQUEST_TIME_DECREASE: 30000,\n\t\n\t/**\n\t * Constant.\n\t * Difference between dates: used to increase NETWORK.minRequestTime if HTTP errors have recently occurred. \n\t */\n\tMIN_REQUEST_TIME_INCREASE: 15000,\n\t\n\t/**\n\t * Constant.\n\t * Denominator: determines how fast the HTTP errors on the video channel become obsolete. \n\t * errors -= 1 + errors / pace\n\t */\n\tVIDEO_PROTOCOL_RECOVER_PACE: 13,\n\t\n\t/**\n\t * Constant.\n\t * Interval: monitors the number of recent HTTP errors and modifies the NETWORK.minRequestTime if no errors have recently occurred. \n\t */\n\tVIDEO_FAILS_MONITOR: 7000,\n\t\n\t/**\n\t * Variable.\n\t * Interval: minimal interval for requesting next camera frame after the last frame is received from the server, i.e. the minimal value of NETWORK.requestTime.\n\t * It changes based on the number of HTTP request errors for a given time. \n\t */\n\tminRequestTime: 10,\n\t\n\t/**\n\t * Variable.\n\t * Interval: current interval for requesting next camera frame after the last frame is received from the server.\n\t * Calculated based on the NETWORK.minRequestTime and the number of HTTP request errors for a given time. \n\t */\n\trequestTime: 10,\n\t\n\t/**\n\t * Variable.\n\t * Interval: current interval for requesting next camera frame after the last frame is not received due to a HTTP error. \n\t */\n\trequestTimeOnFailure: 2000,\n\t\n\t/**\n\t * Variable.\n\t * Interval: current interval for sending empty message through WebSocket to the server. This will help the reconnection of WebSockets when network ticks occure. \n\t */\n\twebsocketSendMessage: 1000\n};\n","/**\n * This singleton monitors the stability of the communication between the Web Client and the Mobile Server.\n * Such kind of monitoring is necessary due to the limitation of the simultaneous AJAX requests that the server can process. \n * \n * The server gets constantly overloaded when the Web Client shows many cameras on the screen or/and there are many Web Clients connected to the same Mobile Server.\n * When the server is overloaded, some/all of the HTTP requests fail with different HTTP error codes, HTTP error 0 (zero) being the most frequent one.\n * In such situations, the AJAX requests should become less frequent, i.e. the interval between requesting frames for streams should get bigger. \n * Also, the LiveMessage command should always be with higher priority than the video stream requests to avoid log-out. Loosely speaking, the command channel\n * should be with higher priority than the video channel. \n * \n * This singleton modifies the variables declared in the NETWORK object. NETWORK.requestTime is probably the most important, as it defines the interval between two \n * requests for video frames. The general rule is that if the communication is overloaded, the requestTime interval is bigger, so the server gets a chance to recover. \n * \n * @author rvp\n */\nvar CommunicationStability = new function() {\n\t\n\t// Counter for HTTP errors on the command channel. +1 is added on error, -1 is added on success after failure\n\tvar connectionProtocolFails = 0;\n\t\n\t// Counter for the recent HTTP errors on the video channel. It tends to zero, as zero means that no HTTP errors have recently occurred\n\tvar videoProtocolFails = 0;\n\t\n\t// the last time that an HTTP error occurred on the video channel and the NETWORK.requestTime got bigger\n\tvar videoProtocolFailDate = null;\n\t\n\t// reduces videoProtocolFails each second, until it becomes zero\n\tsetInterval(function() {\n\t\t\n\t\tvideoProtocolFails = Math.max(0, videoProtocolFails - 1 - parseInt(videoProtocolFails / NETWORK.VIDEO_PROTOCOL_RECOVER_PACE));\n\t\t\n\t\tNETWORK.requestTime = NETWORK.minRequestTime + videoProtocolFails * NETWORK.REQUEST_TIME_GROW_PER_HTTP_ERROR;\n\t\tNETWORK.requestTimeOnFailure = Math.min(NETWORK.MAX_REQUEST_TIME_ON_FAILURE, NETWORK.requestTime * NETWORK.REQUEST_TIME_GROW_PER_HTTP_ERROR);\n\t\t\n//\t\tconsole.show(NETWORK.requestTime + ' request time', 0);\n//\t\tconsole.show(NETWORK.minRequestTime + ' min request time', 1);\n//\t\tconsole.show(NETWORK.requestTimeOnFailure + ' request time on failure', 2);\n\t\t\n\t}, 1000);\n\t\n\t// reduces NETWORK.minRequestTime if no recent HTTP errors have occurred\n\tsetInterval(function() {\n\t\tif (noRecentVideoFails(NETWORK.MIN_REQUEST_TIME_DECREASE)) {\n\t\t\tNETWORK.minRequestTime = Math.max(NETWORK.MIN_REQUEST_TIME_LOWER_BOUND, NETWORK.minRequestTime * 0.9);\n\t\t}\n\t}, NETWORK.VIDEO_FAILS_MONITOR);\n\t\n\t/**\n\t * Call this method to indicate that a command (on the command channel) has failed. \n\t * \n\t * @param object: the ConnectionRequest instance\n\t */\n\tthis.addBreakDown = function(object) {\n\t\t\n\t\tif (object.brokenDown) {\n\t\t\treturn;\n\t\t}\n\t\t\n\t\tconnectionProtocolFails++;\n\t\tobject.brokenDown = true;\n\t};\n\t\n\t/**\n\t * Call this method to indicate that a command (on the command channel) has succeeded. \n\t * \n\t * @param object: the ConnectionRequest instance\n\t */\n\tthis.removeBreakDown = function(object) {\n\t\t\n\t\tif (!object.brokenDown) {\n\t\t\treturn;\n\t\t}\n\t\t\n\t\tconnectionProtocolFails--;\n\t\tobject.brokenDown = false;\n\t};\n\t\n\t/**\n\t * Call this method to indicate that a video request has failed.\n\t */\n\tthis.addVideoBreakDown = function() {\n\t\t\n\t\tvideoProtocolFails++;\n\t\t\n\t\tif (!videoProtocolFailDate) {\n\t\t\tvideoProtocolFailDate = new Date();\n\t\t} else {\n\t\t\tif (noRecentVideoFails(NETWORK.MIN_REQUEST_TIME_INCREASE)) {\n\t\t\t\tNETWORK.minRequestTime = Math.min(NETWORK.MIN_REQUEST_TIME_UPPER_BOUND, NETWORK.minRequestTime * NETWORK.MIN_REQUEST_TIME_GROW);\n\t\t\t\tvideoProtocolFailDate = new Date();\n\t\t\t}\n\t\t}\n\t};\n\t\n\t/**\n\t * Checks whether the command channel is broken down. \n\t */\n\tthis.isBrokenDown = function() {\n\t\treturn connectionProtocolFails > 0;\n\t};\n\t\n\tfunction noRecentVideoFails(interval) {\n\t\treturn videoProtocolFailDate && new Date().getTime() - videoProtocolFailDate.getTime() > interval;\n\t}\n};","/** \r\n * Network API\r\n *\r\n * This file defines the Connection singleton, which is the entry point of the Network API.\r\n * It is an abstraction layer over the communication with the Mobile server.\r\n * It encapsulates the low-level XML creation and parsing.  \r\n * It is responsible for creating the high-level ConnectionRequest, ConnectionResponse, VideoConnection and ItemHeaderParser instances. \r\n * \r\n * @module Network\r\n */ \r\n\r\n/**\r\n * Connection state machine states\r\n */\r\nXPMobileSDK.library.ConnectionStates = {\r\n\tidle: 1, // Waiting to connect\r\n\tconnecting: 2, // Connecting, waiting for ajax response\r\n\tloggingIn: 3, // Logging in, waiting for ajax response\r\n\tworking: 4, // Logged in, established connection and etc\r\n\tlostConnection: 5 // Got an error from the server that the connection ID is no longer valid and should reconnect\r\n};\r\n\r\n/**\r\n * Interface description for the observers of the Connection singleton.\r\n * \r\n * If an objects wants to be informed for a specific event (when connection is lost for example) they can register as an observer.\r\n * Registering an object as an observer for the Connection singleton is simple as calling Connection.addObserver(object).\r\n * Then, if the observer defines any of the methods described below, they will be called whenever it is appropriate.\r\n * \r\n * All methods are optional. Just implement those you need in your class and add it as observer. \r\n * \r\n * @class ConnectionObserverInterface\r\n */\r\nXPMobileSDK.library.ConnectionObserverInterface = {\r\n\t\r\n\t/**\r\n\t * Sent to observers when the connection state changes in any way\r\n\t * \r\n\t * @method connectionStateChanged\r\n\t */\r\n\tconnectionStateChanged: function () {},\r\n\t\r\n\t/**\r\n\t * Sent to observers when connection has connected to the server and is about to send credentials\r\n\t * \r\n\t * @method connectionDidConnect\r\n\t * @param parameters: object, the object containing the response parameters.\r\n\t */\r\n\tconnectionDidConnect: function (parameters) {},\r\n\t\r\n\t/**\r\n\t * Sent to observers when connection attempted to connect to the server but failed.\r\n\t * Note that error may be a null object if we have failed to even parse the response from the server.\r\n\t * \r\n\t * @method connectionFailedToConnect\r\n\t */\r\n\tconnectionFailedToConnect: function (error) {},\r\n\t\r\n\t/**\r\n\t * Sent to observers when connecting with external connection ID has failed.  \r\n\t * \r\n\t * @method connectionFailedToConnectWithId\r\n\t */\r\n\tconnectionFailedToConnectWithId: function (error) {},\r\n\t\r\n\t/**\r\n\t * Sent to observers when connection is in the process of logging in, but requires additional verification code.\r\n\t * \r\n\t * @method connectionRequiresCode\r\n\t * @param provider: string, the provider used to send a verification code.\r\n\t */\r\n\tconnectionRequiresCode: function (provider) {},\r\n\t\r\n\t/**\r\n\t * Sent to observers when connection is in the process of logging in, a code has been sent to the server for verification, but this code is wrong.\r\n\t * \r\n\t * @method connectionCodeError\r\n\t */\r\n\tconnectionCodeError: function () {},\r\n\t\r\n\t/**\r\n\t * Sent to observers when connection has logged in.\r\n\t * \r\n\t * @method connectionDidLogIn\r\n\t */\r\n\tconnectionDidLogIn: function () {},\r\n\t\r\n\t/**\r\n\t * Sent to observers when connection has failed to log in. Check the error to determine if it was due to incorrect credentials!\r\n\t * Note that error may be a null object if we have failed to even parse the response from the server.\r\n\t * \r\n\t * @method connectionFailedToLogIn\r\n\t */\r\n\tconnectionFailedToLogIn: function (error) {},\r\n\t\r\n\t/**\r\n\t * Sent to observers when connection to the server was lost.\r\n\t * \r\n\t * @method connectionLostConnection\r\n\t */\r\n\tconnectionLostConnection: function () {},\r\n\t\r\n\t/**\r\n\t * Sent to observers when the disconnect command is sent.\r\n\t * \r\n\t * @method connectionProcessingDisconnect\r\n\t */\r\n\tconnectionProcessingDisconnect: function() {},\r\n\t\r\n\t/**\r\n\t * Sent to observers when connection to the server was closed on request via disconnect method.\r\n\t * \r\n\t * @method connectionDidDisconnect\r\n\t */\r\n\tconnectionDidDisconnect: function () {},\r\n\t\r\n\t/**\r\n\t * Sent to observers when all video connections have been switched to pull mode.\r\n\t * \r\n\t * @method connectionSwitchedToPull\r\n\t */\r\n\tconnectionSwitchedToPull: function () {},\r\n\r\n\t/**\r\n\t * Sent to observers every time a request to the server has been received properly and without timeout or other terminal errors.\r\n\t * You can use that to keep track of the connection and monitor it is properly working.\r\n\t * \r\n\t * @method connectionRequestSucceeded\r\n\t */\r\n\t connectionRequestSucceeded: function (request, response) {},\r\n\r\n\t connectionVersionChanged: function () {},\r\n\r\n\t connectionReloadConfiguration: function () {},\r\n\r\n\t connectionReloadCameraConfiguration: function () {},\r\n\t \r\n\t closeStreamFinished: function () {}\r\n};\r\n\r\n/**\r\n * Main Connection.\r\n * \r\n * This class encapsulates:\r\n * \t- connection state management;\r\n *  - commands sending to the server over ajax;\r\n *  - keep alive messages (LiveMessage commands).\r\n *  \r\n * The class uses ConnectionRequest to generate XML and perform the actual AJAX call with the command. \r\n * Most commands methods (if not all), such as getViews and requestStream return a connectionRequest object to the callee.\r\n * This object can be used to cancel the request if needed via the cancelRequest method.\r\n * \r\n * @class Connection\r\n */\r\nConnection = function() {\r\n\t\r\n\tvar self = this;\r\n\t\r\n\t/**\r\n\t * Read-only: Connection ID, supplied by the server\r\n\t * @property {String} connectionId\r\n\t */\r\n\tthis.connectionId = null; \r\n\t\r\n\t/**\r\n\t * Keeps the name of the currently logged in user\r\n\t * @property {String} currentUserName\r\n\t */\r\n\tthis.currentUserName = null; \r\n\t\r\n\t/**\r\n\t * Session timeout in seconds, supplied by the server. It is needed so we know how often to send keep-alive messages\r\n\t * @property {Number} serverTimeout\r\n\t */\r\n\tthis.serverTimeout = 30;\r\n\t\r\n\t/**\r\n\t * Read-only: Connection state. See ConnectionStates constants for possible values\r\n\t * @property {Number} state\r\n\t */\r\n\tthis.state = XPMobileSDK.library.ConnectionStates.idle; \r\n\t\r\n\t/**\r\n\t * Indicates the configuration of DS comming from the Mobile Server\r\n\t */\r\n\tthis.DSServerStatus = {\r\n\t\t\tNotAvailable: 0,\r\n\t\t\tDoNotEnforce: 1,\r\n\t\t\tEnforceWheneverPossible: 2,\r\n\t\t\tEnforce: 3\r\n\t};\r\n\t\r\n\t/**\r\n\t * All requests currently waiting for response\r\n\t */ \r\n\tvar requests = []; \r\n\r\n\t/**\r\n\t * Observers are objects that receive certain events from the connection. These objects should implement methods from \r\n\t * the ConnectionObserverInterface. To add/remove an observer use the addObserver/removeObsever methods, don't modify this \r\n\t * array directly - it is supposed to be private property\r\n\t */\r\n\tvar observers = [];\r\n\t\r\n\t/**\r\n\t * Each command send to the server has a sequenceID which starts from 1 and is increased with every next request.\r\n\t */\r\n\tvar sequenceID = 0;\r\n\r\n\t/**\r\n\t * Number of previous LiveMessages still waiting for response from the server.\r\n\t */\r\n\tvar liveMessagesWaiting = 0;\r\n\t\r\n\t/**\r\n\t * Minimum FPS supported. In push mode this FPS value is used as lowest value when adjusting the frame rate\r\n\t */\r\n\tvar minFps = 1;\r\n\t\r\n\t/**\r\n\t * Maximum FPS supported. In push mode this FPS value is used as highest value when adjusting the frame rate. \r\n\t */\r\n\tvar maxFps = 15;\r\n\t\r\n\t/**\r\n\t * Initializes the Connection singleton. Must be called before using any of the other methods.\r\n\t * \r\n\t * @method initialize\r\n\t * @param storage: optional, the storage used to store server features in, and to initialize them from (for example XPMobileSDK.localStorage, XPMobileSDK.sessionStorage, or any object implementing their methods). \r\n\t * \t\t\t\tThe server features are retrieved on login. The idea is to keep the connection state if you want to connectWithId, but it is cleared for some reason (browser refresh for example).\r\n\t */\r\n\tthis.initialize = function (storage) {\r\n\t\t\r\n\t\tif (self.storage = storage) {\r\n\t\t\tXPMobileSDK.features = self.storage.getItem('features');\r\n\t\t\tself.resizeAvailable = self.storage.getItem('resizeAvailable');\r\n\t\t\tself.webSocketServer = self.storage.getItem('webSocketServer');\r\n            self.webSocketBrowser = self.storage.getItem('webSocketBrowser');\r\n            self.directStreamingClient = self.storage.getItem('directStreamingClient');\r\n            self.directStreamingServer = self.storage.getItem('directStreamingServer');\r\n\t\t\tself.exportToAvi = self.storage.getItem('exportToAvi');\r\n\t\t\tself.exportToDb = self.storage.getItem('exportToDb');\r\n\t\t\tself.exportToMkv = self.storage.getItem('exportToMkv');\r\n\t\t}\r\n\r\n\t\tself.server = XPMobileSDKSettings.MobileServerURL || window.location.origin;\r\n\t\tself.dh = new XPMobileSDK.library.DiffieHellman();\r\n\t};\r\n\t\r\n\t/**\r\n\t * Adds an observer to the Connection singleton. \r\n\t * \r\n\t * @method addObserver\r\n\t * @param object: an arbitrary object implementing the ConnectionObserverInterface interface\r\n\t * @see ConnectionObserverInterface\r\n\t */\r\n\tthis.addObserver = function (object) {\r\n\t\tif (observers.indexOf(object) == -1) observers.push(object);\r\n\t};\r\n\r\n\t/**\r\n\t * Removes an existing observer from the Connection singleton.\r\n\t * \r\n\t * @method removeObserver\r\n\t * @param object: an arbitrary object implementing the ConnectionObserverInterface interface\r\n\t * @see ConnectionObserverInterface\r\n\t */\r\n\tthis.removeObserver = function (object) {\r\n\t\tvar index = observers.indexOf(object);\r\n\t\tif (index < 0) {\r\n\t\t\tconsole.error('Error removing observer. Observer does not exist.');\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tobservers.splice(index, 1);\r\n\t};\r\n\t\r\n\t/**\r\n\t * Cancels a request. Provide the ConnectionRequest object, returned by the method used to create it.\r\n\t * \r\n\t * @method cancelRequest\r\n\t * @param {ConnectionRequest} connectionRequest\r\n\t */ \r\n\tthis.cancelRequest = function (connectionRequest) {\r\n\t\tconsole.log('Cancelling request: ', connectionRequest);\r\n\t\tconnectionRequest.cancel();\r\n\t\trequestFinished(connectionRequest);\r\n\t};\r\n\t\r\n    /**\r\n\t * Sends a Connect command to the server.\r\n\t * \r\n     * @param {Object} params: Parameters to sent to the server\r\n\t * @param {Function} successCallback: function that is called when the command execution was successful and the result is passed as a parameter.\r\n\t * @param {Function} failCallback: function that is called when the command execution has failed and the error is passed as a parameter.\r\n\t * \r\n\t * @return the request object\r\n\t */\r\n\tthis.Connect = function (params, successCallback, failCallback) {\r\n\t    params = params || {};\r\n\r\n\t\tsetState(XPMobileSDK.library.ConnectionStates.connecting);\r\n\t\tparams.ProcessingMessage = 'No';\r\n\t    return self.sendCommand('Connect', params, { successCallback: successCallback }, connectCallback, failCallback);\r\n\t};\r\n\t\r\n\tvar connectCallback = function (connectionRequest) {\r\n\t\trequestFinished(connectionRequest);\r\n\t\tvar connectionResponse = connectionRequest.response;\r\n\t\tif (!connectionResponse || connectionResponse.isError) {\r\n            var failedResponseParameter = connectionResponse && connectionResponse.error;\r\n\t\t\tcallMethodOnObservers('connectionFailedToConnect', failedResponseParameter);\r\n            connectionRequest.options.failCallback && connectionRequest.options.failCallback(failedResponseParameter);\r\n\t\t} else {\r\n\t\t\tself.connectionId = connectionResponse.outputParameters.ConnectionId;\r\n\t\t\tself.serverTimeout = parseInt(connectionResponse.outputParameters.Timeout);\r\n\r\n\t\t\tif (self.storage) {\r\n\t\t\t\r\n\t\t\t\tif (typeof self.storage.getItem('resizeAvailable') == 'boolean') {\r\n\t\t\t\t\tself.resizeAvailable = self.storage.getItem('resizeAvailable');\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\tself.resizeAvailable = true;\r\n\t\t\t\t\tself.storage.setItem('resizeAvailable', self.resizeAvailable);\r\n\t\t\t\t}\r\n\t\t\t\t\t\t\t\r\n\t\t\t\tself.webSocketServer = connectionResponse.outputParameters.WebSocketSupport == 'Yes';\r\n                self.storage.setItem('webSocketServer', self.webSocketServer);\r\n\t\t\t\t\r\n\t\t\t\tif (typeof self.storage.getItem('webSocketBrowser') == 'boolean' && !!window.WebSocket) {\r\n\t\t\t\t\tself.webSocketBrowser = self.storage.getItem('webSocketBrowser');\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\tself.webSocketBrowser = !!window.WebSocket;\r\n\t\t\t\t\tself.storage.setItem('webSocketBrowser', self.webSocketBrowser);\r\n                }\r\n\r\n                if (typeof self.storage.getItem('directStreamingClient') == 'boolean') {\r\n                    self.directStreamingClient = self.storage.getItem('directStreamingClient');\r\n                }\r\n                else {\r\n                    self.directStreamingClient = !!XPMobileSDKSettings.DirectStreaming;\r\n                    self.storage.setItem('directStreamingClient', self.directStreamingClient);\r\n                }\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tif(connectionResponse.outputParameters.SecurityEnabled) {\r\n\t\t\t\tself.SecurityEnabled = connectionResponse.outputParameters.SecurityEnabled;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tif (connectionResponse.outputParameters.PublicKey) {\r\n\t\t\t\tself.PublicKey = connectionResponse.outputParameters.PublicKey;\r\n\t\t\t\tself.dh && self.dh.setServerPublicKey(connectionResponse.outputParameters.PublicKey);\r\n\t\t\t}\r\n\r\n            if (connectionResponse.outputParameters.CHAPSupported && connectionResponse.outputParameters.CHAPSupported == \"Yes\") {\r\n\t\t\t\tself.CHAPSupported = connectionResponse.outputParameters.CHAPSupported;\r\n\t\t\t\tXPMobileSDK.library.CHAP.sharedKey = self.dh && self.dh.getSharedKey();\r\n\t\t\t}\r\n\r\n\t\t\tif (!!connectionResponse.outputParameters.ServerProductCode) {\r\n\t\t\t    self.ServerProductCode = connectionResponse.outputParameters.ServerProductCode;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tconsole.info('Established connection');\r\n\t\t\tscheduleLiveMessage();\r\n            var successResponseParameter = connectionResponse.outputParameters;\r\n\t\t\tcallMethodOnObservers('connectionDidConnect', successResponseParameter);\r\n            connectionRequest.options.successCallback && connectionRequest.options.successCallback(successResponseParameter);\r\n\t\t}\r\n\t};\r\n\t\r\n\t/**\r\n\t * Connects to the server with an existing connectionId.\r\n\t * \r\n\t * @method connectWithId\r\n\t * @param {String} server: url of the server to connect to\r\n\t * @param {String} connectionId: token provided from external login request\r\n\t */\r\n\tthis.connectWithId = function (server, connectionId) {\r\n\t\tself.server = server;\r\n\t\tself.connectionId = connectionId;\r\n\t\tconsole.log('Connecting with Id ' + self.connectionId);\r\n\t\tsetState(XPMobileSDK.library.ConnectionStates.connecting);\r\n\t\t// We need to check the connection ID we have been provided with the server. Easiest way is to just ping it\r\n\t\tself.sendLiveMessage();\r\n\t\t// we set a flag which is checked when the live message comes back. If it contains an OK response we set the connection as live.\r\n\t\t// If it contains a time out response we set it as disconnected\r\n\t\tself.connectingViaExternalConnectionID = true;\r\n\t};\r\n\r\n\r\n    /**\r\n     * Sends a Login command to the server. Log-in has to be performed before any other normal requests (except connect and some other special cases). \r\n     * \r\n     * @param {Object} params: Parameters to sent to the server\r\n     * @param {Function} successCallback: function that is called when the command execution was successful and the result is passed as a parameter.\r\n     * @param {Function} failCallback: function that is called when the command execution has failed and the error is passed as a parameter.\r\n     * \r\n     * @return the request object\r\n     */\r\n\tthis.Login = function (params, successCallback, failCallback) {\r\n\t    params = params || {};\r\n\r\n\t\tconsole.log('Log in with authentication type ' + params.LoginType + ' username ' + params.Username + ' password ' + params.Password);\r\n\t    setState(XPMobileSDK.library.ConnectionStates.loggingIn);\r\n\t    return self.sendCommand('LogIn', params, { successCallback: successCallback }, loginCallback, failCallback);\r\n\t};\r\n\t\r\n\tvar loginCallback = function (connectionRequest) {\r\n\t\trequestFinished(connectionRequest);\r\n\t\tvar connectionResponse = connectionRequest.response;\r\n\t\tif (!connectionResponse || connectionResponse.isError) {\r\n\t\t\tif (connectionResponse && connectionResponse.error.code == XPMobileSDK.library.ConnectionError.SecondStepAuthenticationRequired) {\r\n                var ssarParameter = connectionResponse.outputParameters.SecondStepAuthenticationProvider;\r\n\t\t\t\tcallMethodOnObservers('connectionRequiresCode', ssarParameter);\r\n                connectionRequest.options.successCallback && connectionRequest.options.successCallback(ssarParameter);\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tself.connectionId = null;\r\n\t\t\t\tcancelLiveMessage();\r\n                var failedResponseParameter =  connectionResponse && connectionResponse.error;\r\n\t\t\t\tcallMethodOnObservers('connectionFailedToLogIn', failedResponseParameter);\r\n                connectionRequest.options.failCallback && connectionRequest.options.failCallback(failedResponseParameter);\r\n\t\t\t}\r\n\t\t}\r\n\t\telse {\r\n\t\t\tproceedWithLogin(connectionResponse, connectionRequest.options.successCallback);\r\n\t\t}\r\n\t};\r\n\t\r\n\tvar proceedWithLogin = function (connectionResponse, successCallback) {\r\n        \r\n        var oldServerVersion = XPMobileSDK.features && XPMobileSDK.features.ServerVersion;\r\n\r\n        self.directStreamingServer = connectionResponse.outputParameters.DirectStreamingLive == 'Yes';\r\n\t\tself.storage.setItem('directStreamingServer', self.directStreamingServer);\r\n\r\n\t\tself.exportToAvi = connectionResponse.outputParameters.ExportToAvi == 'Yes';\r\n\t\tself.storage.setItem('exportToAvi', self.exportToAvi);\r\n\r\n\t\tself.exportToDb = connectionResponse.outputParameters.ExportToDb == 'Yes';\r\n\t\tself.storage.setItem('exportToDb', self.exportToDb);\r\n\r\n\t\tself.exportToMkv = connectionResponse.outputParameters.ExportToMkv == 'Yes';\r\n\t\tself.storage.setItem('exportToMkv', self.exportToMkv);\r\n\r\n\t\tconsole.info('Logged in');\r\n\t\tgetFeatures(connectionResponse.outputParameters);\r\n\r\n        setState(XPMobileSDK.library.ConnectionStates.working);\r\n\t\tcallMethodOnObservers('connectionDidLogIn');\r\n        successCallback && successCallback();\r\n\r\n\t\tif (oldServerVersion && oldServerVersion != XPMobileSDK.features.ServerVersion) {\r\n\t\t\tcallMethodOnObservers('connectionVersionChanged');\r\n\t\t}\r\n\t};\r\n\t\r\n\t/**\r\n\t * Sends a verification code request command after a log-in command, that requires a second step of verification. \r\n\t * \r\n\t * @method requestCode\r\n\t * @param {Function} successCallback: function that is called when the command execution was successful and the result is passed as a parameter.\r\n\t * @param {Function} failCallback: function that is called when the command execution has failed and the error is passed as a parameter.\r\n\t */\r\n\tthis.requestCode = function (successCallback, failCallback) {\r\n\t\tvar params = {};\r\n\t\treturn self.sendCommand('RequestSecondStepAuthenticationPin', params, { successCallback: successCallback }, requestCodeCallback, failCallback);\r\n\t};\r\n\t\r\n\tvar requestCodeCallback = function (connectionRequest) {\r\n\t\tcallbackAfterRequest(connectionRequest, 'Error requesting validation code.', connectionRequest.options.successCallback);\r\n\t};\r\n\t\r\n\t/**\r\n\t * Sends a code for verification after a it has been requested with requestCode command. \r\n\t * \r\n\t * @method verifyCode\r\n\t * @param {String} code - second step authentication pin code\r\n\t */\r\n\tthis.verifyCode = function (code) {\r\n\t\tvar params = {\r\n\t\t\tSecondStepAuthenticationPin: code\r\n\t\t};\r\n\t\treturn self.sendCommand('VerifySecondStepAuthenticationPin', params, null, verifyCodeCallback);\r\n\t};\r\n\t\r\n\tvar verifyCodeCallback = function (connectionRequest) {\r\n\t\trequestFinished(connectionRequest);\r\n\t\tvar connectionResponse = connectionRequest.response;\r\n\t\tif (!connectionResponse || connectionResponse.isError) {\r\n\t\t\tif (connectionResponse && connectionResponse.error.code == XPMobileSDK.library.ConnectionError.SecondStepAuthenticationCodeError) {\r\n\t\t\t\tcallMethodOnObservers('connectionCodeError');\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tself.connectionId = null;\r\n\t\t\t\tcancelLiveMessage();\r\n\t\t\t\tcallMethodOnObservers('connectionFailedToLogIn', connectionResponse && connectionResponse.error);\r\n\t\t\t}\r\n\t\t}\r\n\t\telse {\r\n\t\t\tproceedWithLogin(connectionResponse);\r\n\t\t}\r\n\t};\r\n\t\r\n\t/**\r\n\t * Sends a disconnect command to the server. Performing any other normal requests that requires a valid connectionId will not be possible from now on.\r\n\t * \r\n\t *  @method Disconnect\r\n\t */\r\n\tthis.Disconnect = function (params, successCallback, failCallback) {\r\n\t\t/* Call connectionProcessingDisconnect method on observers before actual disconnect command call\r\n\t\tso that other objects have the chance to send their close commands first */\r\n\t\tcallMethodOnObservers('connectionProcessingDisconnect');\r\n\r\n\t\tcancelLiveMessage();\r\n\t\tsetState(XPMobileSDK.library.ConnectionStates.idle);\r\n\r\n\t\tXPMobileSDK.library.VideoConnectionPool.clear();\r\n\t\tvar params = params || {};\r\n\t\tvar connectionRequest = self.sendCommand('Disconnect', params, { successCallback: successCallback }, logOutCallback, failCallback);\r\n\r\n\t\tself.connectionId = null;\r\n\t\treturn connectionRequest;\r\n\t};\r\n\t\r\n\t/**\r\n\t * logOut callback\r\n\t * \r\n\t * @param \tconnectionRequest\t\tobject\t\tXMLHttpResponse\r\n\t */\r\n\tvar logOutCallback = function(connectionRequest) {\r\n\t\trequestFinished(connectionRequest);\r\n\t\tcallMethodOnObservers('connectionDidDisconnect');\r\n\t\tself.destroy();\r\n\t};\r\n\t\r\n\t/**\r\n\t * Sends a GetViews command to the server. Sub views, child of the given viewId, will be returned in the given callback.\r\n\t * \r\n\t * @method getViews\r\n\t * @param {String} viewId\r\n\t * @param {Function} successCallback: function that is called when the command execution was successful and the result is passed as a parameter.\r\n\t * @param {Function} failCallback: function that is called when the command execution has failed and the error is passed as a parameter.\r\n\t */\r\n\tthis.getViews = function (viewId, successCallback, failCallback) {\r\n\t    return self.sendCommand('GetViews', { ViewId: viewId }, { successCallback: successCallback, ViewId: viewId }, getViewsCallback, failCallback);\r\n\t};\r\n\t\r\n\tvar getViewsCallback = function (connectionRequest) {\t\t\r\n\t\tcallbackAfterRequest(connectionRequest, null, function () {\r\n\t\t\t\r\n\t\t\tvar subViews = [];\r\n\t\t\tvar subViewsNodes = connectionRequest.response.subItems.getElementsByTagName('Item');\r\n\r\n\t\t\tfor (var i = 0, c = subViewsNodes.length; i < c; i++) {\r\n\t\t\t\tvar item = subViewsNodes[i];\r\n\t\t\t\tvar res = {};\r\n\t\t\t\tfor (var j = 0; j < item.attributes.length; j++) {\r\n\t\t\t\t\tres[item.attributes[j].name] = item.attributes[j].value;\r\n\t\t\t\t}\r\n\t\t\t\tsubViews.push(res);\r\n\t\t\t}\r\n\t\t\tvar view = {\r\n\t\t\t\tid: connectionRequest.options.ViewId,\r\n\t\t\t\tsubViews: subViews\r\n\t\t\t};\r\n\t\t\tconnectionRequest.options.successCallback && connectionRequest.options.successCallback(view);\r\n\t\t});\r\n\t};\r\n\t\r\n\t/**\r\n\t * Sends a GetAllViewsAndCameras command to the server. Retrieves all folders, views and cameras in a single command.\r\n\t * \r\n\t * @method getAllViews\r\n\t * @param {Function} successCallback: function that is called when the command execution was successful and the result is passed as a parameter.\r\n\t * @param {Function} failCallback: function that is called when the command execution has failed and the error is passed as a parameter.\r\n\t */\r\n\tthis.getAllViews = function (successCallback, failCallback) {\r\n\t    return self.sendCommand('GetAllViewsAndCameras', {}, { successCallback: successCallback}, getAllViewsCallback, failCallback);\r\n\t};\r\n\t\r\n\t/**\r\n\t * Called when getAllViews response is received\r\n\t * \r\n\t * @param \t\tconnectionRequest\t\tobject\t\tResponse from AXAJ call\r\n\t */\r\n\tvar getAllViewsCallback = function(connectionRequest) {\r\n\t\tcallbackAfterRequest(connectionRequest, 'Error executing GetAllViewsAndCameras on the server.', function () {\r\n\t\t\tconnectionRequest.options.successCallback && connectionRequest.options.successCallback(connectionRequest.response.items);\r\n\t\t});\r\n\t};\r\n\t\r\n\tthis.getOsmServerAddresses = function (successCallback, failCallback) {\r\n\r\n\t    return self.sendCommand('GetOsmServerAddresses', {}, { successCallback: successCallback }, getOsmServerAddressesCallback, failCallback);\r\n\t\t\r\n\t};\r\n\t\r\n\tvar getOsmServerAddressesCallback = function (connectionRequest) {\r\n\t\tcallbackAfterRequest(connectionRequest, 'Error getting OSM server addresses from the server.', function () {\r\n\t\t\tconnectionRequest.options.successCallback && connectionRequest.options.successCallback(connectionRequest.response.items);\r\n\t\t});\r\n\t};\t\r\n\r\n\tthis.getGisMapCameras = function (successCallback, failCallback) {\r\n\r\n\t    return self.sendCommand('GetGisMapCameras', {}, { successCallback: successCallback }, getGisMapCamerasCallback, failCallback);\r\n\t\t\r\n\t};\r\n\t\r\n\tvar getGisMapCamerasCallback = function (connectionRequest) {\r\n\t\tcallbackAfterRequest(connectionRequest, 'Error getting GIS map cameras from the server.', function () {\r\n\t\t\tconnectionRequest.options.successCallback && connectionRequest.options.successCallback(connectionRequest.response.items);\r\n\t\t});\r\n\t};\t\r\n\r\n\tthis.getGisMapLocations = function (successCallback, failCallback) {\r\n\r\n\t    return self.sendCommand('GetGisMapLocations', {}, { successCallback: successCallback }, getGisMapLocationsCallback, failCallback);\r\n\t\t\r\n\t};\r\n\t\r\n\tvar getGisMapLocationsCallback = function (connectionRequest) {\r\n\t\tcallbackAfterRequest(connectionRequest, 'Error getting GIS map cameras from the server.', function () {\r\n\t\t\tconnectionRequest.options.successCallback && connectionRequest.options.successCallback(connectionRequest.response.items);\r\n\t\t});\r\n\t};\t\r\n\r\n\tthis.requestPushStream = function (successCallback, failCallback) {\r\n\t\t\r\n\t\tvar parameters = {\r\n\t\t\tSignalType: 'Upload',\r\n\t\t\tByteOrder: 'Network'\r\n\t\t};\r\n\t\treturn self.RequestStream(parameters, successCallback, failCallback);\r\n\t\t\r\n\t};\r\n\t\r\n\tvar requestPushStreamCallback = function (connectionRequest) {\r\n\t\tcallbackAfterRequest(connectionRequest, 'Error requesting video push stream from the server.', function () {\r\n\t\t\tconnectionRequest.options.successCallback && connectionRequest.options.successCallback(connectionRequest.response.outputParameters);\r\n\t\t});\r\n\t};\r\n\r\n\t/**\r\n\t * Sends a RequestStream command to the server.\r\n\t * \r\n\t * @method requestStream\r\n\t * @param {String} cameraId: the unique GUID of the camera that should be started\r\n\t * @param size: includes width and height as mandatory properties\r\n\t * @param {Function} successCallback: function that is called when the command execution was successful and the result is passed as a parameter.\r\n\t * @param {Function} failCallback: function that is called when the command execution has failed and the error is passed as a parameter.\r\n\t * @param options: optional parameter containing various configuration, includes:\r\n\t * \t\t\t- {int} signal: live or playback\r\n\t * \t\t\t- {int} jpegCompressionLevel\r\n\t * \t\t\t- {boolean} keyFramesOnly\r\n\t * \t\t\t- {boolean} reuseConnection - if true, the API will reuse existing connections for the same camera\r\n\t *\t\t\t- {int} time - timestamp for playback\r\n\t * \r\n\t * @return the request object\r\n\t */\r\n\tthis.requestStream = function (cameraId, size, options, successCallback, failCallback) {\r\n\t\t\r\n\t\tvar options = options || {};\r\n\t\t\r\n\t\tvar params = {\r\n\t\t\tCameraId: cameraId,\r\n\t\t\tDestWidth: Math.round(size.width),\r\n\t\t\tDestHeight: Math.round(size.height),\r\n\t\t\tSignalType: options.signal === XPMobileSDK.interfaces.VideoConnectionSignal.playback ? 'Playback' : 'Live',\r\n\t\t\tMethodType: 'Push', \r\n\t\t\tFps: maxFps, // This doesn't work for Pull mode, but we have to supply it anyway to keep the server happy\r\n\t\t\tComprLevel: options.jpegCompressionLevel ? options.jpegCompressionLevel : 70,\r\n\t\t\tKeyFramesOnly: options.keyFramesOnly ? 'Yes' : 'No', // Server will give only key frame thumb nails. This will reduce FPS\r\n\t\t\tRequestSize: 'Yes',\r\n            StreamType: options.streamType == XPMobileSDK.library.VideoConnectionStream.FragmentedMP4 ? 'FragmentedMP4' : 'Transcoded'\r\n\t\t};\r\n\r\n\t\tif (options.fragmentDurationMs) {\r\n\t\t\tparams.FragmentDurationMs = options.fragmentDurationMs;\r\n\t\t}\r\n\t\t\r\n\t\tif (options.time) {\r\n\t\t\tparams.SeekType = 'Time';\r\n\t\t\tparams.Time = options.time;\r\n\t\t}\r\n\t\t\r\n\t\tif (options.motionOverlay) {\r\n\t\t\tparams.MotionOverlay = 'Yes';\r\n\t\t}\r\n\t\t\r\n\t\tif (XPMobileSDK.features.SupportNoScaledImages) {\r\n\t\t\tparams.ResizeAvailable = 'Yes';\r\n\t\t}\r\n\t\t\r\n\t\tif (XPMobileSDK.features.MultiCameraPlayback && options.playbackControllerId) {\r\n\t\t\tparams.PlaybackControllerId = options.playbackControllerId;\r\n\t\t}\r\n\r\n\t\tvar options = {\r\n\t\t\tsuccessCallback: successCallback,\r\n\t\t\tcameraId: cameraId,\r\n\t\t\tsignal: options.signal === XPMobileSDK.interfaces.VideoConnectionSignal.playback ? 'Playback' : 'Live',\r\n\t\t\treuseConnection: !!options.reuseConnection\r\n\t\t};\r\n\t\treturn self.sendCommand('RequestStream', params, options, requestStreamCallback, failCallback);\r\n\t};\r\n\r\n    /**\r\n     * Sends a RequestStream command to the server.\r\n     * \r\n     * @param {Object} params: Parameters to sent to the server\r\n     * @param {Function} successCallback: function that is called when the command execution was successful and the result is passed as a parameter.\r\n     * @param {Function} failCallback: function that is called when the command execution has failed and the error is passed as a parameter.\r\n     * \r\n     * @return the request object\r\n     */\r\n\tthis.RequestStream = function (params, successCallback, failCallback) {\r\n\t    return self.sendCommand('RequestStream', params, { successCallback: successCallback }, requestStreamCallback, failCallback);\r\n\t};\r\n\t\r\n\tvar requestStreamCallback = function (connectionRequest) {\t\r\n\t\tcallbackAfterRequest(connectionRequest, 'Error starting stream for camera ' + connectionRequest.options.cameraId, function () {\r\n\t\t\t\r\n\t\t\tvar videoId = connectionRequest.response.outputParameters.VideoId;\r\n\t\t\tconsole.log('Server prepared video ID ' + videoId + ' for camera ' + connectionRequest.options.cameraId);\r\n\t\t\t\r\n\t\t\tlet videoConnection = new VideoStream(videoId, connectionRequest);\r\n\t\t\tif (connectionRequest.options.reuseConnection) {\r\n\t\t\t\tXPMobileSDK.library.VideoConnectionPool.addCamera(connectionRequest.options.cameraId, videoConnection);\r\n\t\t\t}\r\n\t\t\tconnectionRequest.options.successCallback && connectionRequest.options.successCallback(videoConnection);\r\n\t\t});\r\n\t};\r\n\r\n    /**\r\n    * Sends a RequestAudioStreamIn connection command to get an upstream for audio push to the server.\r\n    * \r\n    * @method RequestAudioStreamIn\r\n    * @param {AudioConnectionOptions} params - Configuration. Should contain:\r\n    * <pre>\r\n    * - {String} itemId - Id of the item (speaker), which stream is requested (GUID)\r\n    * - {String} AudioEncoding - Shows the encoding of the output. Possible values - Pcm, Mp3.\r\n    * - {Number} AudioSamplingRate - The audio sampling rate in Hz value\r\n    * - {Number} AudioBitsPerSample - 8/16  - Audio bits per sample\r\n    * - {Number} AudioChannelsNumber - 1/2 - Number of audio channels (mon or stereo)\r\n    * - {String} StreamDataType - Shows if this is video, audio or metadata. Possible values - Video, Audio, MetaData.\r\n    * - {String} SignalType - Type of the requested signal - Live, Playback\r\n    * - {String} MethodType - Type of the method for retrieving video data - Push or Pull\r\n    * - {String} StreamHeaders - Shows available stream headers. Possible values - AllPresent, NoHeaders.\r\n    * - {String} Challenge - (only if CHAPSupproted is true) GUID previously given by the server\r\n    * - {String} ChalAnswer - (only if CHAPSupproted is true) Challenge itself plus a SHA512 hash encoded as base64\r\n    \r\n    * </pre>\r\n    * @param {Function} successCallback - function that is called when the command execution was successful and a stream parameters object is passed as a parameter.\r\n    * @param {Function} errorCallback - function that is called when the command execution has failed and an error object is passed as a parameter.\r\n    * \r\n    * @return {ConnectionRequest} - the ConnectionRequest object\r\n    */\r\n\tthis.RequestAudioStreamIn = function (params, successCallback, failCallback) {\r\n\t    return self.sendCommand('RequestAudioStreamIn', params, { successCallback: successCallback }, requestAudioStreamInCallback, failCallback);\r\n\t};\r\n\t\r\n    /**\r\n    * Sends a RequestAudioStreamIn connection command to get an upstream for audio push to the server.\r\n    * \r\n    * @method requestAudioStreamIn\r\n    * @param {String} itemId - Id of the item (speaker), which stream is requested (GUID)\r\n    * @param {AudioConnectionOptions} options - optional, optional configuration. May contain:\r\n    * <pre>\r\n    * - {Number} AudioSamplingRate - The audio sampling rate in Hz value\r\n    * - {Number} AudioBitsPerSample - 8/16  - Audio bits per sample\r\n    * - {Number} AudioChannelsNumber - 1/2 - Number of audio channels (mon or stereo)\r\n    * </pre>\r\n    * @param {Function} successCallback - function that is called when the command execution was successful and a stream parameters object is passed as a parameter.\r\n    * @param {Function} errorCallback - function that is called when the command execution has failed and an error object is passed as a parameter.\r\n    * \r\n    * @return {ConnectionRequest} - the ConnectionRequest object\r\n    */\r\n\tthis.requestAudioStreamIn = function (itemId, options, successCallback, failCallback) {\r\n\r\n\t    var options = options || {};\r\n\r\n\t    var params = {\r\n\t        ItemId: itemId,\r\n\t        AudioEncoding: \"Pcm\",\r\n\t        AudioSamplingRate: 8000,\r\n\t        AudioBitsPerSample: 16,\r\n\t        AudioChannelsNumber: 1,\r\n\t        StreamDataType: \"Audio\",\r\n\t        SignalType: 'Live',\r\n\t        MethodType: 'Push',\r\n\t        StreamHeaders: \"AllPresent\",\r\n\t        ByteOrder: \"Network\"\r\n\t    };\r\n\r\n\t    if (options.AudioSamplingRate) {\r\n\t        params.AudioSamplingRate = options.AudioSamplingRate;\r\n\t    }\r\n\r\n\t    if (options.AudioBitsPerSample) {\r\n\t        params.AudioBitsPerSample = options.AudioBitsPerSample;\r\n\t    }\r\n\r\n\t    if (options.AudioChannelsNumber) {\r\n\t        params.AudioChannelsNumber = options.AudioChannelsNumber;\r\n\t    }\r\n\r\n\t    var options = {\r\n\t        successCallback: successCallback\r\n\t    };\r\n\r\n\t    return self.sendCommand('RequestAudioStreamIn', params, options, requestAudioStreamInCallback, failCallback);\r\n\t};\r\n\r\n\tvar requestAudioStreamInCallback = function (connectionRequest) {\r\n\t    callbackAfterRequest(connectionRequest, 'Error requesting video push stream from the server.', function () {\r\n\t        connectionRequest.options.successCallback && connectionRequest.options.successCallback(connectionRequest.response.outputParameters);\r\n\t    });\r\n\t};\r\n\r\n\tvar closeVideoConnection = function (videoConnection) {\r\n\t\r\n\t\tself.closeStream(videoConnection.videoId);\r\n\t\tvideoConnection.isReusable && XPMobileSDK.library.VideoConnectionPool.removeCamera(videoConnection.cameraId, videoConnection.videoId);\r\n\t\t\r\n\t};\r\n\r\n\tvar restartVideoConnection = function (videoConnection) {\r\n\t\r\n\t\tvideoConnection.request.parameters.MethodType = 'Push';\r\n\r\n\t\tself.closeStream(videoConnection.videoId);\r\n\t\tself.sendCommand('RequestStream', videoConnection.request.parameters, videoConnection.request.options, requestStreamCallback);\r\n\t};\r\n\r\n    /**\r\n     * Sends a RequestAudioStream command to the server.\r\n     * \r\n     * @param {Object} params: Parameters to sent to the server\r\n     * @param {Function} successCallback: function that is called when the command execution was successful and the result is passed as a parameter.\r\n     * @param {Function} failCallback: function that is called when the command execution has failed and the error is passed as a parameter.\r\n     * \r\n     * @return the request object\r\n     */\r\n\tthis.RequestAudioStream = function (params, successCallback, failCallback) {\r\n\t    return self.sendCommand('RequestAudioStream', params, { successCallback: successCallback }, requestAudioStreamCallback, failCallback);\r\n\t};\r\n\r\n    /**\r\n\t * Sends a RequestAudioStream command to the server.\r\n\t * \r\n\t * @method requestAudioStream\r\n\t * @param {String} microphoneId: the unique GUID of the microphone that should be started\r\n\t * @param {Function} successCallback: function that is called when the command execution was successful and the result is passed as a parameter.\r\n\t * @param {Function} failCallback: function that is called when the command execution has failed and the error is passed as a parameter.\r\n\t * @param options: optional parameter containing various configuration, includes:\r\n\t * \t\t\t- {int} signal: live or playback\r\n\t * \t\t\t- {int} compressionLevel\r\n\t * \t\t\t- {boolean} reuseConnection - if true, the API will reuse existing connections for the same microphone\r\n\t * \r\n\t * @return the request object\r\n\t */\r\n\tthis.requestAudioStream = function (microphoneId, options, successCallback, failCallback) {\r\n\r\n\t    var options = options || {};\r\n\r\n\t    var params = {\r\n\t        ItemId: microphoneId,\r\n\t        MethodType: \"Push\",\r\n\t        SignalType: options.signal === XPMobileSDK.interfaces.VideoConnectionSignal.playback ? 'Playback' : 'Live',\r\n\t        StreamType: \"Transcoded\",\r\n\t        StreamDataType: \"Audio\",\r\n\t        AudioEncoding: \"Mp3\",\r\n\t        CloseConnectionOnError: \"Yes\"\r\n\t    };\r\n\r\n\t    if (options.playbackControllerId) {\r\n\t        params.PlaybackControllerId = options.playbackControllerId;\r\n\t    }\r\n\r\n\t    if (options.AudioCompressionLevel)\r\n\t    {\r\n\t        params.ComprLevel = options.AudioCompressionLevel;\r\n\t    }\r\n\t    else if (XPMobileSDKSettings.AudioCompressionLevel) {\r\n\t        params.ComprLevel = XPMobileSDKSettings.AudioCompressionLevel;\r\n\t    }\r\n\r\n\t    var options = {\r\n\t        successCallback: successCallback,\r\n\t         microphoneId: microphoneId\r\n\t    };\r\n\t    return self.sendCommand('RequestAudioStream', params, options, requestAudioStreamCallback, failCallback);\r\n\t};\r\n\r\n\tvar requestAudioStreamCallback = function (connectionRequest) {\r\n\t    callbackAfterRequest(connectionRequest, 'Error starting stream for microphone ' + connectionRequest.options.microphoneId, function () {\r\n\t        \r\n\t        var streamId = connectionRequest.response.outputParameters.StreamId;\r\n\t        console.log('Server prepared stream ID ' + streamId + ' for microphone ' + connectionRequest.options.microphoneId);\r\n\r\n\t        connectionRequest.options.successCallback && connectionRequest.options.successCallback(connectionRequest);\r\n\t    });\r\n\t};\r\n\r\n    this.toggleDirectStreaming = function (enabled) {\r\n        self.directStreamingClient = !!enabled;\r\n        self.storage && self.storage.setItem('directStreamingClient', self.directStreamingClient);\r\n        XPMobileSDK.library.VideoConnection.instances.forEach(function (videoConnection) {\r\n            videoConnection.getState() == XPMobileSDK.library.VideoConnectionState.running && videoConnection.close();\r\n        });\r\n    };\r\n\t\r\n\tvar restartCameras = function() {\r\n\t\t\r\n\t\tXPMobileSDK.library.VideoConnection.instances.forEach(function(videoConnection) {\r\n\t\t    videoConnection.getState() == XPMobileSDK.library.VideoConnectionState.running && videoConnection.restart();\r\n\t\t});\r\n\t};\r\n\t\r\n\tvar switchToPull = function () {\r\n\r\n\t\tcallMethodOnObservers('connectionSwitchedToPull');\r\n\t};\r\n\t\r\n\t/**\r\n\t * Sends a ChangeStream command to the server. Changes the visual part of the stream that the given videoConnection represents. \r\n\t * \r\n\t * @method changeStream\r\n\t * @param {VideoConnection} videoConnection\r\n\t * @param cropping: contains top, left, bottom, and right properties for cropping\r\n\t * @param size: contains width and height properties that define the received frame size\r\n\t * @param {Function} successCallback: function that is called when the command execution was successful and the result is passed as a parameter.\r\n\t * @param {Function} failCallback: function that is called when the command execution has failed and the error is passed as a parameter.\r\n\t */\r\n    this.changeStream = function (videoConnection, cropping, size, successCallback, failCallback) {\r\n\r\n        var params = {\r\n            VideoConnection: videoConnection,\r\n            VideoId: videoConnection.videoId,\r\n            DestWidth: Math.round(size.width),\r\n            DestHeight: Math.round(size.height)\r\n        };\r\n\r\n        if (cropping.top !== undefined) {\r\n            params.SrcTop = Math.round(cropping.top);\r\n        }\r\n\r\n        if (cropping.left !== undefined) {\r\n            params.SrcLeft = Math.round(cropping.left);\r\n        }\r\n\r\n\t\tif (cropping.right !== undefined) {\r\n\t\t\tparams.SrcRight = Math.round(cropping.right);\r\n\t\t} else if (cropping.width !== undefined) {\r\n\t\t\tparams.SrcRight = Math.round(cropping.width) + Math.round(cropping.left);\r\n\t\t}\r\n\r\n\t\tif (cropping.bottom !== undefined) {\r\n\t\t\tparams.SrcBottom = Math.round(cropping.bottom);\r\n\t\t} else if (cropping.height !== undefined) {\r\n\t\t\tparams.SrcBottom = Math.round(cropping.height) + Math.round(cropping.top);\r\n        }\r\n\r\n\t\treturn self.ChangeStream(params, successCallback, failCallback);\r\n\t};\r\n\r\n    /**\r\n     * Sends a ChangeStream command to the server.\r\n     * \r\n     * @param {Object} params: Parameters to sent to the server\r\n     * @param {Function} successCallback: function that is called when the command execution was successful and the result is passed as a parameter.\r\n     * @param {Function} failCallback: function that is called when the command execution has failed and the error is passed as a parameter.\r\n     * \r\n     * @return the request object\r\n     */\r\n\tthis.ChangeStream = function (params, successCallback, failCallback) {\r\n\t    return self.sendCommand('ChangeStream', params, { successCallback: successCallback }, changeStreamCallback, failCallback);\r\n\t};\r\n\r\n\tvar changeStreamCallback = function (connectionRequest) {\r\n\t\tcallbackAfterRequest(connectionRequest, 'Error changing stream.', function () {\r\n\t\t\tif (XPMobileSDK.features.SupportTimeBetweenFrames) {\r\n\t\t\t\tconnectionRequest.VideoConnection.resetCommunication();\r\n\t\t\t}\r\n\t\t\tconnectionRequest.options.successCallback && connectionRequest.options.successCallback();\r\n\t\t});\r\n\t};\r\n\r\n\t/**\r\n\t * Sends a ChangeStream command to the server. Changes the motion detection settings of the stream that the given videoConnection represents. \r\n\t * \r\n\t * @method motionDetection\r\n\t * @param {VideoConnection} videoConnection\r\n\t * @param {Object} options: contains any or all of the motion, sensitivity, grid and cpu parameters.\r\n\t */\r\n\tthis.motionDetection = function (videoConnection, options) {\r\n\t\t\r\n\t\tvar params = { VideoId: videoConnection.videoId, VideoConnection: videoConnection };\r\n\t\t\r\n\t\tvar motion = options.motion || options.MotionAmount;\r\n\t\tif (motion) params.MotionAmount = Math.round(motion);\r\n\r\n\t\tvar sensitivity = options.sensitivity || options.SensitivityAmount;\r\n\t\tif (sensitivity) params.SensitivityAmount = Math.round(sensitivity);\r\n\r\n\t\tvar cpu = options.cpu || options.CPUImpactAmount;\r\n\t\tif (cpu) params.CPUImpactAmount = Math.round(cpu);\r\n\r\n\t\tvar grid = options.grid || options.RegionGrid;\r\n\t\tif (/^\\d+x\\d+(;\\d+)+$/.test(grid)) params.RegionGrid = grid;\r\n\r\n\t\treturn self.ChangeStream(params);\r\n\t};\r\n\r\n\t/**\r\n\t * Sends a GetPtzPresets command to the server. \r\n\t * \r\n\t * @method getPtzPresets\r\n\t * @param {GUID} cameraId: the current camera related to the presets this request will return\r\n\t * @param {Function} successCallback, failCallback: failCallback\r\n\t */\r\n\tthis.getPtzPresets = function (cameraId, successCallback, failCallback) {\r\n\t\t\r\n\t\tvar params = {\r\n\t\t\tCameraId: cameraId\r\n\t\t};\r\n\t\t\r\n\t\treturn self.sendCommand('GetPtzPresets', params, { successCallback: successCallback }, getPtzPresetsCallback, failCallback);\r\n\t};\r\n\r\n\tvar getPtzPresetsCallback = function (connectionRequest) {\r\n\t\tcallbackAfterRequest(connectionRequest, 'Error getting PTZ presets.', function () {\r\n\t\t    delete connectionRequest.response.outputParameters.Challenge;\r\n\t\t\tconnectionRequest.options.successCallback && connectionRequest.options.successCallback(connectionRequest.response.outputParameters);\r\n\t\t});\r\n\t};\r\n\r\n\t/**\r\n\t * Closes a stream by the given videoId.\r\n\t * \r\n\t * @method closeStream\r\n\t * @param {String} videoId\r\n\t */\r\n\tthis.closeStream = function (videoId) {\r\n\t    return self.CloseStream({ VideoId: videoId });\r\n\t};\r\n\r\n    /**\r\n         * Closes a stream by the given videoId.\r\n         * \r\n         * @method closeStream\r\n         * @param {String} videoId\r\n         */\r\n\tthis.closeAudioStream = function (videoId) {\r\n\t    return self.sendCommand('CloseStream', { VideoId: videoId }, { successCallback: null }, closeAudioStreamCallback);\r\n\t};\r\n\r\n    /**\r\n     * Sends a CloseStream command to the server.\r\n     * \r\n     * @param {Object} params: Parameters to sent to the server\r\n     * @param {Function} successCallback: function that is called when the command execution was successful and the result is passed as a parameter.\r\n     * @param {Function} failCallback: function that is called when the command execution has failed and the error is passed as a parameter.\r\n     * \r\n     * @return the request object\r\n     */\r\n\tthis.CloseStream = function (params, successCallback, failCallback) {\r\n\t    return self.sendCommand('CloseStream', params, { successCallback: successCallback }, closeStreamCallback, failCallback);\r\n\t};\r\n\r\n\tvar closeStreamCallback = function (connectionRequest) {\r\n\t    closeStreamGeneralCallback(connectionRequest);\r\n\t    callMethodOnObservers('closeStreamFinished');\r\n\t};\r\n\r\n\tvar closeAudioStreamCallback = function (connectionRequest) {\r\n\t    closeStreamGeneralCallback(connectionRequest);\r\n\t};\r\n\r\n\tvar closeStreamGeneralCallback = function (connectionRequest) {\r\n\t    requestFinished(connectionRequest);\r\n\r\n\t\tvar connectionResponse = connectionRequest.response;\r\n\t\t\r\n\t\tif (!connectionResponse || connectionResponse.isError) {\r\n\t\t\tif (connectionRequestResponseIsTerminal(connectionRequest)) {\r\n\t\t\t\tlostConnection();\r\n\t\t\t} else {\r\n\r\n\t\t\t}\r\n\t\t} else {\r\n\r\n\t\t}\r\n\t};\r\n\t\r\n\t/**\r\n\t * This singleton manages the FPS of all Cameras in the VideoConnectionPool (increasing/decreasing FPS), but never dropping bellow minFps and not exceeding the maxFps.\r\n\t * It is triggered by the LiveMessage in push mode, when the message has difficulties receiving its response from the server due to low bandwidth and heavy incoming traffic for the VideoConnections.\r\n\t */\r\n\tvar fps = new function () {\r\n\r\n\t\tvar decreasing = false;\r\n\t\tvar increasing = false;\r\n\t\tvar current = maxFps;\r\n\t\tvar stable = minFps;\r\n\t\tvar queueEmptyCount = 0;\r\n\t\t\r\n\t\t/**\r\n\t\t * Manages FPS increase/decrease depending on the given queue length, as well as the number of consecutive zero queue lengths.\r\n\t\t * e.g. If the LiveMessage queue length parameter reaches 2 (meaning that by the sending of the third LiveMessage the previous 2 are still waiting for response), the FPS has to be dropped so, \r\n\t\t * that the LiveMessage responses can be received from the server. The drop is to a safe FPS level we know of, bellow the current one, or to 1 FPS (in order to free the communication channel ASAP).\r\n\t\t * e.g. If the LiveMessage queue length is zero and was zero for the past 5 consecutive LiveMessages, there will be an attempt to recover the FPS (if bellow maximum) up to its maximum by increasing it with 1 FPS at a time.\r\n\t\t * \r\n\t\t * @param {Number} queueLength: current queue size\r\n\t\t */\r\n\t\tthis.manage = function (queueLength) {\r\n\t\t\r\n\t\t\tif (queueLength) {\r\n\t\t\t\tqueueEmptyCount = 0;\r\n\t\t\t\tif (queueLength > 1) {\r\n\t\t\t\t\tthis.decrease();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tqueueEmptyCount++;\r\n\t\t\t\tif (queueEmptyCount > 5) {\r\n\t\t\t\t\tthis.increase();\r\n\t\t\t\t\tqueueEmptyCount = 0;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t}.bind(this);\r\n\r\n\t\t/**\r\n\t\t * Decreases the FPS within the given boundies.\r\n\t\t */\r\n\t\tthis.decrease = function () {\r\n\r\n\t\t\tif (decreasing || current == minFps) return;\r\n\t\t\t\r\n\t\t\tdecreasing = true;\r\n\t\t\tcurrent = current > stable ? stable : minFps;\r\n\r\n\t\t\tconsole.warn('Decreasing FPS to ' + current);\r\n\t\t\tchange(current, function () { decreasing = false; }.bind(this));\r\n\t\t\t\r\n\t\t}.bind(this);\r\n\t\t\r\n\t\t/**\r\n\t\t * Increases the FPS within the given boundies.\r\n\t\t */\r\n\t\tthis.increase = function () {\r\n\t\t\t\r\n\t\t\tif (increasing || current == maxFps) return;\r\n\t\t\t\r\n\t\t\tincreasing = true;\r\n\t\t\tstable = current++;\r\n\r\n\t\t\tconsole.warn('Increasing FPS to ' + current);\r\n\t\t\tchange(current, function () { increasing = false; }.bind(this));\r\n\r\n\t\t}.bind(this);\r\n\r\n\r\n\t\t/**\r\n\t\t * Changes the FPS to a given level.\r\n\t\t *\r\n\t\t * @param {Number} fps: target FPS level.\r\n\t\t * @param {Function} successCallback: function that is called when the command execution was successful and the result is passed as a parameter.\r\n\t\t * @param {Function} failCallback: function that is called when the command execution has failed and the error is passed as a parameter.\r\n\t\t */\r\n\t\tvar change = function (fps, successCallback, failCallback) {\r\n\t\t\r\n\t\t\tfor (var i = 0, camera; camera = XPMobileSDK.library.VideoConnectionPool.cameras[i]; i++) {\r\n\t\t\t\t\r\n\t\t\t\tif (!camera.videoConnection || !camera.videoConnection.videoId) continue;\r\n\t\t\t\t\r\n\t\t\t\tvar params = {\r\n\t\t\t\t\tVideoId: camera.videoConnection.videoId,\r\n\t\t\t\t\tFps: fps,\r\n\t\t\t\t\tVideoConnection: camera.videoConnection\r\n\t\t\t\t};\r\n\t\t\t\tself.ChangeStream(params, successCallback, failCallback);\r\n\t\t\t\t\r\n\t\t\t}\r\n\t\t\t\r\n\t\t}.bind(this);\r\n\r\n\t};\r\n\t\r\n\t/**\r\n\t * Sends a ControlPTZ command to the server. Controls PTZ Preset. The parameter needs to be a valid preset name, otherwise nothing will happen.\r\n\t * \r\n\t * @method ptzPreset\r\n\t * @param {VideoConnection} videoConnection: the current stream related to the preset this request will activate\r\n\t * @param {String} presetName: the name of the preset to be activated\r\n\t */\r\n\tthis.ptzPreset = function (videoConnection, presetName) {\r\n\t\t\r\n\t\tvar params = {\r\n\t\t\tCameraId: videoConnection.cameraId,\r\n\t\t\tPtzPreset: presetName\r\n\t\t};\r\n\r\n\t\treturn self.sendCommand('ControlPTZ', params, null, controlPTZCallback);\r\n\t};\r\n\r\n\t/**\r\n\t * Sends a ControlPTZ command to the server. Controls PTZMove. Directions are: 'Up', 'Down', 'Left', 'Right', 'UpLeft', 'UpRight', 'DownLeft', 'DownRight', 'ZoomIn', 'ZoomOut', 'Home'.\r\n\t * The camera needs to support PTZ, otherwise nothing will happen.\r\n\t * \r\n\t * @method ptzMove\r\n\t * @param {VideoConnection} videoConnection: the current stream related to the PTZ this request will activate\r\n\t * @param {String} direction: 'Up', 'Down', 'Left', 'Right', 'UpLeft', 'UpRight', 'DownLeft', 'DownRight', 'ZoomIn', 'ZoomOut', 'Home'\r\n\t */\r\n\tthis.ptzMove = function (videoConnection, direction) {\r\n\t\t\r\n\t\tvar params = {\r\n\t\t\tCameraId: videoConnection.cameraId,\r\n\t\t\tPtzMove: direction,\r\n\t\t\tVideoConnection: videoConnection\r\n\t\t};\r\n\r\n\t\treturn self.sendCommand('ControlPTZ', params, null, controlPTZCallback);\r\n\t};\r\n\r\n\t/**\r\n\t * It is used to change the camera orientation by moving it in the direction of the tap.\r\n\t * The reference point of the movement is the center of the screen.\r\n\t * The tap and the reference points are used to calculate the direction and the speed of the camera movement.\r\n\t *\r\n\t * @method tapAndHold\r\n\t * @param params:\r\n\t *          \t\t- CameraId: String\r\n\t *          \t\t- GestureXPercent: the percentage of distance between start and finish [-100:100]\r\n\t *          \t\t- GestureYPercent: the percentage of distance between start and finish [-100:100]\r\n\t */\r\n\tthis.ptzTapAndHold = function (params, successCallback, failCallback) {\r\n\t\tparams['Type'] = 'TapAndHold';\r\n\t\tparams['GestureTimeout'] = 2000;\r\n\r\n\t\treturn self.sendCommand('ControlPTZ', params, { successCallback: successCallback }, ptzTapAndHoldCallback, failCallback);\r\n\t};\r\n\r\n\tvar ptzTapAndHoldCallback = function (connectionRequest) {\r\n\t\tcallbackAfterRequest(connectionRequest, 'Error controlling PTZ', function () {\r\n\t\t\tconnectionRequest.options.successCallback && connectionRequest.options.successCallback();\r\n\t\t});\r\n\t};\r\n\t/**\r\n\t * It is used to change the camera orientation by moving it in the direction of the swipe.\r\n\t * The swipe direction and length are calculated based on the start and end points of the gesture.\r\n\t * The swipe speed is calculated based on the time it took to perform the gesture from the start point to the end point.\r\n\t * The calculated direction defines the direction of the PTZ movement, whereas the length and the speed are used to determine the amount of the PTZ movement.\r\n\t *\r\n\t * @method swipe\r\n\t * @param params:\r\n\t *          \t\t- CameraId: String\r\n\t *          \t\t- GestureXPercent: the percentage of distance between start and finish [-100:100]\r\n\t *          \t\t- GestureYPercent: the percentage of distance between start and finish [-100:100]\r\n\t */\r\n\tthis.ptzSwipe = function (params, gestureDuration) {\r\n\t\tparams['Type'] = 'Swipe';\r\n\t\tparams['GestureDuration'] = gestureDuration;\r\n\r\n\t\treturn self.sendCommand('ControlPTZ', params, null, controlPTZCallback);\r\n\t};\r\n\r\n\t/**\r\n\t * Called after ptzMove and ptzPreset response is returned.\r\n\t */\r\n\tvar controlPTZCallback = function (connectionRequest) {\r\n\t\tcallbackAfterRequest(connectionRequest, 'Error controlling PTZ');\r\n\t};\r\n\r\n\t/**\r\n\t * Sends a ChangeStream command to the server. Controls playback speed as a float. Negative number means backwards. 1.0 means normal speed.\r\n\t * \r\n\t * @method playbackSpeed\r\n\t * @param {VideoConnection} videoConnection\r\n\t * @param {Number} speed\r\n\t */\r\n\tthis.playbackSpeed = function (videoConnection, speed) {\r\n\t\t\r\n\t\tvar params = {\r\n\t\t\tVideoId: videoConnection.videoId,\r\n\t\t\tSpeed: speed,\r\n\t\t\tVideoConnection: videoConnection\r\n\t\t};\r\n\r\n\t\treturn self.ChangeStream(params);\r\n\t};\r\n\r\n\t/**\r\n\t * Sends a ChangeStream command to the server. Seeks to either of: 'DbStart', 'DbEnd', 'PrevSeq', 'NextSeq', 'PrevFrame' or 'NextFrame'.\r\n\t * \r\n\t * @method playbackSeek\r\n\t * @param {VideoConnection} videoConnection\r\n\t * @param {String} seekType: 'DbStart', 'DbEnd', 'PrevSeq', 'NextSeq', 'PrevFrame' or 'NextFrame'\r\n\t */\r\n\tthis.playbackSeek = function (videoConnection, seekType) {\r\n\t\t\r\n\t\tvar params = {\r\n\t\t\tVideoId: videoConnection.videoId,\r\n\t\t\tSeekType: seekType,\r\n\t\t\tVideoConnection: videoConnection\r\n\t\t};\r\n\r\n\t\treturn self.ChangeStream(params);\r\n\t};\r\n\r\n\t/**\r\n\t * Sends a ChangeStream command to the server. Goes to the closest possible match of specific time.\r\n\t * \r\n\t * @method playbackGoTo\r\n\t * @param {VideoConnection} videoConnection\r\n\t * @param {Number} millisecondsSinceUnixEpoch\r\n\t * @param {String} seekType: optional, 'Time' (default), 'TimeOrBefore', 'TimeOrAfter'\r\n\t * @param {Function} successCallback: function that is called when the command execution was successful and the result is passed as a parameter.\r\n\t * @param {Function} failCallback: function that is called when the command execution has failed and the error is passed as a parameter.\r\n\t */\r\n\tthis.playbackGoTo = function (videoConnection, millisecondsSinceUnixEpoch, seekType, successCallback, failCallback) {\r\n\t\t\r\n\t\t// TODO reverse the arguments\r\n\t\t\r\n\t\tvar params = {\r\n\t\t\tVideoId: videoConnection.videoId,\r\n\t\t\tSeekType: seekType || 'Time',\r\n\t\t\tTime: millisecondsSinceUnixEpoch,\r\n\t\t\tVideoConnection: videoConnection\r\n\t\t};\r\n\t\t\r\n\t\treturn self.ChangeStream(params, successCallback, failCallback);\r\n\t};\r\n\t\r\n\t/**\r\n\t * Sends a GetThumbnail command to the server in order to obtain an image representation for a given camera.\r\n\t * \r\n\t * @method getThumbnail\r\n\t * @param {String} cameraId: the unique GUID of the camera\r\n\t * @param {Function} successCallback: function that is called when the command execution was successful and the result is passed as a parameter.\r\n\t * @param {Function} failCallback: function that is called when the command execution has failed and the error is passed as a parameter.\r\n\t */\r\n\tthis.getThumbnail = function (cameraId, successCallback, failCallback) {\r\n\t\t\r\n\t\tvar params = {\r\n\t\t\tCameraId: cameraId,\r\n\t\t\tComprLevel: 70\r\n\t\t};\r\n\r\n\t\treturn self.sendCommand('GetThumbnail', params, { successCallback: successCallback }, getThumbnailCallback, failCallback);\r\n\t};\r\n\r\n\tvar getThumbnailCallback = function (connectionRequest) {\r\n\t\tcallbackAfterRequest(connectionRequest, 'Error getting thumbnail.', function () {\r\n\t\t\t\r\n\t\t\tif (connectionRequest.response.thumbnailBase64) {\r\n\t\t\t\tconnectionRequest.options.successCallback && connectionRequest.options.successCallback(connectionRequest.response.thumbnailBase64);\r\n\t\t\t}\r\n\t\t});\r\n\t};\r\n\t\r\n\t/**\r\n\t * Gets thumbnail by the given camera id and time. \r\n\t * \r\n\t * @param {Object} params - Object containing the following properties:\r\n     * <pre>\r\n\t * - {String} cameraId - Id of the requested camera thumbnail\r\n\t * - {Number} time - Miliseconds since start of UNIX epoch, in UTC.\r\n     * - {Number} width - Max width of the requested camera thumbnail\r\n     * - {Number} height - Max height of the requested camera thumbnail\r\n     * </pre>\r\n\t * @param {Function} successCallback: function that is called when the command execution was successful and the result is passed as a parameter.\r\n\t * @param {Function} failCallback: function that is called when the command execution has failed and the error is passed as a parameter.\r\n\t */\r\n\tthis.getThumbnailByTime = function (params, successCallback, failCallback) {\r\n\t\t\r\n\t\tvar commandParams = {\r\n\t\t    CameraId: params.cameraId,\r\n\t\t    Time: params.time,\r\n\t\t\tSeekType: 'Time'\r\n\t\t};\r\n\r\n\t\tif (params.width) {\r\n\t\t    commandParams.DestWidth = params.width;\r\n\t\t}\r\n\r\n\t\tif (params.height) {\r\n\t\t    commandParams.DestHeight = params.height;\r\n\t\t}\r\n\t\t\r\n\t\treturn self.sendCommand('GetThumbnailByTime', commandParams, { successCallback: successCallback }, getThumbnailByTimeCallback, failCallback);\r\n\t}\r\n\t\r\n\t/**\r\n\t * Called after getThumbnailByTime response is returned.\r\n\t */\r\n\tvar getThumbnailByTimeCallback = function (connectionRequest) {\r\n\t\tcallbackAfterRequest(connectionRequest, 'Error getting thumbnail by time', function () {\r\n\t\t\tconnectionRequest.options.successCallback && \r\n\t\t\tconnectionRequest.options.successCallback(connectionRequest.response.outputParameters.Thumbnail,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t  connectionRequest.response.outputParameters.Timestamp);\r\n\t\t});\r\n\t};\r\n\t\r\n\t/**\r\n\t * Gets the start time of the recordings for a particular camera.\r\n\t * \r\n\t * @method getDBStartTime\r\n\t * @param {String} cameraId\r\n\t * @param {Function} successCallback: function that is called when the command execution was successful and the result is passed as a parameter.\r\n\t * @param {Function} failCallback: function that is called when the command execution has failed and the error is passed as a parameter.\r\n\t */\r\n\tthis.getDBStartTime = function (cameraId, successCallback, failCallback) {\r\n\r\n\t\tvar params = {\r\n\t\t\tCameraId: cameraId,\r\n\t\t\tSeekType: 'DbStart'\r\n\t\t};\r\n\t\t\r\n\t\treturn self.sendCommand('GetRecordingTime', params, { successCallback: successCallback }, getDBStartTimeCallback, failCallback);\r\n\t};\r\n\r\n\t/**\r\n\t * Called after getDBStartTime response is returned.\r\n\t */\r\n\tvar getDBStartTimeCallback = function (connectionRequest) {\r\n\t\tcallbackAfterRequest(connectionRequest, 'Error getting recording time', function () {\r\n\t\t\tconnectionRequest.options.successCallback && connectionRequest.options.successCallback(connectionRequest.response.outputParameters.Time);\r\n\t\t});\r\n\t};\r\n\t\r\n\t/**\r\n\t * Gets the next sequence by given time for the given cameraId. \r\n\t * \r\n\t * @method getNextSequence\r\n\t * @param {String} cameraId\r\n\t * @param {Number} timestamp: milliseconds in UTC, a sequence after this moment will be returned\r\n\t * @param {Function} successCallback: function that is called when the command execution was successful and the result is passed as a parameter.\r\n\t * @param {Function} failCallback: function that is called when the command execution has failed and the error is passed as a parameter.\r\n\t */\r\n\tthis.getNextSequence = function (cameraId, timestamp, successCallback, failCallback) {\r\n\t\t\r\n\t\tvar afterTime = parseInt((new Date().getTime() - timestamp) / 1000);\r\n\t\tafterTime = afterTime < 0 ? 0 : afterTime;\r\n\t\t\r\n\t\tvar params = {\r\n\t\t\tCameraId: cameraId,\r\n\t\t\tSeqType: 'Recording',\r\n\t\t\tTime: timestamp,\r\n\t\t\tAfterTime: afterTime,\r\n\t\t\tAfterCount: 1\r\n\t\t};\r\n\r\n\t\t// debuger.getSequences(params);\r\n\t\treturn self.sendCommand('GetSequences', params, { successCallback: successCallback }, getNextSequenceCallback, failCallback);\r\n\t};\r\n\r\n\tvar getNextSequenceCallback = function (connectionRequest) {\r\n\t\tcallbackAfterRequest(connectionRequest, 'Error getting sequences', function () {\r\n\t\t\tif (connectionRequest.response.sequences.length > 0) {\r\n\t\t\t\tconnectionRequest.options.successCallback && connectionRequest.options.successCallback(connectionRequest.response.sequences[0]);\r\n\t\t\t} else {\r\n\t\t\t\tconnectionRequest.options.successCallback && connectionRequest.options.successCallback(null);\r\n\t\t\t}\r\n\t\t});\r\n\t\t// debuger.result(connectionRequest.response.sequences);\r\n\t};\r\n\r\n\t/**\r\n\t * Gets the previous sequence by given time. \r\n\t * \r\n\t * @method getPrevSequence\r\n\t * @param {String} cameraId\r\n\t * @param {Number} timestamp: milliseconds in UTC, a sequence before this moment will be returned\r\n\t * @param {Function} successCallback: function that is called when the command execution was successful and the result is passed as a parameter.\r\n\t * @param {Function} failCallback: function that is called when the command execution has failed and the error is passed as a parameter.\r\n\t */\r\n\tthis.getPrevSequence = function (cameraId, timestamp, successCallback, failCallback) {\r\n\t\t\r\n\t\tvar params = {\r\n\t\t\tCameraId: cameraId,\r\n\t\t\tSeqType: 'Recording',\r\n\t\t\tTime: timestamp,\r\n\t\t\tBeforeTime: Date.daysToSeconds(30),\r\n\t\t\tBeforeCount: 1\r\n\t\t};\r\n\r\n\t\t// debuger.getSequences(params);\r\n\t\treturn self.sendCommand('GetSequences', params, { successCallback: successCallback }, getPrevSequenceCallback, failCallback);\r\n\t};\r\n\r\n\tvar getPrevSequenceCallback = function (connectionRequest) {\r\n\t\tcallbackAfterRequest(connectionRequest, 'Error getting sequences', function () {\r\n\t\t\tif (connectionRequest.response.sequences.length > 0) {\r\n\t\t\t\tconnectionRequest.options.successCallback && connectionRequest.options.successCallback(connectionRequest.response.sequences[0]);\r\n\t\t\t} else {\r\n\t\t\t\tconnectionRequest.options.successCallback && connectionRequest.options.successCallback(null);\r\n\t\t\t}\r\n\t\t});\r\n\t\t// debuger.result(connectionRequest.response.sequences);\r\n\t};\r\n\t\r\n\t/**\r\n\t * Gets all the sequences in the given interval of time.\r\n\t * \r\n\t * @method getSequenceInInterval\r\n\t * @param {String} cameraId\r\n\t * @param {Number} startTime: milliseconds in UTC, the start time of the interval\r\n\t * @param {Number} endTime: milliseconds in UTC, the end time of the interval\r\n\t * @param {String} investigationId - The id of the investigation (export) to be used for extracting the sequences.\r\n\t * @param {Function} successCallback: function that is called when the command execution was successful and the result is passed as a parameter.\r\n\t * @param {Function} failCallback: function that is called when the command execution has failed and the error is passed as a parameter.\r\n\t */\r\n\tthis.getSequencesInInterval = function (cameraId, startTime, endTime, investigationId, successCallback, failCallback) {\r\n\t\t\r\n\t\tvar params = {\r\n\t\t\tCameraId: cameraId,\r\n\t\t\tSeqType: 'Recording',\r\n\t\t\tTime: startTime,\r\n\t\t\tAfterTime: parseInt((endTime - startTime) / 1000),\r\n\t\t\tAfterCount: 10000,\r\n\t\t\tInvestigationId: investigationId\r\n\t\t};\r\n\r\n\t\t// debuger.getSequences(params);\r\n\t\treturn self.sendCommand('GetSequences', params, { successCallback: successCallback }, getSequencesInIntervalCallback, failCallback);\r\n\t\t\r\n\t};\r\n\r\n\tvar getSequencesInIntervalCallback = function (connectionRequest) {\r\n\t\tcallbackAfterRequest(connectionRequest, 'Error getting sequences', function () {\r\n\t\t\tconnectionRequest.options.successCallback && connectionRequest.options.successCallback(connectionRequest.response.sequences);\r\n\t\t});\r\n\t\t// debuger.result(connectionRequest.response.sequences);\r\n\t};\r\n\r\n\t/**\r\n\t * Starts a new video export.\r\n\t * \r\n\t * @method startVideoExport\r\n\t * @param {String} cameraId: indicates the camera this export will be extracted from\r\n\t * @param {Number} startTime: timestamp in UTC, the initial time of the export\r\n\t * @param {Number} endTime: timestamp in UTC, the end time of the export\r\n\t * @param {Function} successCallback: function that is called when the command execution was successful and the result is passed as a parameter.\r\n\t * @param {Function} failCallback: function that is called when the command execution has failed and the error is passed as a parameter.\r\n\t */\r\n\tthis.startVideoExport = function (cameraId, startTime, endTime, successCallback, failCallback) {\r\n\t\t\r\n\t\tvar params = {\r\n\t\t\tCameraId: cameraId,\r\n\t\t\tStartTime: startTime,\r\n\t\t\tEndTime: endTime,\r\n\t\t\tType: 'Avi'\r\n\t\t};\r\n\r\n\t\treturn self.sendCommand('StartExport', params, { successCallback: successCallback }, startExportCallback, failCallback);\r\n\t};\r\n\r\n\t/**\r\n\t * Starts a new still image export.\r\n\t * \r\n\t * @method startImageExport\r\n\t * @param {String} cameraId: indicates the camera this export will be extracted from\r\n\t * @param {Number} startTime: timestamp in UTC, the time of the still image\r\n\t * @param {Function} successCallback: function that is called when the command execution was successful and the result is passed as a parameter.\r\n\t * @param {Function} failCallback: function that is called when the command execution has failed and the error is passed as a parameter.\r\n\t */\r\n\tthis.startImageExport = function (cameraId, startTime, successCallback, failCallback) {\r\n\r\n\t\tvar params = {\r\n\t\t\tCameraId: cameraId,\r\n\t\t\tStartTime: startTime,\r\n\t\t\tType: 'Jpeg'\r\n\t\t};\r\n\r\n\t\treturn self.sendCommand('StartExport', params, { successCallback: successCallback }, startExportCallback, failCallback);\r\n\t};\r\n\t\r\n\t/**\r\n\t * Restarts an exports that has previously failed. Requires a valid exportId.\r\n\t * \r\n\t * @method restartErroneousExport\r\n\t * @param {String} exportId: a valid exportId of a previously failed export\r\n\t */\r\n\tthis.restartErroneousExport = function(exportId, successCallback, failCallback) {\r\n\t\t\r\n\t\tvar params = {\r\n\t\t\tExportId: exportId\r\n\t\t};\r\n\t\t\r\n\t\treturn self.sendCommand('StartExport', params, { successCallback: successCallback }, startExportCallback, failCallback);\r\n\t};\r\n\t\r\n\t/**\r\n\t * Called after startVideoExport response is returned.\r\n\t */\r\n\tvar startExportCallback = function (connectionRequest) {\r\n\t\tcallbackAfterRequest(connectionRequest, 'Error starting export.', function () {\r\n\t\t\tconnectionRequest.options.successCallback && connectionRequest.options.successCallback(connectionRequest.response.outputParameters.ExportId);\r\n\t\t});\r\n\t};\r\n\r\n\t/**\r\n\t * Gets the exports for the currently logged user.\r\n\t *\r\n\t * @method getUserExports\r\n\t * @param {Function} successCallback: function that is called when the command execution was successful and the result is passed as a parameter.\r\n\t * @param {Function} failCallback: function that is called when the command execution has failed and the error is passed as a parameter.\r\n\t */\r\n\tthis.getUserExports = function (successCallback, failCallback) {\r\n\r\n\t\tvar params = {\r\n\t\t\tExportId: '00000000-0000-0000-0000-000000000000'\r\n\t\t};\r\n\r\n\t\treturn self.sendCommand('GetExport', params, { successCallback: successCallback }, getUserExportsCallback, failCallback);\r\n\t};\r\n\t\r\n\t/**\r\n\t * Called after getUserExports response is returned.\r\n\t */\r\n\tvar getUserExportsCallback = function (connectionRequest) {\r\n\t\tcallbackAfterRequest(connectionRequest, 'Error getting user exports', function () {\r\n\t\t\tconnectionRequest.options.successCallback && connectionRequest.options.successCallback(connectionRequest.response.exports);\r\n\t\t});\r\n\t};\r\n\r\n\t/**\r\n\t * Gets all exports.\r\n\t * \r\n\t * @method getAllExports\r\n\t * @param {Function} successCallback: function that is called when the command execution was successful and the result is passed as a parameter.\r\n\t * @param {Function} failCallback: function that is called when the command execution has failed and the error is passed as a parameter.\r\n\t */\r\n\tthis.getAllExports = function (successCallback, failCallback) {\r\n\r\n\t\tvar params = {\r\n\t\t\tExportId: '{A3B9C5FB-FAAD-42C8-AB73-B79D6FFFDBC1}'\r\n\t\t};\r\n\r\n\t\treturn self.sendCommand('GetExport', params, { successCallback: successCallback }, getAllExportsCallback, failCallback);\r\n\t};\r\n\t\r\n\t/**\r\n\t * Called after getAllExports response is returned.\r\n\t */\r\n\tvar getAllExportsCallback = function (connectionRequest) {\r\n\t\tcallbackAfterRequest(connectionRequest, 'Error getting all exports', function () {\r\n\t\t\tconnectionRequest.options.successCallback && connectionRequest.options.successCallback(connectionRequest.response.exports);\r\n\t\t});\r\n\t};\r\n\r\n\t/**\r\n\t * Create a temporary disposable download link.\r\n\t * \r\n\t * @method createExportDownloadLink\r\n\t * @param {Function} successCallback: function that is called when the command execution was successful and the result is passed as a parameter.\r\n\t * @param {Function} failCallback: function that is called when the command execution has failed and the error is passed as a parameter.\r\n\t */\r\n\tthis.createExportDownloadLink = function (exportId, successCallback, failCallback) {\r\n\r\n\t\tvar params = {\r\n\t\t\tExportId: exportId\r\n\t\t};\r\n\r\n\t\treturn self.sendCommand('CreateExportDownloadLink', params, { successCallback: successCallback }, createExportDownloadLinkCallback, failCallback);\r\n\t};\r\n\r\n\t/**\r\n\t * Called after createExportDownloadLink response is returned.\r\n\t */\r\n\tvar createExportDownloadLinkCallback = function (connectionRequest) {\r\n\t\tcallbackAfterRequest(connectionRequest, 'Error getting export download link', function () {\r\n\t\t\tconnectionRequest.options.successCallback && connectionRequest.options.successCallback(connectionRequest.response.outputParameters.ExportLink);\r\n\t\t});\r\n\t};\r\n\r\n\r\n\t/**\r\n\t * Gets and export by id.\r\n\t * \r\n\t * @method getExport\r\n\t * @param {String} id: the uniq id of the export.\r\n\t * @param {Function} successCallback: function that is called when the command execution was successful and the result is passed as a parameter.\r\n\t * @param {Function} failCallback: function that is called when the command execution has failed and the error is passed as a parameter.\r\n\t */\r\n\tthis.getExport = function (id, successCallback, failCallback) {\r\n\r\n\t\tvar params = {\r\n\t\t\tExportId: id\r\n\t\t};\r\n\r\n\t\treturn self.sendCommand('GetExport', params, { successCallback: successCallback }, getExportCallback, failCallback);\r\n\t};\r\n\r\n\r\n\t\r\n\t/**\r\n\t * Called after getExport response is returned.\r\n\t */\r\n\tvar getExportCallback = function (connectionRequest) {\r\n\t\tcallbackAfterRequest(connectionRequest, 'Error getting export', function () {\r\n\t\t\t\r\n\t\t\tif (connectionRequest.response.exports.length == 0) {\r\n\t\t\t\tconnectionRequest.options.successCallback && connectionRequest.options.successCallback(null);\r\n\t\t\t\treturn ;\r\n\t\t\t}\r\n\t\t\tconnectionRequest.options.successCallback && connectionRequest.options.successCallback(connectionRequest.response.exports[0]);\r\n\t\t});\r\n\t};\r\n\r\n\t/**\r\n\t * Deletes an export by id. \r\n\t * \r\n\t * @method deleteExport\r\n\t * @param {String} id: the unique id of the export.\r\n\t * @param {Function} successCallback: function that is called when the command execution was successful and the result is passed as a parameter.\r\n\t * @param {Function} failCallback: function that is called when the command execution has failed and the error is passed as a parameter.\r\n\t */\r\n\tthis.deleteExport = function (id, successCallback, failCallback) {\r\n\r\n\t\tvar params = {\r\n\t\t\tExportId: id\r\n\t\t};\r\n\r\n\t\treturn self.sendCommand('DeleteExport', params, { successCallback: successCallback }, deleteExportCallback, failCallback);\r\n\t};\r\n\r\n\t/**\r\n\t * Called after deleteExport response is returned.\r\n\t */\r\n\tvar deleteExportCallback = function (connectionRequest) {\r\n\t\tcallbackAfterRequest(connectionRequest, 'Error deleting export.', function () {\r\n\t\t\tconnectionRequest.options.successCallback && connectionRequest.options.successCallback();\r\n\t\t});\r\n\t};\r\n\t\r\n\t/**\r\n\t * Sends a GetOutputsAndEvents command to the server. \r\n\t * \r\n\t * @method getOutputsAndEvents\r\n\t * @param {Function} successCallback: function that is called when the command execution was successful and the result is passed as a parameter.\r\n\t * @param {Function} failCallback: function that is called when the command execution has failed and the error is passed as a parameter.\r\n\t */\r\n\tthis.getOutputsAndEvents = function(successCallback, failCallback) {\r\n\r\n\t\tvar params = {\r\n\t\t\tCameraId: '' // empty string for all cameras\r\n\t\t};\r\n\r\n\t\treturn self.sendCommand('GetOutputsAndEvents', params, { successCallback: successCallback }, getOutputsAndEventsCallback, failCallback);\r\n\t};\r\n\t\r\n\tvar getOutputsAndEventsCallback = function(connectionRequest) {\r\n\t\tcallbackAfterRequest(connectionRequest, 'Error getting outputs and events', function () {\r\n\t\t\tconnectionRequest.options.successCallback && connectionRequest.options.successCallback(connectionRequest.response.actions);\r\n\t\t});\r\n\t};\r\n\r\n\t/**\r\n\t * Gets server statistic (CPU load, network trafic etc.)\r\n\t * \r\n\t * @method getServerStatus\r\n\t * @param {Function} successCallback: function that is called when the command execution was successful and the result is passed as a parameter.\r\n\t * @param {Function} failCallback: function that is called when the command execution has failed and the error is passed as a parameter.\r\n\t */\r\n\tthis.getServerStatus = function(successCallback, failCallback) {\r\n\t\t\r\n\t    return self.sendCommand('GetServerStatus', {}, { successCallback: successCallback }, getServerStatusCallback, failCallback);\r\n\t};\r\n\r\n    /**\r\n\t * Called after getServerStatus command is executed\r\n\t * \r\n\t * @param \t\tconnectionRequest\t\tobject\t\tResponse from AXAJ call\r\n\t */\r\n\tvar getServerStatusCallback = function(connectionRequest) {\r\n\t\tcallbackAfterRequest(connectionRequest, 'Error getting server status', function () {\r\n\t\t\tconnectionRequest.options.successCallback && connectionRequest.options.successCallback(connectionRequest.response.ServerStatus);\r\n\t\t});\r\n\t};\r\n\t\r\n\t/**\r\n\t * Triggers an output or event.\r\n\t * \r\n\t * @method {triggerOutputOrEvent}\r\n\t * @param {String} objectId: the objectId of the item\r\n\t * @param {String} triggerType: 'TriggerOutput' or 'TriggerEvent'\r\n\t * @param {Function} successCallback: function that is called when the command execution was successful and the result is passed as a parameter.\r\n\t * @param {Function} failCallback: function that is called when the command execution has failed and the error is passed as a parameter.\r\n\t */\r\n\tthis.triggerOutputOrEvent = function(objectId, triggerType, successCallback, failCallback) {\r\n\t\t\r\n\t\tvar params = {\r\n\t\t\tObjectId: objectId,\r\n\t\t\tTriggerType : triggerType\r\n\t\t};\r\n\t\t\r\n\t\treturn self.sendCommand('RequestActivation', params, { successCallback: successCallback }, triggerOutputOrEventCallback, failCallback);\r\n\t};\r\n\t\r\n\t/**\r\n\t * If the command succeeded, the connectionRequest.options.successCallback is called without arguments if defined.\r\n\t * If the command failed, the connectionRequest.options.successCallback is called with the error code if defined.\r\n\t */\r\n\tvar triggerOutputOrEventCallback = function(connectionRequest) {\r\n\t\tcallbackAfterRequest(connectionRequest, 'Error triggering output or event.', function () {\r\n\t\t\tconnectionRequest.options.successCallback && connectionRequest.options.successCallback();\r\n\t\t});\r\n\t};\r\n\t\r\n\t/**\r\n\t * Gets the camera capabilities - export, live, playback, ptz, presets.\r\n\t */\r\n\tthis.getCameraCapabilities = function (cameraId, successCallback, failCallback) {\r\n\t\t\r\n\t\tvar params = {\r\n\t\t\tCameraId: cameraId\r\n\t\t};\r\n\t\t\r\n\t\treturn self.sendCommand('GetCapabilities', params, { successCallback: successCallback }, getCameraCapabilitiesCallback, failCallback);\r\n\t};\r\n\t\r\n\t/**\r\n\t * Called after getCameraCapabilities response is returned.\r\n\t */\r\n\tvar getCameraCapabilitiesCallback = function (connectionRequest) {\r\n\t\tcallbackAfterRequest(connectionRequest, 'Error getting camera capabilities', function () {\r\n\t\t\tconnectionRequest.options.successCallback && connectionRequest.options.successCallback(connectionRequest.response.outputParameters);\r\n\t\t});\r\n\t};\r\n\t\r\n\t/**\r\n\t * Asks server to prepare URL for uploading.\r\n\t * \r\n\t * @param {Object} params: Parameters to sent to the server\r\n\t * @param {Function} successCallback: function that is called when the command execution was successful and the result is passed as a parameter.\r\n\t * @param {Function} failCallback: function that is called when the command execution has failed and the error is passed as a parameter.\r\n\t */\r\n\tthis.prepareUpload =  function(params, successCallback, failCallback) {\r\n\t    return self.sendCommand('PrepareUpload', params, { successCallback: successCallback }, prepareUploadCallback, failCallback);\r\n\t};\r\n\r\n    /**\r\n\t * Called after prepareUpload command is executed\r\n\t * \r\n\t * @param \t\tconnectionRequest\t\tobject\t\tResponse from AXAJ call\r\n\t */\r\n\tvar prepareUploadCallback = function(connectionRequest) {\r\n\t\tcallbackAfterRequest(connectionRequest, 'Error preparing upload', function () {\r\n\t\t\tconnectionRequest.options.successCallback && connectionRequest.options.successCallback(connectionRequest.response.outputParameters);\r\n\t\t});\r\n\t};\r\n\t\r\n\t/**\r\n\t * Get the status of the upload by given UploadID\r\n\t * \r\n\t * @param {Object} params: Parameters to sent to the server\r\n\t * @param {Function} successCallback: function that is called when the command execution was successful and the result is passed as a parameter.\r\n\t * @param {Function} failCallback: function that is called when the command execution has failed and the error is passed as a parameter.\r\n\t */\r\n\tthis.getUploadStatus = function(params, successCallback, failCallback) {\r\n\t    return self.sendCommand('GetUploadStatus', params, { successCallback: successCallback }, getUploadStatusCallback, failCallback);\r\n\t};\r\n\r\n    /**\r\n\t * Called after getUploadStatus command is executed\r\n\t * \r\n\t * @param \t\tconnectionRequest\t\tobject\t\tResponse from AXAJ call\r\n\t */\r\n\tvar getUploadStatusCallback = function(connectionRequest) {\r\n\t\tcallbackAfterRequest(connectionRequest, 'Error getting upload status', function () {\r\n\t\t\tconnectionRequest.options.successCallback && connectionRequest.options.successCallback(connectionRequest.response.outputParameters);\r\n\t\t});\r\n\t};\r\n\t\r\n\t/**\r\n\t * Get new challenges from server\r\n\t * \r\n\t * @param {Object} params: Parameters to sent to the server\r\n\t * @param {Function} successCallback: function that is called when the command execution was successful and the result is passed as a parameter.\r\n\t * @param {Function} failCallback: function that is called when the command execution has failed and the error is passed as a parameter.\r\n\t */\r\n\tthis.requestChallenges = function(params, successCallback, failCallback) {\r\n\t    return self.sendCommand('RequestChallenges', params, { successCallback: successCallback }, requestChallengesCallback, failCallback);\r\n\t};\r\n\t\r\n\t /**\r\n\t * Called after RequestChallenges command is executed\r\n\t * \r\n\t * @param \t\tconnectionRequest\t\tobject\t\tResponse from AXAJ call\r\n\t */\r\n\tvar requestChallengesCallback = function(connectionRequest) {\r\n\t\tcallbackAfterRequest(connectionRequest, 'Error getting challenges.', function () {\r\n\t\t\tconnectionRequest.options.successCallback && connectionRequest.options.successCallback(connectionRequest.response.outputParameters);\r\n\t\t});\r\n\t};\r\n\t\r\n\t/**\r\n\t * Create playback controller\r\n\t * \r\n\t * @param {Object} params: Parameters to sent to the server\r\n\t * @param {Function} successCallback: function that is called when the command execution was successful and the result is passed as a parameter.\r\n\t * @param {Function} failCallback: function that is called when the command execution has failed and the error is passed as a parameter.\r\n\t */\r\n\tthis.createPlaybackController = function(params, successCallback, failCallback) {\r\n\t\tparams.MethodType = 'Push'; \r\n\t\tparams.CloseOldControllers = 'Yes';\r\n\t\treturn self.sendCommand('CreatePlaybackController', params, { successCallback: successCallback }, createPlaybackControllerCallback, failCallback);\r\n\t};\r\n\t\r\n\t/**\r\n\t * Called when CreatePlaybackController reposne is received\r\n\t * \r\n\t * @param \t\tconnectionRequest\t\tobject\t\tResponse from AXAJ call\r\n\t */\r\n\tvar createPlaybackControllerCallback = function(connectionRequest) {\r\n\t\r\n\t\tvar connectionResponse = connectionRequest.response;\r\n\t\tvar videoConnection = new XPMobileSDK.library.VideoConnection(\r\n\t\t\tconnectionResponse.outputParameters.PlaybackControllerId,\r\n\t\t\tconnectionRequest,\r\n\t\t\t{\r\n\t\t\t\tonClose: function () {},\r\n\t\t\t\tonRestart: function () {},\r\n\t\t\t\tonPushFailed: function () {}\r\n\t\t\t}\r\n\t\t);\r\n\t\tcallbackAfterRequest(connectionRequest, 'Error creating playback controller', function () {\r\n\t\t\tconnectionRequest.options.successCallback && connectionRequest.options.successCallback(videoConnection);\r\n\t\t});\r\n\t};\r\n\t\r\n\t/**\r\n\t * Change several streams at a time\r\n\t * \r\n\t * @param {Object} params: Parameters to sent to the server\r\n\t * @param {Function} successCallback: function that is called when the command execution was successful and the result is passed as a parameter.\r\n\t * @param {Function} failCallback: function that is called when the command execution has failed and the error is passed as a parameter.\r\n\t */\r\n\tthis.changeMultipleStreams = function(params, successCallback, failCallback) {\r\n\t    return self.sendCommand('ChangeMultipleStreams', params, { successCallback: successCallback }, changeMultipleStreamsCallback, failCallback);\r\n\t};\r\n\t\r\n\t /**\r\n\t * Called when ChangeMultipleStreams reposne is received\r\n\t * \r\n\t * @param \t\tconnectionRequest\t\tobject\t\tResponse from AXAJ call\r\n\t */\r\n\tvar changeMultipleStreamsCallback = function(connectionRequest) {\r\n\t\tcallbackAfterRequest(connectionRequest, 'Error getting multiple stream data', function () {\r\n\t\t\tconnectionRequest.options.successCallback && connectionRequest.options.successCallback(connectionRequest.response.outputParameters);\r\n\t\t});\r\n\t};\r\n\t\r\n\t/**\r\n\t * Get all investigations from server\r\n\t * \r\n\t * @param {Function} successCallback: function that is called when the command execution was successful and the result is passed as a parameter.\r\n\t * @param {Function} failCallback: function that is called when the command execution has failed and the error is passed as a parameter.\r\n\t */\r\n\tthis.getAllInvestigations = function(successCallback, failCallback) {\r\n\t\tvar params = {\r\n\t\t\t\tItemId: '{A3B9C5FB-FAAD-42C8-AB73-B79D6FFFDBC1}'\r\n\t\t};\r\n\t\treturn self.sendCommand('GetInvestigation', params, { successCallback: successCallback }, getInvestigationsCallback, failCallback);\r\n\t};\r\n\t\r\n\t/**\r\n\t * Get user investigations from server\r\n\t * \r\n\t * @param {Function} successCallback: function that is called when the command execution was successful and the result is passed as a parameter.\r\n\t * @param {Function} failCallback: function that is called when the command execution has failed and the error is passed as a parameter.\r\n\t */\r\n\tthis.getUserInvestigations = function(successCallback, failCallback) {\r\n\t\tvar params = {\r\n\t\t\t\tItemId: '00000000-0000-0000-0000-000000000000'\r\n\t\t};\r\n\t\treturn self.sendCommand('GetInvestigation', params, { successCallback: successCallback }, getInvestigationsCallback, failCallback);\r\n\t};\r\n\t\r\n\t/**\r\n\t * Called when getAllInvestigations or getUserInvestigations reponse is received\r\n\t * \r\n\t * @param \t\tconnectionRequest\t\tobject\t\tResponse from AXAJ call\r\n\t */\r\n\tvar getInvestigationsCallback = function(connectionRequest) {\r\n\t\tcallbackAfterRequest(connectionRequest, 'Error getting investigations', function () {\r\n\t\t\tconnectionRequest.options.successCallback && connectionRequest.options.successCallback(connectionRequest.response.items);\r\n\t\t});\r\n\t};\r\n\t\r\n\t/**\r\n\t * Gets a specific investigation by its id\r\n\t * \r\n\t * @param id: string, the investigation id\r\n\t * @param {Function} successCallback: function that is called when the command execution was successful and the result is passed as a parameter.\r\n\t * @param {Function} failCallback: function that is called when the command execution has failed and the error is passed as a parameter.\r\n\t */\r\n\tthis.getInvestigation = function(id, successCallback, failCallback) {\r\n\t\tvar params = {\r\n\t\t\t\tItemId: id\r\n\t\t};\r\n\t\treturn self.sendCommand('GetInvestigation', params, { successCallback: successCallback }, getInvestigationCallback, failCallback);\r\n\t};\r\n\t\r\n\t/**\r\n\t * Called when getInvestigation reponse is received\r\n\t * \r\n\t * @param \t\tconnectionRequest\t\tobject\t\tResponse from AXAJ call\r\n\t */\r\n\tvar getInvestigationCallback = function(connectionRequest) {\r\n\t\tcallbackAfterRequest(connectionRequest, 'Error getting investigation', function () {\r\n\t\t\tconnectionRequest.options.successCallback && connectionRequest.options.successCallback(connectionRequest.response.items[0]);\r\n\t\t});\r\n\t};\r\n\t\r\n\t/**\r\n\t * Create investigation to the server\r\n\t * \r\n\t * @param {Object} params: Parameters to sent to the server\r\n\t * @param {Function} successCallback: function that is called when the command execution was successful and the result is passed as a parameter.\r\n\t * @param {Function} failCallback: function that is called when the command execution has failed and the error is passed as a parameter.\r\n\t */\r\n\tthis.createInvestigation = function(params, successCallback, failCallback) {\r\n\t    return self.sendCommand('CreateInvestigation', params, { successCallback: successCallback }, createInvestigationCallback, failCallback);\r\n\t};\r\n\t\r\n\t /**\r\n\t * Called when CreateInvestigation reposne is received\r\n\t * \r\n\t * @param \t\tconnectionRequest\t\tobject\t\tResponse from AXAJ call\r\n\t */\r\n\tvar createInvestigationCallback = function(connectionRequest) {\r\n\t\tcallbackAfterRequest(connectionRequest, 'Error creating investigation to the server.', function () {\r\n\t\t\tconnectionRequest.options.successCallback && connectionRequest.options.successCallback(connectionRequest.response.outputParameters);\r\n\t\t});\r\n\t};\r\n\t\r\n\t/**\r\n\t * Update investigation on the server\r\n\t * \r\n\t * @param {Object} params: Parameters to sent to the server\r\n\t * @param {Function} successCallback: function that is called when the command execution was successful and the result is passed as a parameter.\r\n\t * @param {Function} failCallback: function that is called when the command execution has failed and the error is passed as a parameter.\r\n\t */\r\n\tthis.updateInvestigation = function(params, successCallback, failCallback) {\r\n\t    return self.sendCommand('UpdateInvestigation', params, { successCallback: successCallback }, updateInvestigationCallback, failCallback);\r\n\t};\r\n\t\r\n\t/**\r\n\t * Update investigation data on the server (avoids reexport).\r\n\t * \r\n\t * @param {Object} params: Parameters to sent to the server\r\n\t * @param {Function} successCallback: function that is called when the command execution was successful and the result is passed as a parameter.\r\n\t * @param {Function} failCallback: function that is called when the command execution has failed and the error is passed as a parameter.\r\n\t */\r\n\tthis.updateInvestigationData = function(params, successCallback, failCallback) {\r\n\t    return self.sendCommand('UpdateInvestigationData', params, { successCallback: successCallback }, updateInvestigationCallback, failCallback);\r\n\t};\r\n\t\r\n\t /**\r\n\t * Called when CreateInvestigation reposne is received\r\n\t * \r\n\t * @param \t\tconnectionRequest\t\tobject\t\tResponse from AXAJ call\r\n\t */\r\n\tvar updateInvestigationCallback = function(connectionRequest) {\r\n\t\tcallbackAfterRequest(connectionRequest, 'Error updating investigation to the server.', function () {\r\n\t\t\tconnectionRequest.options.successCallback && connectionRequest.options.successCallback(connectionRequest.response.outputParameters);\r\n\t\t});\r\n\t};\r\n\t\r\n\t/**\r\n\t * Delete investigation from the server\r\n\t * \r\n\t * @param {String} investigationId: Id of investigation to delete\r\n\t * @param {Function} successCallback: function that is called when the command execution was successful and the result is passed as a parameter.\r\n\t * @param {Function} failCallback: function that is called when the command execution has failed and the error is passed as a parameter.\r\n\t */\r\n\tthis.deleteInvestigation = function(investigationId, successCallback, failCallback) {\r\n\t    return self.sendCommand('DeleteInvestigation', { ItemId: investigationId }, { successCallback: successCallback }, deleteInvestigationCallback, failCallback);\r\n\t};\r\n\t\r\n\t /**\r\n\t * Called when DeleteInvestigation reposne is received\r\n\t * \r\n\t * @param \t\tconnectionRequest\t\tobject\t\tResponse from AXAJ call\r\n\t */\r\n\tvar deleteInvestigationCallback = function(connectionRequest) {\r\n\t\tcallbackAfterRequest(connectionRequest, 'Error deleteing investigation from the server.', function () {\r\n\t\t\tconnectionRequest.options.successCallback && connectionRequest.options.successCallback(!connectionRequest.response.isError);\r\n\t\t});\r\n\t};\r\n\t\r\n\t/**\r\n\t * Cancels investigation creation when in progress.\r\n\t * \r\n\t * @param \t\tinvestigationId\t\t\tobject\t\tId of investigation to delete\r\n\t */\r\n\tthis.cancelInvestigation = function(investigationId) {\r\n\t\treturn self.sendCommand('CancelInvestigationUpdate', { ItemId: investigationId }, null, cancelInvestigationCallback);\r\n\t};\r\n\t\r\n\t\r\n\t/**\r\n\t * Called when CancelInvestigationUpdate reposne is received\r\n\t * \r\n\t * @param \t\tconnectionRequest\t\tobject\t\tResponse from AXAJ call\r\n\t */\r\n\tvar cancelInvestigationCallback = function(connectionRequest) {\r\n\t\tcallbackAfterRequest(connectionRequest, 'Error canceling investigation update');\r\n\t};\r\n\t\r\n\t/**\r\n\t * Starts an investigation export.\r\n\t * \r\n\t * @method startInvestigationExport\r\n\t * @param {String} investigationId: the uniq id of the investigation.\r\n\t * @param {String} exportType: the type of the export: DB, AVI, MKV\r\n\t * @param {String} includeAudio - YES/NO - flag whether to include audio in the investigation export\r\n\t * @param {String} password - password used to encrypt exported video\r\n\t * @param {Function} successCallback: function that is called when the command execution was successful and the result is passed as a parameter.\r\n\t * @param {Function} failCallback: function that is called when the command execution has failed and the error is passed as a parameter.\r\n\t */\r\n\tthis.startInvestigationExport = function (investigationId, exportType, includeAudio, password, successCallback, failCallback) {\r\n\t\t\r\n\t\tvar params = {\r\n\t\t\tInvestigationId: investigationId,\r\n\t\t\tExportType: exportType,\r\n\t\t\tIncludeAudio: includeAudio\r\n\t\t};\r\n\t\tif(password){\r\n\t\t\tparams.Password = password;\r\n\t\t}\r\n\t\t\r\n\t\treturn self.sendCommand('StartInvestigationExport', params, { successCallback: successCallback }, startInvestigationExportCallback, failCallback);\r\n\t};\r\n\t\r\n\t/**\r\n\t * Called when startInvestigationExport response is returned\r\n\t * \r\n\t * @param \t\tconnectionRequest\t\tobject\t\tResponse from AXAJ call\r\n\t */\r\n\tvar startInvestigationExportCallback = function(connectionRequest) {\r\n\t\tcallbackAfterRequest(connectionRequest, 'Error starting investigation export.', function () {\r\n\t\t\tconnectionRequest.options.successCallback && connectionRequest.options.successCallback(connectionRequest.response.outputParameters.ExportId);\r\n\t\t});\r\n\t};\r\n\t\r\n\tthis.deleteInvestigationExport = function(investigationId, exportType, successCallback, failCallback) {\r\n\t\t\r\n\t\tvar params = {\r\n\t\t\t\tInvestigationId: investigationId,\r\n\t\t\t\tExportType: exportType\r\n\t\t};\r\n\t\t\r\n\t\treturn self.sendCommand('DeleteInvestigationExport', params, { successCallback: successCallback }, deleteInvestigationExportCallback, failCallback);\r\n\t};\r\n\t\r\n\t/**\r\n\t * Called when deleteInvestigationExport response is returned\r\n\t * \r\n\t * @param \t\tconnectionRequest\t\tobject\t\tResponse from AXAJ call\r\n\t */\r\n\tvar deleteInvestigationExportCallback = function(connectionRequest) {\r\n\t\tcallbackAfterRequest(connectionRequest, 'Error deleting investigation export.', connectionRequest.options.successCallback);\r\n\t};\r\n\t\r\n\t/**\r\n\t * Get alarms from server.\r\n\t *\r\n\t * @param {Object} params: Parameters to sent to the server\r\n\t * @param {Function} successCallback: function that is called when the command execution was successful and the result is passed as a parameter.\r\n\t * @param {Function} failCallback: function that is called when the command execution has failed and the error is passed as a parameter.\r\n\t */\r\n\tthis.getAlarmList = function(params, successCallback, failCallback) {\r\n\t\t\r\n\t\tvar params = {\r\n\t\t\t\tMyAlarms: params.MyAlarms || 'No',\r\n\t\t\t\tTimestamp: params.Timestamp,\r\n\t\t\t\tOperator: 'LessThan',\r\n\t\t\t\tCount: params.Count,\r\n\t\t\t\tPriority: params.Priority,\r\n\t\t\t\tState: params.State\r\n\t\t};\r\n\t\t\r\n\t\treturn self.sendCommand('GetAlarmList', params, { successCallback: successCallback }, getAlarmsCallback, failCallback);\r\n\t};\r\n\t\r\n\t/**\r\n\t * Called when GetAlarmList reponse is received\r\n\t * \r\n\t * @param \t\tconnectionRequest\t\tobject\t\tResponse from AXAJ call\r\n\t */\r\n\tvar getAlarmsCallback = function(connectionRequest) {\r\n\t\tcallbackAfterRequest(connectionRequest, 'Error getting alarms', function () {\r\n\t\t\tconnectionRequest.options.successCallback && connectionRequest.options.successCallback(connectionRequest.response.items);\r\n\t\t});\r\n\t};\r\n\t\r\n\t/**\r\n\t * Gets a single alarm. \r\n\t *\r\n\t * @param {Object} params: Parameters to sent to the server\r\n\t * @param {Function} successCallback: function that is called when the command execution was successful and the result is passed as a parameter.\r\n\t * @param {Function} failCallback: function that is called when the command execution has failed and the error is passed as a parameter.\r\n\t */\r\n\tthis.getAlarm = function(alarmId, successCallback, failCallback) {\r\n\t\t\r\n\t\tvar params = {\r\n\t\t\t\tAlarmId: alarmId\r\n\t\t};\r\n\t\t\r\n\t\treturn self.sendCommand('GetAlarmList', params, { successCallback: successCallback }, getAlarmCallback, failCallback);\r\n\t};\r\n\t\r\n\t/**\r\n\t * Called when GetAlarmList reponse is received\r\n\t * \r\n\t * @param \t\tconnectionRequest\t\tobject\t\tResponse from AXAJ call\r\n\t */\r\n\tvar getAlarmCallback = function(connectionRequest) {\r\n\t\tcallbackAfterRequest(connectionRequest, 'Error getting alarm', function () {\r\n\t\t\tconnectionRequest.options.successCallback && connectionRequest.options.successCallback(connectionRequest.response.items[0]);\r\n\t\t});\r\n\t};\r\n\t\r\n\t/**\r\n\t * Updates an alarm.\r\n\t *\r\n\t * @param params\r\n\t * @param {Function} successCallback: function that is called when the command execution was successful and the result is passed as a parameter.\r\n\t * @param {Function} failCallback: function that is called when the command execution has failed and the error is passed as a parameter.\r\n\t */\r\n\tthis.updateAlarm = function(params, successCallback, failCallback) {\r\n\t    return self.sendCommand('UpdateAlarm', params, { successCallback: successCallback }, updateAlarmCallback, failCallback);\r\n\t};\r\n\t\r\n\t/**\r\n\t * Called when UpdateAlarm reponse is received\r\n\t * \r\n\t * @param \t\tconnectionRequest\t\tobject\t\tResponse from AXAJ call\r\n\t */\r\n\tvar updateAlarmCallback = function(connectionRequest) {\r\n\t\tcallbackAfterRequest(connectionRequest, 'Error updating alarms', function () {\r\n\t\t\tconnectionRequest.options.successCallback && connectionRequest.options.successCallback();\r\n\t\t});\r\n\t};\r\n\t\r\n\t/**\r\n\t * Gets settings for alarms (Priority, State).\r\n\t * \r\n\t * @param {Function} successCallback: function that is called when the command execution was successful and the result is passed as a parameter.\r\n\t * @param {Function} failCallback: function that is called when the command execution has failed and the error is passed as a parameter.\r\n\t */\r\n\tthis.getAlarmDataSettings = function(successCallback, failCallback) {\r\n\t    return self.sendCommand('GetAlarmDataSettings', {}, { successCallback: successCallback }, getAlarmDataSettingsCallback, failCallback);\r\n\t};\r\n\t\r\n\t/**\r\n\t * Called when GetAlarmList reponse is received\r\n\t * \r\n\t * @param \t\tconnectionRequest\t\tobject\t\tResponse from AXAJ call\r\n\t */\r\n\tvar getAlarmDataSettingsCallback = function(connectionRequest) {\r\n\t\tcallbackAfterRequest(connectionRequest, 'Error getting alarm data settings', function () {\r\n\t\t\tconnectionRequest.options.successCallback && connectionRequest.options.successCallback(connectionRequest.response.items);\r\n\t\t});\r\n\t};\r\n\t\r\n\t/**\r\n\t * Gets list of users for the specified alarm. The alarm can be assigned to any one of these users. \r\n\t *\r\n\t * @param alarmId\r\n\t * @param {Function} successCallback: function that is called when the command execution was successful and the result is passed as a parameter.\r\n\t * @param {Function} failCallback: function that is called when the command execution has failed and the error is passed as a parameter.\r\n\t */\r\n\tthis.getAlarmUsers = function(alarmId, successCallback, failCallback) {\r\n\t    return self.sendCommand('GetPermittedUsers', { SourceId: alarmId }, { successCallback: successCallback }, getAlarmUsersCallback, failCallback);\r\n\t}\r\n\t\r\n\t/**\r\n\t * Called when GetPermittedUsers reponse is received\r\n\t * \r\n\t * @param \t\tconnectionRequest\t\tobject\t\tResponse from AXAJ call\r\n\t */\r\n\tvar getAlarmUsersCallback = function(connectionRequest) {\r\n\t\tcallbackAfterRequest(connectionRequest, 'Error getting permitted users for alarm', function () {\r\n\t\t\tconnectionRequest.options.successCallback && connectionRequest.options.successCallback(connectionRequest.response.items);\r\n\t\t});\r\n\t};\r\n\t\r\n\t/**\r\n\t * Acknowledges the given alarm.\r\n\t *\r\n\t * @param alarmId\r\n\t * @param {Function} successCallback: function that is called when the command execution was successful and the result is passed as a parameter.\r\n\t * @param {Function} failCallback: function that is called when the command execution has failed and the error is passed as a parameter.\r\n\t */\r\n\tthis.acknowledgeAlarm = function(alarmId, successCallback, failCallback) {\r\n\t    return self.sendCommand('AcknowledgeAlarm', { Id: alarmId }, { successCallback: successCallback }, acknowledgeAlarmCallback, failCallback);\r\n\t}\r\n\t\r\n\t/**\r\n\t * Called when GetPermittedUsers reponse is received\r\n\t * \r\n\t * @param \t\tconnectionRequest\t\tobject\t\tResponse from AXAJ call\r\n\t */\r\n\tvar acknowledgeAlarmCallback = function(connectionRequest) {\r\n\t\tcallbackAfterRequest(connectionRequest, 'Error acknowledging alarm', function () {\r\n\t\t\tconnectionRequest.options.successCallback && connectionRequest.options.successCallback();\r\n\t\t});\r\n\t};\r\n\t\r\n\t/**\r\n\t * Request the next camera for the given carousel.\r\n\t * \r\n\t * @param videoId: string\r\n\t */\r\n\tthis.prevCarouselCamera = function(videoId) {\r\n\t\treturn self.sendCommand('ControlCarousel', { VideoId: videoId, CarouselCommand: 'PreviousCamera' }, null, prevCarouselCameraCallback);\r\n\t};\r\n\t\r\n\t/**\r\n\t * Called when prevCarouselCamera response is returned\r\n\t * \r\n\t * @param \t\tconnectionRequest\t\tobject\t\tResponse from AXAJ call\r\n\t */\r\n\tvar prevCarouselCameraCallback = function(connectionRequest) {\r\n\t\tcallbackAfterRequest(connectionRequest, 'Error getting prev camera from carousel');\r\n\t};\r\n\t\r\n\t/**\r\n\t * Request the next camera for the given carousel.\r\n\t * \r\n\t * @param videoId: string\r\n\t */\r\n\tthis.nextCarouselCamera = function(videoId) {\r\n\t\treturn self.sendCommand('ControlCarousel', { VideoId: videoId, CarouselCommand: 'NextCamera' }, null, nextCarouselCameraCallback);\r\n\t};\r\n\t\r\n\t/**\r\n\t * Called when prevCarouselCamera response is returned\r\n\t * \r\n\t * @param \t\tconnectionRequest\t\tobject\t\tResponse from AXAJ call\r\n\t */\r\n\tvar nextCarouselCameraCallback = function(connectionRequest) {\r\n\t\tcallbackAfterRequest(connectionRequest, 'Error getting next camera from carousel');\r\n\t};\r\n\t\r\n\t/**\r\n\t * Pauses a carousel.\r\n\t * \r\n\t * @param videoId: string\r\n\t */\r\n\tthis.pauseCarousel = function(videoId) {\r\n\t\treturn self.sendCommand('ControlCarousel', { VideoId: videoId, CarouselCommand: 'PauseCarousel' }, null, pauseCarouselCallback);\r\n\t};\r\n\t\r\n\t/**\r\n\t * Called when pauseCarousel response is returned\r\n\t * \r\n\t * @param \t\tconnectionRequest\t\tobject\t\tResponse from AXAJ call\r\n\t */\r\n\tvar pauseCarouselCallback = function(connectionRequest) {\r\n\t\tcallbackAfterRequest(connectionRequest, 'Error pausing carousel');\r\n\t};\r\n\t\r\n\t/**\r\n\t * Pauses a carousel.\r\n\t * \r\n\t * @param videoId: string\r\n\t */\r\n\tthis.resumeCarousel = function(videoId) {\r\n\t\treturn self.sendCommand('ControlCarousel', { VideoId: videoId, CarouselCommand: 'ResumeCarousel' }, null, resumeCarouselCallback);\r\n\t};\r\n\t\r\n\t/**\r\n\t * Called when resumeCarousel response is returned\r\n\t * \r\n\t * @param \t\tconnectionRequest\t\tobject\t\tResponse from AXAJ call\r\n\t */\r\n\tvar resumeCarouselCallback = function(connectionRequest) {\r\n\t\tcallbackAfterRequest(connectionRequest, 'Error resuming carousel');\r\n\t};\r\n\t\r\n\r\n\tthis.registerForNotifications = function (setting, successCallback, failCallback) {\r\n\t    var browser = $.getBrowser();\r\n\t    var deviceName = browser.name + \" \" + browser.version + \", \" + browser.os;\r\n\t    var params = {\r\n\t        Settings: setting, \r\n\t        DeviceName: XPMobileSDK.library.Connection.dh.encodeString(deviceName),\r\n\t        DeviceId: XPMobileSDK.library.Connection.connectionId\r\n\t    };\r\n\t    return self.RegisterForNotifications(params, successCallback, failCallback);\r\n\t};\r\n\r\n\tthis.RegisterForNotifications = function (params, successCallback, failCallback) {\r\n\t    return self.sendCommand('RegisterForNotifications', params, { successCallback: successCallback }, registerForNotificationsCallback, failCallback);\r\n\t};\r\n\r\n\tvar registerForNotificationsCallback = function (connectionRequest) {\r\n\t    callbackAfterRequest(connectionRequest, 'Error register for notifications.', function () {\r\n\t        connectionRequest.options.successCallback && connectionRequest.options.successCallback(connectionRequest.response.items);\r\n\t    });\r\n\t};\r\n\r\n\t/**\r\n\t * A general callback to be called after a request operation. \r\n\t * Notifies that the request is finished, checks the response for errors, print error message if necessary and calls the callee callback with the appropriate argument(s).\r\n\t *\r\n\t * @param connectionRequest.\r\n\t * @param errorMessage: logged in the console in case of an error.\r\n\t * @param callback\r\n\t */\r\n\tvar callbackAfterRequest = function (connectionRequest, errorMessage, callback) {\r\n\t\t\r\n\t\trequestFinished(connectionRequest);\r\n\r\n\t\tvar connectionResponse = connectionRequest.response;\r\n\t\t\r\n\t\tif (!connectionResponse || connectionResponse.isError) {\r\n\t\t\tif (connectionRequestResponseIsTerminal(connectionRequest)) {\r\n\t\t\t\tconsole.error(\"The application has lost connection due to connectionRequestResponseIsTerminal\");\r\n\t\t\t\tconsole.log(errorMessage);\r\n\t\t\t\tlostConnection();\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tconsole.error(errorMessage);\r\n\t\t\t\t\r\n\t\t\t\tif (connectionRequest.options.failCallback) {\r\n\t\t\t\t    connectionRequest.options.failCallback(connectionResponse.error, connectionResponse);\r\n\t\t\t\t}\r\n\t\t\t\telse if (connectionRequest.options.successCallback) {\r\n\t\t\t\t    connectionRequest.options.successCallback(null, connectionResponse.error, connectionResponse);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\telse if (callback) {\r\n\t\t\tcallback();\r\n\t\t}\r\n\t};\r\n\t\r\n\t/**\r\n\t * Sends requests to the server. Creates ConnectionRequest instances. \r\n\t * \r\n\t * @param commandName: string, the name of the command\r\n\t * @param requestParams: json object, the parameters of the command\r\n\t * @param options: object, optional, can contain:\r\n\t * \t\t\t\t- timeout: integer, time interval in milliseconds after which the request will be aborted\r\n     * \t\t\t\t- reuseConnection: boolean, flag to reuse connection or not\r\n     * \t\t\t\t- viewId: string, the unique GUID of the view that we will work on\r\n     * \t\t\t\t- cameraId: String, the unique GUID of the camera that should be started\r\n\t * \t\t\t\t- successCallback: function, callback that is provided by the client code of the Network API which will be called during the execution of the callback parameter.\r\n\t * @param successCallback: function, the callback to be called after the response is returned and parsed\r\n     * @param failCallback: function, callback that is provided by the client code of the Network API which will be called if something is wrong with the command.\r\n\t */\r\n\tthis.sendCommand = function (commandName, requestParams, options, successCallback, failCallback) {\r\n\t\t\r\n\t    requestParams = requestParams || {};\r\n\r\n\t\tif (XPMobileSDKSettings.supportsCHAP && self.SecurityEnabled == 'Yes' && self.CHAPSupported == 'Yes') {\r\n\t        var challenge = XPMobileSDK.library.CHAP.calculate();\r\n\t\t\tif (challenge.Challenge && challenge.ChalAnswer) {\r\n\t\t\t\trequestParams.Challenge = challenge.Challenge;\r\n\t\t\t\trequestParams.ChalAnswer = challenge.ChalAnswer;\r\n\t\t\t} else if (XPMobileSDK.library.Connection.state == XPMobileSDK.library.ConnectionStates.working) {\r\n\t\t\t\treturn;\r\n            }\r\n\t    }\r\n\r\n\t    options = options || {};\r\n\t    if (failCallback) {\r\n\t        options.failCallback = failCallback;\r\n\t    }\r\n\t\t\r\n\t    console.log('Sending ' + commandName + ' on ' + (new Date()) + 'with ', requestParams);\r\n\t\t\r\n\t    var connectionRequest = new XPMobileSDK.library.ConnectionRequest(commandName, getNextSequenceID(), requestParams, options, successCallback);\r\n\r\n\t\trequests.push(connectionRequest);\r\n\t\treturn connectionRequest;\r\n\t};\r\n\r\n\tvar requestFinished = function (connectionRequest) {\r\n\t\tvar index = requests.indexOf(connectionRequest);\r\n\t\tif (index > -1) {\r\n\t\t\trequests.splice(index, 1);\r\n\t\t}\r\n\t\tvar request = {\r\n\t\t\tparameters: connectionRequest.params,\r\n\t\t\toptions: connectionRequest.options\r\n\t\t};\r\n\t\tvar response = connectionRequest.response && {\r\n\t\t\tparameters: connectionRequest.response.outputParameters\r\n\t\t};\r\n\t\tcallMethodOnObservers('connectionRequestSucceeded', request, response);\r\n\t};\r\n\r\n\t/**\r\n\t * Each command send to the server has a sequenceID which starts from 1 and is increased with every next request.\r\n\t */ \r\n\tvar getNextSequenceID = function () {\r\n\t\treturn ++sequenceID;\r\n\t};\r\n\r\n\tvar setState = function (state) {\r\n\t\tself.state = state;\r\n\t\t// inform observers of state change\r\n\t\tcallMethodOnObservers('connectionStateChanged');\r\n\t};\r\n\r\n\tvar callMethodOnObservers = function () {\r\n\t\tif (arguments.length < 1) return;\r\n\t\tvar methodName = arguments[0];\r\n\t\tvar args = Array.prototype.slice.call(arguments, 1);\r\n\t\tobservers.forEach(function (object) {\r\n\t\t\tif (object[methodName]) {\r\n\t\t\t\ttry {\r\n\t\t\t\t\tobject[methodName].apply(object, args);\r\n\t\t\t\t} catch (e) {\r\n\t\t\t\t\tconsole.error(e);\r\n\t\t\t\t\tconsole.log(e.stack);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t};\r\n\r\n\t/**\r\n\t * Live message\r\n\t * Live message methods are used to \"ping\" the server with LiveMessage commands to keep the connection ID alive.\r\n\t * All commands sent to the server should cancel the live message and schedule it again on response. The idea is that if\r\n\t * there is a constant stream of communication going on with the server there is no point in sending live messages. Instead\r\n\t * we send it only if there is some period of time that we haven't sent any commands.\r\n\t * \r\n\t * TODO possible bug: when we have video connections they consume a lot of AJAX calls. And the live messages may get queued. \r\n\t * If that happens it is possible to timeout the connection even though the video is still properly running and everything.\r\n\t * \r\n\t * All these methods are private!\r\n\t */\r\n\tvar scheduleLiveMessage = function () {\r\n\t\t\r\n\t\tif (self.liveMessageTimer) return;\r\n\t\t\r\n\t\t// serverTimeout is in seconds and setTimeout accepts milliseconds so we have to multiple by 1000. However\r\n\t\t// we shouldn't wait for the entire period but send the live message earlier. Hence the multiplier is smaller\r\n\t\tself.liveMessageTimer = setInterval(self.sendLiveMessage, self.serverTimeout * 1000 / 3);\r\n\t\t\r\n\t};\r\n\r\n\tthis.updateLiveMessageTimer = function (minInterval) {\r\n\t    // serverTimeout is in seconds and setTimeout accepts milliseconds so we have to multiple by 1000. However\r\n\t    // we shouldn't wait for the entire period but send the live message earlier. Hence the multiplier is smaller\r\n\t    var interval = self.serverTimeout * 1000 / 3;\r\n\r\n\t    if (minInterval && typeof minInterval == \"number\")\r\n\t    {\r\n\t        interval = Math.min(interval, minInterval);\r\n\t    }\r\n\r\n\t    clearTimeout(self.liveMessageTimer);\r\n\t    \r\n\t    self.liveMessageTimer = setInterval(self.sendLiveMessage, interval);\r\n\t};\r\n\t\r\n\tvar cancelLiveMessage = function () {\r\n\r\n\t\tif (!self.liveMessageTimer) return;\r\n\t\t\r\n\t\tclearTimeout(self.liveMessageTimer);\r\n\t\tself.liveMessageTimer = null;\r\n\t\t\r\n\t};\r\n\r\n\tthis.sendLiveMessage = function () {\r\n\t\t\r\n\t\tself.LiveMessage();\r\n\t\t\r\n\t\tif (self.webSocketServer && self.webSocketBrowser) {\r\n\t\t\tfps.manage(liveMessagesWaiting);\r\n\t\t}\r\n\t\t\r\n\t\tliveMessagesWaiting++;\r\n\t\t\r\n\t};\r\n\r\n\tvar scheduledDisconnectOnFail;\r\n\r\n\tvar disconnectOnFail = function () {\r\n\t    cancelLiveMessage();\r\n\t    setState(XPMobileSDK.library.ConnectionStates.idle);\r\n\t    XPMobileSDK.library.VideoConnectionPool.clear();\r\n\t    callMethodOnObservers('connectionProcessingDisconnect');\r\n\t    self.connectionId = null;\r\n\t    callMethodOnObservers('connectionDidDisconnect');\r\n\t    self.destroy();\r\n\t};\r\n\r\n\tvar liveMessageFailCallback = function () {\r\n\t    if (!!scheduledDisconnectOnFail) {\r\n\t        return;\r\n\t    }\r\n\r\n\t    scheduledDisconnectOnFail = setTimeout(disconnectOnFail, self.serverTimeout * 1000);\r\n\t};\r\n\r\n    /**\r\n     * Sends a LiveMessage command to the server.\r\n     * \r\n     * @param {Object} params: Parameters to sent to the server\r\n     * @param {Function} successCallback: function that is called when the command execution was successful and the result is passed as a parameter.\r\n     * @param {Function} failCallback: function that is called when the command execution has failed and the error is passed as a parameter.\r\n     * \r\n     */\r\n\tthis.LiveMessage = function (params, successCallback, failCallback) {\r\n\t    params = params || {};\r\n\t    failCallback = failCallback || liveMessageFailCallback;\r\n\r\n\t    self.sendCommand('LiveMessage', params, { successCallback: successCallback }, liveMessageCallback, failCallback);\r\n\t};\r\n\t\r\n\tvar liveMessageCallback = function (connectionRequest) {\r\n\r\n\t\tliveMessagesWaiting--;\r\n\t\t\r\n\t\trequestFinished(connectionRequest);\r\n\r\n\t\tclearTimeout(scheduledDisconnectOnFail);\r\n\t\tscheduledDisconnectOnFail = undefined;\r\n\r\n\t\tvar connectionResponse = connectionRequest.response;\r\n\r\n\t\tif (!connectionResponse || connectionResponse.isError) {\r\n\t\t\tif (connectionRequestResponseIsTerminal(connectionRequest)) {\r\n\t\t\t\tif (self.connectingViaExternalConnectionID) {\r\n\t\t\t\t\tself.connectingViaExternalConnectionID = false;\r\n\t\t\t\t\tconsole.warn('Old connection ID has expired');\r\n\t\t\t\t\tcallMethodOnObservers('connectionFailedToConnectWithId', connectionResponse && connectionResponse.error);\r\n\t\t\t\t\tself.connectionId = null;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tlostConnection();\r\n\t\t\t\t}\r\n\t\t\t\tcancelLiveMessage();\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (self.connectingViaExternalConnectionID) {\r\n\t\t\tself.connectingViaExternalConnectionID = false; // reset the flag\r\n\t\t\tconsole.log('Started connection from external connection ID');\r\n\t\t\tsetState(XPMobileSDK.library.ConnectionStates.working);\r\n\t\t\tcallMethodOnObservers('connectionDidLogIn'); // do we need another method?\r\n\t\t}\r\n\r\n\t\tif(connectionResponse.outputParameters.FolderDefinitionsChanged == 'Yes' || \r\n\t\t   connectionResponse.outputParameters.ViewDefinitionsChanged == 'Yes') {\r\n\t\t\tcallMethodOnObservers('connectionReloadConfiguration');\r\n\t\t}\r\n\r\n\t\tif(connectionResponse.outputParameters.CameraDefinitionsChanged == 'Yes') {\r\n\t\t\tcallMethodOnObservers('connectionReloadCameraConfiguration');\r\n\t\t}\r\n\t\tif (connectionResponse.items && connectionResponse.items.length > 0)\r\n\t\t{\r\n\t\t    for (var i = 0; i < connectionResponse.items.length; i++)\r\n\t\t    {\r\n\t\t        if (connectionResponse.items[i].Type == \"Notification\")\r\n\t\t        {\r\n\t\t            callMethodOnObservers('receivedNotification', connectionResponse.items[i]);\r\n                }\r\n\t\t        \r\n\t\t    }\r\n\t\t    \r\n\t\t}\r\n\r\n\t\tscheduleLiveMessage();\r\n\r\n\t};\r\n\r\n\t/**\r\n\t * Parses the features that are returned from server and puts them in local storage\r\n\t * \r\n\t * @param \t\tfeatures\t\tobject\t\tFeatures that the server is supporting\r\n\t */\r\n\tvar getFeatures = function (features) {\r\n\t\t\r\n\t\tif (!features) return;\r\n\r\n\t\tif (!features.SupportNoScaledImages) {\r\n\t\t\tfeatures.SupportNoScaledImages = 'Yes'; // default value\r\n\t\t}\r\n\t\t\r\n\t\tvar data = {};\r\n\t\tfor (i in features) {\r\n\t\t\tswitch(i) {\r\n\t\t\t\tcase 'Challenge':\r\n\t\t\t\t\tdata['CHAPSupported'] = true;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'ServerVersion':\r\n\t\t\t\t\tdata['ServerVersion'] = features[i];\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tvar value = isNaN(Number(features[i])) ? features[i] == 'Yes' : Number(features[i]);\r\n\t\t\t\t\tdata[i] = value;\r\n\t\t\t\t\tbreak;\r\n\t\t\t};\r\n\t\t}\r\n\t\t\r\n\t\taddDirectStreamingStatus(data);\r\n\t\tself.storage && self.storage.setItem('features', data);\r\n\t\tXPMobileSDK.features = data;\r\n\r\n\t};\r\n\t\r\n\t/**\r\n\t * Adds the status of the Direct streaming to the XPMobileSDK.features object.\r\n\t * \r\n\t *  XPMobileSDK.features.DirectStreaming == 0 - DS not available\r\n\t *  XPMobileSDK.features.DirectStreaming == 1 - do not enforce\r\n\t *  XPMobileSDK.features.DirectStreaming == 2 - enforce whenever possible\r\n\t *  XPMobileSDK.features.DirectStreaming == 3 - enforce for all clients\r\n\t */\r\n\tvar addDirectStreamingStatus = function(data) {\r\n\r\n\t\tif (!data.NativeStreamingAvailable) {\r\n\t\t\tdata.DirectStreaming = self.DSServerStatus.NotAvailable; \r\n\t\t\treturn;\r\n\t\t} \r\n\t\t\r\n\t\tif (!data.TranscodedStreamingAvailable) {\r\n\t\t\tdata.DirectStreaming = self.DSServerStatus.Enforce; \r\n\t\t\treturn;\r\n\t\t}\r\n\t\t\r\n\t\tif (data.NativeStreamingSuggested) {\r\n\t\t\tdata.DirectStreaming = self.DSServerStatus.EnforceWheneverPossible; \r\n\t\t\treturn;\r\n\t\t}\r\n\t\t\r\n\t\tdata.DirectStreaming = self.DSServerStatus.DoNotEnforce; \r\n\t};\r\n\t\r\n\t/**\r\n\t * Tests if response of a request contains an error that is terminal for the connection, such as connection timeout error!\r\n\t */\r\n\tvar connectionRequestResponseIsTerminal = function (connectionRequest) {\r\n\t\tvar connectionResponse = connectionRequest.response;\r\n\t\tif (connectionResponse == undefined\r\n            || connectionResponse.errorCode == XPMobileSDK.library.ConnectionError.WrongID\r\n            || connectionResponse.errorCode == XPMobileSDK.library.ConnectionError.ChallengesLimitReached\r\n            || connectionResponse.errorString == 'Wrong connection ID') {\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\treturn false;\r\n\t};\r\n\r\n\tvar lostConnection = function () {\r\n\t\tif (self.state != XPMobileSDK.library.ConnectionStates.lostConnection) {\r\n\t\t\tsetState(XPMobileSDK.library.ConnectionStates.lostConnection);\r\n\t\t\tself.connectionId = null;\r\n\t\t\tXPMobileSDK.library.VideoConnectionPool.clear();\r\n\t\t\tself.destroy();\r\n\t\t\tcallMethodOnObservers('connectionLostConnection');\r\n\t\t}\r\n\t};\r\n\r\n\t/**\r\n\t * Destructor. As much as there is such thing in JavaScript.\r\n\t * \r\n\t * @method destroy\r\n\t */\r\n\tthis.destroy = function () {\r\n        requests = [];\r\n\t\tif (self.storage) {\r\n\t\t\tself.storage.removeItem('features');\r\n            self.storage.removeItem('webSocketServer');\r\n            self.storage.removeItem('directStreamingServer');\r\n\t\t}\r\n\t};\r\n};\r\n\r\n/**\r\n * List of connection error codes.\r\n */ \r\nXPMobileSDK.library.ConnectionError = {\r\n\tNotImplemented: 1,\r\n\tNotFullyImplemented: 2,\r\n\tBadCommandType: 10,\r\n\tBadCommandKind: 11,\r\n\tWrongID: 12,\r\n\tMissingInputParameter: 13,\r\n\tWrongInputParameter: 14,\r\n\tInvalidCredentials: 15,\r\n\tIncorrectPublicKey: 16,\r\n\tSurveillanceServerDown: 17,\r\n\tInvalidLicense: 18,\r\n\tSecurityError: 19,\r\n\tUnknownCameraID: 20,\r\n\tUnknownItemID: 21,\r\n\tNoPresetsAvailable: 22,\r\n\tNotAllowedInThisState: 23,\r\n\tFeatureIsDisabled: 24,\r\n\tInsufficientUserRights: 25,\r\n\tTooManySessions: 26,\r\n\tNewConfigurationNotAvailable: 27,\r\n\tAddressesNotReachable: 28,\r\n\tPlaybackStreamsLimitReached: 29,\r\n\tRedirection: 30,\r\n\tMovingInvestigations: 31,\r\n\tNoRecordingsFound: 32,\r\n\tNoRecordingsInInterval: 33,\r\n\tSecondStepAuthenticationRequired: 34,\r\n\tSecondStepAuthenticationEnabledUsersOnly: 35,\r\n\tSecondStepAuthenticationCodeError: 36,\r\n\tSecondStepAuthenticationCodeExpired: 37,\r\n\tInputParameterTooLong: 43,\r\n\tChallengesLimitReached: 51,\r\n\t\r\n\tUknownIdOrInsufficientRightForSomeItems: 52,\r\n\tUknownIdOrInsufficientRightForAllItems: 53,\r\n\tItemNotPlayable: 54,\r\n\r\n\tUnknown: 0x7FFFFFFF,\r\n\tIncorrectServerResponse: this.Unknown - 21,\r\n\tSdkNotConnected: this.Unknown - 20,\r\n\r\n\tHttpResponseError: this.Unknown - 11,\r\n\tHttpRequestError: this.Unknown - 10,\r\n\r\n\tCommandProcessingError: this.Unknown - 3,\r\n\tCommandTimedOut: this.Unknown - 2,\r\n\tInternalError: this.Unknown - 1\r\n};\r\n","; (function (undefined) {\n    var lastLiveMessageRequestTimestamp = 0;\n\n    /**\n     * The connection request class handles the sending of a single command to the server, generating the request XML and\n     * handling the response (via ConnectionResponse class), providing it back to the Connection class.\n     * Instances of the class should NEVER be created directly. The intended use is only to create them via the methods of \n     * the Connection class. It is its responsibility to create a connection request object and manage it.\n     * \n     * The only real external use of this class is to cancel a request via the cancel method. \n     * \n     * @class ConnectionRequest\n     */\n    var connectionRequest = function (command, sequenceID, params, options, callback) {\n\n        var self = this;\n\n        XPMobileSDK.addObserver(this);\n\n        self.options = options || {};\n        self.response = null;\n        if (params.VideoConnection) {\n            self.VideoConnection = params.VideoConnection;\n            delete params.VideoConnection;\n        }\n        self.params = params || {};\n\n        var finished = false;\n        var responseOffset = 0;\n        var requestXML = generateData();\n        var connectionURL = parseURL(XPMobileSDK.library.Connection.server) + XPMobileSDKSettings.communicationChanel;\n\n        var ajaxRequest, ajaxRequestTimeout;\n\n        var stopRestaringCommands = false;\n\n        initializeAjaxRequest();\n\n        /**\n         * Cancels the ajax request.\n         * \n         * @method cancel\n         */\n        this.cancel = function () {\n            if (ajaxRequestTimeout) {\n                clearTimeout(ajaxRequestTimeout);\n                ajaxRequestTimeout = null;\n            }\n            if (ajaxRequest) {\n                ajaxRequest.onreadystatechange = function () { };\n                ajaxRequest.abort();\n                ajaxRequest = null;\n                XPMobileSDK.library.Ajax.activeRequestCount--;\n            }\n\n        };\n\n        function parseURL(url) {\n\n            if (/^http(s)?:/i.test(url)) {\n                return url;\n            }\n            var protocol = window.location.protocol + '//';\n            var hostname = document.location.hostname;\n            var port = document.location.port && !/^:\\d+/.test(url) ? ':' + document.location.port : '';\n\n            return protocol + hostname + port + url;\n\n        };\n\n        function initializeAjaxRequest() {\n            if (command == 'LiveMessage') {\n                lastLiveMessageRequestTimestamp = Date.now();\n            }\n\n            console.log(requestXML);\n\n            ajaxRequest = XPMobileSDK.library.Ajax.Request(connectionURL, {\n                contentType: 'text/xml',\n                postBody: requestXML,\n                onSuccess: onSuccess,\n                onComplete: onComplete,\n                onFailure: self.options.failCallback || function () { parseResponse(); }\n            });\n\n        };\n\n        function onComplete(response) {\n            if (response.readyState != 4) {\n                return;\n            }\n\n            if (response.status == 200) {\n                return;\n            }\n\n            // Do not flood the server with LiveMessage requests - US#206999\n            if (command == 'LiveMessage' &&\n                (Date.now() - lastLiveMessageRequestTimestamp < XPMobileSDKSettings.liveMessageMinimumInterval)) {\n                return;\n            }\n\n            restartHighPriorityCommand();\n        }\n\n        function onSuccess() {\n\n            CommunicationStability.removeBreakDown(self);\n\n            if (ajaxRequestTimeout) {\n                clearTimeout(ajaxRequestTimeout);\n                ajaxRequestTimeout = null;\n            }\n            if (!finished) {\n                parseResponse();\n                finished = true;\n            }\n            ajaxRequest = null;\n        };\n\n        function parseResponse() {\n            var i = 0;\n            try {\n                var responseText = ajaxRequest.responseText;\n            } catch (error) {\n                return;\n            }\n\n            if (responseText.trim().substr(0, 5) != \"<?xml\") {\n\n                self.response = {\n                    isError: true,\n                    errorCode: \"The response from the server is not well-formatted\",\n                    outputParameters: []\n                };\n\n                callback && callback(self);\n            }\n\n            while ((i = responseText.indexOf(\"\\r\\n\\r\\n\", responseOffset)) > 0) {\n                var xml = responseText.substring(responseOffset, i);\n                if (xml) {\n                    var response = new XPMobileSDK.library.ConnectionResponse(xml);\n                    if (!response.isProcessing) {\n                        self.response = response;\n                        finished = true;\n                        callback && callback(self);\n                    }\n                }\n                responseOffset = i + 4; // 4 is the length of the XMLs separator\n            }\n        };\n\n        function restartHighPriorityCommand() {\n            if (stopRestaringCommands) {\n                return;\n            }\n\n            console.error('Command ' + command + ' failed');\n\n            if (command == 'LiveMessage' || command == 'CloseStream' || command == 'RequestStream' || command == 'Disconnect') {\n                console.warn('Restarting ' + command);\n\n                CommunicationStability.addBreakDown(self);\n\n                setTimeout(function () {\n                    finished = false;\n\n                    initializeAjaxRequest();\n                }.bind(this), 1000);\n            }\n        }\n\n        function generateData() {\n            var paramsXML = '';\n            for (key in params) {\n                var createProperty = function (key, value) {\n                    value = (value !== undefined && value.toString) ? value.toString() : '';\n                    value = value.replace('\"', '\\\"');\n                    return '<Param Name=\"' + key + '\" Value=\"' + value + '\" />';\n                };\n                if (params[key] !== undefined && params[key] instanceof Array) {\n                    params[key].forEach(function (value) {\n                        paramsXML += createProperty(key, value);\n                    });\n                }\n                else {\n                    paramsXML += createProperty(key, params[key]);\n                }\n            }\n            return '<?xml version=\\\"1.0\\\" encoding=\\\"utf-8\\\"?>' +\n                '<Communication xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\">' +\n                (XPMobileSDK.library.Connection.connectionId ? '<ConnectionId>' + XPMobileSDK.library.Connection.connectionId + '</ConnectionId >' : '') +\n                '<Command SequenceId=\"' + sequenceID + '\">' +\n                '<Type>Request</Type>' +\n                '<Name>' + command + '</Name>' +\n                '<InputParams>' + paramsXML + '</InputParams>' +\n                //'<OutputParams />' +\n                '</Command>' +\n                '</Communication>\\r\\n\\r\\n';\n        };\n\n        this.connectionDidDisconnect = function () {\n            stopRestaringCommands = true;\n        };\n    };\n\n    XPMobileSDK.library.ConnectionRequest = connectionRequest;\n})();","/**\n * The connection response class is internal and instances should only be created from the ConnectionRequest class.\n * The goal of the class is to parse response from the server and serve it as simpler JavaScript object. \n * \n * @class ConnectionResponse\n */\nXPMobileSDK.library.ConnectionResponse = function (xmlString) {\n\t\n\tvar self = this;\n\t\n\tself.sequenceID = 0;\n\tself.command = '';\n\tself.isResponse = false;\n\tself.isProcessing = false;\n\tself.isError = false;\n\tself.outputParameters = null; \n\tself.subItems = null; // XML Node, because they are not based on fixed structure\n\tself.thumbnailBase64 = null; // Base 64 encoded thumbnail. This is used only for the GetThumbnail command\n\tself.exports = [];\n\tself.sequences = []; \n\tself.actions = [];\n\tself.items = [];\n\tself.errorCode = 0;\n\tself.errorString = '';\n\t\n\t//xmlString = xmlString.replace('<Result>', '<Items><Item Type=\"Investiagtion\" Id=\"ef305713-ed63-4888-9fdc-53a5294fc62b\" Name=\"Bahur\"><Properties State=\"New\" StartTime=\"1412173087831\" EndTime=\"1412176810831\"/><Items><Item Type=\"Camera\" Name=\"Syzdyrma\" Id=\"af81b01d-f623-45d9-951a-6452b94ee561\" ><Properties SrcWidth=\"1920\" SrcHeight=\"1080\"/></Item><Item Type=\"Camera\" Name=\"Babek\" Id=\"b1bddc78-87ad-470f-b488-9db6352aab82\" ><Properties SrcWidth=\"720\" SrcHeight=\"576\" /></Item></Items></Item></Items><Result>');\n\t\n\tvar xmlDoc = parseXML(xmlString);\n\tvar CommunicationNode = xmlDoc.getElementsByTagName('Communication')[0];\n\tvar CommandNode = CommunicationNode.getElementsByTagName('Command')[0];\n\tvar TypeNode = CommandNode.getElementsByTagName('Type')[0];\n\tif (XMLNodeTextContent(TypeNode) == 'Processing') {\n\t\tconsole.log('Processing...');\n\t\tself.isProcessing = true;\n\t} else if (XMLNodeTextContent(TypeNode) == 'Response') {\n\t\tself.isResponse = true;\n\t\tvar tmp;\n\t\ttmp = CommandNode.getElementsByTagName('OutputParams');\n\t\tif (tmp.length > 0) {\n\t\t\tself.outputParameters = {};\n\t\t\tvar OutputParamsNode = tmp[0];\n\t\t\tvar paramsNodes = OutputParamsNode.getElementsByTagName('Param');\n\t\t\tfor (var i = 0, c = paramsNodes.length; i < c; i++) {\n\t\t\t\tvar paramNode = paramsNodes[i];\n\t\t\t\tvar key = '', value = '';\n\t\t\t\tvar attributes = paramNode.attributes;\n\t\t\t\tfor (var j = 0; j < attributes.length; j++) {\n\t\t\t\t\tvar attr = attributes[j];\n\t\t\t\t\tif (attr.name == 'Name') {\n\t\t\t\t\t\tkey = attr.value;\n\t\t\t\t\t} else if (attr.name == 'Value') {\n\t\t\t\t\t\tvalue = attr.value;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (key && value) {\n                    if(this.outputParameters[key] && typeof this.outputParameters[key] == 'string') {\n                            var paramValue = this.outputParameters[key];\n                            this.outputParameters[key] = new Array();\n                            this.outputParameters[key].push(paramValue);\n                    }\n                    else if (typeof this.outputParameters[key] == 'object') {\n                            this.outputParameters[key].push(value);\n                    }\n                    else {\n                            this.outputParameters[key] = value;\n                    }\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t\n\t\ttmp = CommandNode.getElementsByTagName('SubItems');\n\t\tif (tmp.length > 0) {\n\t\t\tself.subItems = tmp[0];\n\t\t}\n\n\t\ttmp = CommandNode.getElementsByTagName('ServerStatus');\n\t\tif (tmp.length > 0) {\n\t\t\tself.ServerStatus = {};\n\t\t\tvar cpu = tmp[0].getElementsByTagName('CpuUsage');\n\t\t\tif(cpu.length > 0) {\n\t\t\t\tself.ServerStatus.CPU = XMLNodeTextContent(cpu[0]);\n\t\t\t}\n\t\t\t\n\t\t\tvar DiskUsage = tmp[0].getElementsByTagName('DiskUsage');\n\t\t\tif(DiskUsage.length > 0) {\n\t\t\t\tself.ServerStatus.HDD = {};\n\t\t\t\tvar recording = DiskUsage[0].getElementsByTagName('RecordingDiskUsageInBytes');\n\t\t\t\tif(recording.length > 0) {\n\t\t\t\t\tself.ServerStatus.HDD.recorded = XMLNodeTextContent(recording[0]);\n\t\t\t\t}\n\t\t\t\tvar exp = DiskUsage[0].getElementsByTagName('ExportsDiskUsageInBytes');\n\t\t\t\tif(exp.length > 0) {\n\t\t\t\t\tself.ServerStatus.HDD.exports = XMLNodeTextContent(exp[0]);\n\t\t\t\t}\n\t\t\t\tvar user = DiskUsage[0].getElementsByTagName('UserDiskUsageInBytes');\n\t\t\t\tif(user.length > 0) {\n\t\t\t\t\tself.ServerStatus.HDD.user = XMLNodeTextContent(user[0]);\n\t\t\t\t}\n\t\t\t\tvar other = DiskUsage[0].getElementsByTagName('OtherDiskUsageInBytes');\n\t\t\t\tif(other.length > 0) {\n\t\t\t\t\tself.ServerStatus.HDD.other = XMLNodeTextContent(other[0]);\n\t\t\t\t}\n\t\t\t\tvar free = DiskUsage[0].getElementsByTagName('FreeSpaceInBytes');\n\t\t\t\tif(free.length > 0) {\n\t\t\t\t\tself.ServerStatus.HDD.free = XMLNodeTextContent(free[0]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tparseThumbnail(CommandNode);\n\n\t\tparseExports(CommandNode);\n\t\t\n\t\tparseSequences(CommandNode);\n\t\t\n\t\tparseActions(CommandNode);\n\t\t\n\t\tparseItems(CommandNode);\n\n\t\tvar ResultNode = CommandNode.getElementsByTagName('Result')[0];\n\t\t\n\t\tif (XMLNodeTextContent(ResultNode) != 'OK') {\n\t\t\tself.isError = true;\n\t\t\ttmp = CommandNode.getElementsByTagName('ErrorString');\n\t\t\tif (tmp.length > 0) {\n\t\t\t\tself.errorString = XMLNodeTextContent(tmp[0]);\n\t\t\t}\n\t\t\ttmp = CommandNode.getElementsByTagName('ErrorCode');\n\t\t\tif (tmp.length > 0) {\n\t\t\t\tself.errorCode = parseInt(XMLNodeTextContent(tmp[0]));\n\t\t\t}\n\n\t\t\tself.error = {\n\t\t\t\tcode: self.errorCode || XPMobileSDK.library.ConnectionError.Unknown,\n\t\t\t\tmessage: self.errorString || ''\n            };\n\n            var commandNameNode = CommandNode.getElementsByTagName('Name');\n            if (commandNameNode.length > 0 && XMLNodeTextContent(commandNameNode[0]) !== \"CloseStream\") {\n                console.error('Response error ' + (self.errorString || getError(self.errorCode)) + ' ' + (self.errorCode || '') + ' Complete response: ' + xmlString);\r\n            }\n\t\t}\n\t}\n\t\n\t/**\n\t * Gets an error string by error code as defined in XPMobileSDK.library.ConnectionError\n\t */\n\tfunction getError(errorCode) {\n\t\tvar result;\n\t\tObject.keys(XPMobileSDK.library.ConnectionError).forEach(function(key) { \n\t\t\t\tif (XPMobileSDK.library.ConnectionError[key] == errorCode) { \n\t\t\t\t\tresult = key; \n\t\t\t\t} \n\t\t\t});\n\t\treturn result;\n\t}\n\n\t/**\n\t * Parses the Thumbnail or ThumbnailJSON tag and extracts a BASE64 image.\n\t *\n\t * @param CommandNode the Command tag.\n\t */\n\tfunction parseThumbnail(CommandNode) {\n\n\t\tvar thumbnail = CommandNode.getElementsByTagName('Thumbnail')[0];\n\t\tif (thumbnail) {\n\t\t\tself.thumbnailBase64 = 'data:image/jpeg;base64,' + XMLNodeTextContent(thumbnail);\n\t\t\treturn;\n\t\t}\n\n\t\tvar thumbnailJSON = CommandNode.getElementsByTagName('ThumbnailJSON')[0];\n\t\tif (thumbnailJSON) {\n\t\t\tself.thumbnailJSON = XMLNodeTextContent(thumbnailJSON);\n\t\t\treturn;\n\t\t}\n\t\t\n\t};\n\t\n\t/**\n\t * Parses the Exports tag and saves the Export entries within this.exports.\n\t *\n\t * @param CommandNode the Command tag.\n\t */\n\tfunction parseExports(CommandNode) {\n\n\t\tvar exportsNodes = CommandNode.getElementsByTagName('Exports');\n\n\t\tif (exportsNodes.length > 0) {\n\n\t\t\tself.exports = [];\n\t\t\tvar exportNodes = exportsNodes[0].getElementsByTagName(\"Export\");\n\n\t\t\tfor (var i = 0; i < exportNodes.length; i++) {\n\t\t\t\tvar exp = attributesToObject(exportNodes[i], {\n\t\t\t\t\tnumbers: ['Size', 'State'],\n\t\t\t\t\tdates: ['StartTime', 'EndTime', 'CompletedTime', 'QueuedTime']\n\t\t\t\t});\n\t\t\t\t\n\t\t\t\tself.exports.push(exp);\n\t\t\t}\n\t\t}\n\t};\n\n\t/**\n\t* Parses the Sequences tag and saves the sequence entries within this.sequences.\n\t*\n\t* @param CommandNode the Command tag.\n\t*/\n\tfunction parseSequences(CommandNode) {\n\n\t\tvar rootNode = CommandNode.getElementsByTagName('Sequences');\n\n\t\tif (rootNode.length > 0) {\n\n\t\t\tself.sequences = [];\n\t\t\tvar sequencesNodes = rootNode[0].getElementsByTagName(\"Sequence\");\n\n\t\t\tfor (var i = 0; i < sequencesNodes.length; i++) {\n\n\t\t\t\tvar sequence = attributesToObject(sequencesNodes[i], {\n\t\t\t\t\tdates: ['StartTime', 'EndTime']\n\t\t\t\t});\n\n\t\t\t\tself.sequences.push(sequence);\n\t\t\t}\n\t\t}\n\t};\n\t\n\t/**\n\t * Parses the Outputs and Events (Actions) and saves them within this.actions.\n\t * \n\t * @param CommandNode the Command tag.\n\t */\n\tfunction parseActions(CommandNode) {\n\t\t\n\t\tvar EMPTY_CAMERA_NAME = '00000000-0000-0000-0000-000000000000';\n\t\t\n\t\tself.actions = [];\n\t\t\n\t\tvar headerGroups = CommandNode.getElementsByTagName('OEHeaderGroup');\n\t\t\n\t\tif (headerGroups.length == 0) {\n\t\t\treturn;\n\t\t}\n\t\t\n\t\tArray.prototype.forEach.call(headerGroups, function(headerGroup) {\n\t\t\tvar items = headerGroup.getElementsByTagName('OEItem');\n\t\t\tArray.prototype.forEach.call(items, function(item) {\n\t\t\t\tvar action = attributesToObject(item);\n\t\t\t\taction.Type = headerGroup.getAttribute('Name');\n\t\t\t\tself.actions.push(action);\n\t\t\t});\n\t\t});\n\t\t\n\t\tself.actions.sort(function(first, second) {\n\t\t\t\n\t\t\t// sort types (outputs go first, then events)\n\t\t\tif (first.Type == 'Outputs' && second.Type == 'Events')\n\t\t\t\treturn -1;\n\t\t\telse if (first.Type == 'Events' && second.Type == 'Outputs')\n\t\t\t\treturn 1;\n\t\t\t\n\t\t\t// if types match, sort by assignment status (assigned outputs go first, then unassigned)\n\t\t\tif (first.CameraId != EMPTY_CAMERA_NAME && second.CameraId == EMPTY_CAMERA_NAME)\n\t\t\t\treturn -1;\n\t\t\telse if (first.CameraId == EMPTY_CAMERA_NAME && second.CameraId != EMPTY_CAMERA_NAME)\n\t\t\t\treturn 1;\n\n\t\t\t// if types and statuses match, sort alphabetically\n\t\t\tif (first.Name < second.Name)\n\t\t\t\treturn -1;\n\t\t\telse if (first.Name > second.Name)\n\t\t\t\treturn 1;\n\t\t\t\n\t\t\treturn 0;\n\t\t});\n\t};\n\t\n\t/**\n\t* Parses the Items tag\n\t*\n\t* @param CommandNode the Command tag.\n\t*/\n\tfunction parseItems(CommandNode) {\n\n\t\tvar findItems = function(node) {\n\t\t\tvar subNodes = node.childNodes;\n\t\t\tvar ItemsNode = null;\n\t\t\t\n\t\t\tfor(var i = 0; i < subNodes.length; i++) {\n\t\t\t\tif(subNodes[i].nodeName == 'Items') {\n\t\t\t\t\tItemsNode = subNodes[i];\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tif(ItemsNode) {\n\t\t\t\tself.items = processItem(ItemsNode);\n\t\t\t}\n\t\t\n\t\t};\n\t\t\n\t\tvar processItem = function(node) {\n\t\t\t\n\t\t\tvar result = [];\n\t\t\tvar subNodes = node.childNodes;\n\t\t\t\n\t\t\tfor(var i = 0; i < subNodes.length; i++) {\n\t\t\t\tif(subNodes[i].nodeName == 'Item') {\n\t\t\t\t\tvar itemData = {};\n\t\t\t\t\t\n\t\t\t\t\tif(subNodes[i].attributes.length > 0) {\n\t\t\t\t\t\tfor(var j = 0; j < subNodes[i].attributes.length; j++) {\n\t\t\t\t\t\t\titemData[subNodes[i].attributes[j].name] = safe(subNodes[i].attributes[j].value);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tfor(var j = 0; j < subNodes[i].childNodes.length; j++) {\n\t\t\t\t\t\t\n\t\t\t\t\t\tif(subNodes[i].childNodes[j].nodeName == 'Properties') {\n\t\t\t\t\t\t\tfor(var k = 0; k < subNodes[i].childNodes[j].attributes.length; k++) {\n\t\t\t\t\t\t\t\titemData[subNodes[i].childNodes[j].attributes[k].name] = safe(subNodes[i].childNodes[j].attributes[k].value);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse if (subNodes[i].childNodes[j].nodeName == 'Items') {\n\t\t\t\t\t\t\titemData.Items = processItem(subNodes[i].childNodes[j]);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tresult.push(itemData);\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn result;\n\t\t};\n\t\t\n\t\tfindItems(CommandNode);\n\t};\n\n\t/**\n\t * Converts a XML Node object to a JavaScript object converting all attributes of the node as properties of the object. \n\t * The default type of the properties is String. Use the options argument to change that behavior. \n\t *\n\t * @param node: a XML Node.\n\t * @param options: optional parameter, an object describing how attributes should be converted to different types; may contains the following properties:\n\t *\t- numbers: an array of the attributes that should be converted to numbers.\n\t *\t- dates: an array of the attributes that should be converted to dates from the given UTC timestamp.\n\t * @return object representing the given node.\n\t */\n\tfunction attributesToObject(node, options) {\n\n\t\tvar result = {};\n\n\t\tfor (var i = 0; i < node.attributes.length; i++) {\n\n\t\t\tvar attribute = node.attributes[i];\n\n\t\t\tif (options && options.numbers && options.numbers.indexOf(attribute.name) != -1) {\n\t\t\t\tresult[attribute.name] = parseInt(attribute.value);\n\t\t\t} else if (options && options.dates && options.dates.indexOf(attribute.name) != -1) {\n\t\t\t\tresult[attribute.name] = new Date(parseInt(attribute.value));\n\t\t\t} else {\n\t\t\t\tresult[attribute.name] = safe(attribute.value);\n\t\t\t}\n\t\t}\n\n\t\treturn result;\n\t}\n\t\n\t/**\n\t * Removes unsafe symbols.\n\t * \n\t * @param string: a value coming from the server\n\t * @return a safe version of the string\n\t */\n\tfunction safe(string) {\n\t\t\n\t\tvar symbols = ['<', '>'];\n\n\t\tfor (var i = 0, max = symbols.length; i < max; ++i) {\n\t\t\tstring = string.replace(new RegExp(symbols[i], 'g'), '');\n\t\t}\n\t\t\n\t\treturn string;\n\t}\n};\n\n//////////////\n// XML Parser\n//////////////\n\nvar parseXML;\nvar XMLNodeTextContent;\nif (typeof window.DOMParser != \"undefined\") {\n\tparseXML = function (xmlStr) {\n    \treturn ( new window.DOMParser() ).parseFromString(xmlStr, \"text/xml\");\n\t};\n\tXMLNodeTextContent = function (node) {\n\t\treturn node.textContent;\n\t};\n} else if (typeof window.ActiveXObject != \"undefined\" &&\n       new window.ActiveXObject(\"Microsoft.XMLDOM\")) {\n    parseXML = function(xmlStr) {\n        var xmlDoc = new window.ActiveXObject(\"Microsoft.XMLDOM\");\n        xmlDoc.async = \"false\";\n        xmlDoc.loadXML(xmlStr);\n        return xmlDoc;\n    };\n    XMLNodeTextContent = function (node) {\n\t\treturn node.text;\n\t};\n} else {\n    throw new Error(\"No XML parser found\");\n}","XPMobileSDK.library.PullConnectionObserverInterface = {\r\n\t\r\n\tonError: function (request) {},\r\n\tonHTTPError: function (request) {},\r\n\tonPushFailed: function () {},\r\n\tnotifyChannel: function (status) {},\r\n\tnotifyObservers: function (item) {},\r\n\tvideoConnectionTemporaryDown: function (status) {},\r\n\trestart: function () {}\r\n};\r\n\r\nXPMobileSDK.library.PullConnection = function(videoURL, options) {\r\n\t\r\n\tvar frameRequestParams = {\r\n\t\tmethod: 'post',\r\n\t\tcontentType: 'text/xml', \r\n\t\tonLoading: onAjaxLoading,\r\n\t\tonSuccess: onAjaxSuccess,\r\n\t\tonFailure: onAjaxFailure\r\n\t};\r\n\t\r\n\tvar lastFrame = null; // Property that keeps the last frame received over the connection\r\n\t\r\n\tvar signalType = options.signalType || null;\r\n\t\r\n\t// If we have support for ArrayBuffer in the browser\r\n\tif (typeof ArrayBuffer !== 'undefined')\r\n\t\tframeRequestParams.responseType = 'arraybuffer';\r\n\t\r\n\tvar self = this;\r\n\tself.videoConnectionState = XPMobileSDK.library.VideoConnectionState.running;\r\n\t\r\n\tvar observers = [];\r\n\t\r\n\tvar frameInterval = 0;\r\n\t\r\n\t/**\r\n\t * Sends ajax request for the next frame\r\n\t */\r\n\tfunction requestNextFrame(timeout) {\r\n\t\tif(canRun() && communicationIsStable(timeout) && notWaiting()) {\r\n\t\t\tsendRequest(timeout);\r\n\t\t}\r\n\t};\r\n\t\r\n\tfunction sendRequest(timeout){\r\n\t\tself.nextFrameTimeout = setTimeout(function() {\r\n\t\t\tclearNextFrameTimeout();\r\n\t\t\tif (self.videoConnectionState != XPMobileSDK.library.VideoConnectionState.closed) {\r\n\t\t\t\tself.ajaxRequest = new XPMobileSDK.library.Ajax.Request(videoURL, frameRequestParams);\r\n\t\t\t}\r\n\t\t}, timeout || 1);\r\n\t};\r\n\t\r\n\tfunction communicationIsStable(timeout) {\r\n\t\tif (CommunicationStability.isBrokenDown()) {\r\n\t\t\tsetTimeout(function() {\r\n\t\t\t\trequestNextFrame(timeout);\r\n\t\t\t}, 200);\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\telse return true;\r\n\t};\r\n\t\r\n\tfunction notClosed() {\r\n\t\treturn self.videoConnectionState != XPMobileSDK.library.VideoConnectionState.closed;\r\n\t};\r\n\t\r\n\tfunction notSarted() {\r\n\t\treturn !self.ajaxRequest;\r\n\t};\r\n\t\r\n\tfunction notWaiting() {\r\n\t\treturn !self.nextFrameTimeout;\r\n\t}\r\n\t\r\n\tfunction canRun() {\r\n\t\treturn notSarted() || notClosed() || notWaiting();\r\n\t};\r\n\t\r\n\t/**\r\n\t * Aborts non-responsive requests waiting to timeout, thus stopping the frame request queue.\r\n\t */\r\n\tfunction onAjaxLoading (ajaxRequest) {\r\n\t\tif(notSarted()) {\t\r\n\t\t\tclearRequestTimeout();\r\n\t\t\t\r\n\t\t\tvar timeout = XPMobileSDKSettings.videoConnectionTimeout;\r\n\t\t\tself.ajaxRequestTimeout = setTimeout(function () {\r\n\t\t\t\tif (!ajaxRequest) return;\r\n\t\t\t\t\r\n\t\t\t\tconsole.warn('aborting video request for ' + self.videoId);\r\n\t\t\t\tajaxRequest.onreadystatechange = function () {};\r\n\t\t\t\tajaxRequest.abort();\r\n\t\t\t\tXPMobileSDK.library.Ajax.activeRequestCount--;\r\n\t\t\t\t\r\n\t\t\t\tcallMethodOnObservers('onError', ajaxRequest);\r\n\t\t\t}.bind(this), timeout);\r\n\t\t}\r\n\t}\r\n\t\r\n\t/**\r\n\t * Receives and parses the response from the server for the next frame.\r\n\t */\r\n\tfunction onAjaxSuccess (ajaxRequest) {\r\n\t\t\r\n\t\t// K2 2016: Broken AJAX responses - indicate observers!\r\n\t\tif (ajaxRequest.status == 0 && (!ajaxRequest.response || ajaxRequest.response.byteLength === 0)) {\r\n\t\t\tcallMethodOnObservers('onHTTPError', ajaxRequest);\r\n\t\t\treturn;\r\n\t\t}\r\n\t\t\r\n\t\tif(notClosed()){\r\n\t\t\t\r\n\t\t\tcallMethodOnObservers('notifyChannel', true);\r\n\t\t\tclearRequestTimeout();\r\n\t\t\t\r\n\t\t\ttry {\r\n\t\t\t\t\r\n\t\t\t\tvar res = ajaxRequest.response;\r\n\t\t\t\t\r\n\t\t\t\tvar currentData = new XPMobileSDK.library.VideoHeaderParser(res);\r\n\t\t\t\tif (currentData.duration) {\r\n\t\t\t\t\tvar delay = currentData.duration * 1000 * 0.8;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tcallMethodOnObservers('notifyObservers', currentData);\r\n\t\t\t\tclearRequestTimeout();\r\n\t\t\t\t\r\n\t\t\t\tif (self.videoConnectionState == XPMobileSDK.library.VideoConnectionState.running) {\r\n\t\t\t\t\t\r\n\t\t\t\t\tif(currentData.stream && currentData.stream.timeBetweenFrames) {\r\n\t\t\t\t\t\t// give some time fo rthe download but don't flood the network in order to give time to other streams (6 simultanous request)\r\n\t\t\t\t\t\tframeInterval = (currentData.stream.timeBetweenFrames * 2) / 3;\r\n\t\t\t\t\t\tself.requestNextFrameInterval = frameInterval;\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse if (frameInterval) {\r\n\t\t\t\t\t\tself.requestNextFrameInterval = frameInterval;\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse if (!currentData.dataSize && self.signalType == XPMobileSDK.interfaces.VideoConnectionSignal.live) {\r\n\t\t\t\t\t\tself.requestNextFrameInterval = Math.min(NETWORK.MAX_REQUEST_TIME, self.requestNextFrameInterval * getRandomIntAround(NETWORK.REQUEST_TIME_GROW_PER_EMPTY_FRAME * 100) / 100);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tself.requestNextFrameInterval = delay || NETWORK.requestTime;\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\trequestNextFrame(self.requestNextFrameInterval);\r\n\t\t\t\t\t\r\n\t\t\t\t}\r\n\t\t\t\tlastFrame = currentData;\r\n\t\t\t} \r\n\t\t\tcatch (e) {\r\n\t\t\t\tconsole.error('Exception in video connection ajax response', e);\r\n\t\t\t\tconsole.error(e.stack);\r\n\t\t\t\t\r\n\t\t\t\tcallMethodOnObservers('onHTTPError', ajaxRequest);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\t\r\n\tfunction onAjaxFailure (request) {\r\n\t\tconsole.error('ERROR in ajax request for frame for video channel ' + videoURL);\r\n\t\tcallMethodOnObservers('onHTTPError', request);\r\n\t};\r\n\t\r\n\tthis.restartConnection = function (request) {\r\n\t\ttry {\r\n\t\t\tif (request) {\r\n\t\t\t\tcallMethodOnObservers('videoConnectionTemporaryDown', request.status);\r\n\t\t\t} else {\r\n\t\t\t\tcallMethodOnObservers('videoConnectionTemporaryDown', -2);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tif (self.videoConnectionState == XPMobileSDK.library.VideoConnectionState.closed) {\r\n\t\t\t    return;\r\n\t\t\t}\r\n\r\n\t\t\tcallMethodOnObservers('restart');\r\n\t\t}\r\n\t\tcatch (e) {\r\n\t\t\t// for some reason IE9 throws exception when trying to access request.status\r\n\t\t\tcallMethodOnObservers('videoConnectionTemporaryDown', -1);\r\n\t\t};\r\n\t};\r\n\t\r\n\tthis.cleanupCommunication = function() {\r\n\t\tclearNextFrameTimeout();\r\n\t\tclearRequestTimeout();\r\n\t\tclearRequest();\r\n\t\tframeInterval = 0;\r\n\t};\r\n\t\r\n\tfunction clearNextFrameTimeout() {\r\n\t\tif (self.nextFrameTimeout) {\r\n\t\t\tclearTimeout(self.nextFrameTimeout);\r\n\t\t\tself.nextFrameTimeout = null;\r\n\t\t}\r\n\t}\r\n\r\n\tfunction clearRequestTimeout() {\r\n\t\tif (self.ajaxRequestTimeout) {\r\n\t\t\tclearTimeout(self.ajaxRequestTimeout);\r\n\t\t\tself.ajaxRequestTimeout = null;\r\n\t\t}\r\n\t}\r\n\t\r\n\tfunction clearRequest() {\r\n\t\tif (self.ajaxRequest) {\r\n\t\t\tif (self.ajaxRequest.readyState != 4 || self.ajaxRequest.status != 200) { \r\n\t\t\t\tself.ajaxRequest.abort();\r\n\t\t\t}\r\n\t\t\tdelete self.ajaxRequest;\r\n\t\t\tself.ajaxRequest = null;\r\n\t\t}\r\n\t}\r\n\t\r\n\tthis.startCommunication = function (timeout) {\r\n\t\tthis.cleanupCommunication();\r\n\t\trequestNextFrame(timeout);\r\n\t};\r\n\t\r\n\tthis.videoConnectionChangedState = function(videoConnectionState){\r\n\t\tself.videoConnectionState = videoConnectionState;\r\n\t};\r\n\t\r\n\tthis.addObserver = function (observer) {\r\n\t\tobservers.push(observer);\r\n\t};\r\n\t\r\n\tthis.removeObserver = function(observer) {\r\n\t\tvar index = observers.indexOf(observer);\r\n\t\tindex != -1 && observers.splice(index, 1);\r\n\t};\r\n\t\r\n\tfunction getRandomIntAround(number) {\r\n\t\tvar min = number - 10;\r\n\t\tvar max = number + 10;\r\n\t\treturn Math.floor(Math.random() * (max - min + 1)) + min;\r\n\t}\r\n\t\r\n\tfunction callMethodOnObservers(method, arg) {\r\n\t\tobservers.forEach(function(observer) {\r\n\t\t\tif (observer && observer[method]) {\r\n\t\t\t\tobserver[method](arg);\r\n\t\t\t}\r\n\t\t});\r\n\t}\t\r\n};","XPMobileSDK.library.PushConnectionObserverInterface = {\r\n\r\n    onError: function (request) { },\r\n    onHTTPError: function (request) { },\r\n    onPushFailed: function () { },\r\n    notifyChannel: function (status) { },\r\n    notifyObservers: function (item) { },\r\n    videoConnectionTemporaryDown: function (status) { },\r\n    restart: function () { }\r\n};\r\n\r\nXPMobileSDK.library.PushConnection = function (videoURL, options) {\r\n\r\n    var socket;\r\n\r\n    var signalType = options.signalType || null;\r\n\r\n    var lastFrame = null; // Property that keeps the last frame received over the connection\r\n\r\n    this.videoConnectionState = XPMobileSDK.library.VideoConnectionState.notOpened;\r\n\r\n    var observers = [];\r\n\r\n    var socketFailedTimestamp = null;\r\n\r\n    this.startCommunication = function () {\r\n        if (socket) {\r\n            return;\r\n        }\r\n\r\n        if (socketFailedTimestamp) {\r\n\r\n            if (Date.now() - socketFailedTimestamp < XPMobileSDKSettings.videoStreamRestartMinimumInterval) {\r\n                setTimeout(function () {\r\n                    console.warn(\"Restarting socket.\");\r\n                    createSocket();\r\n                }.bind(this), XPMobileSDKSettings.socketRestartMinimumInterval);\r\n            }\r\n            else {\r\n                callMethodOnObservers('restart');\r\n            }\r\n        } else {\r\n            createSocket();\r\n        }\r\n    }.bind(this);\r\n\r\n    var createSocket = function () {\r\n\r\n        try {\r\n            socket = new WebSocket(videoURL);\r\n        }\r\n        catch (exception) {\r\n            if (this.videoConnectionState == XPMobileSDK.library.VideoConnectionState.closed) {\r\n                return;\r\n            }\r\n            console.error('WebSocket initialization failed. Falling back to AJAX...');\r\n            callMethodOnObservers('onPushFailed');\r\n            return;\r\n        }\r\n\r\n        socket.binaryType = \"arraybuffer\";\r\n        socket.onerror = function (exception) {\r\n            //console.error(exception);\r\n            callMethodOnObservers('onError', socket);\r\n        };\r\n        socket.onopen = onOpen;\r\n        socket.onclose = function () {\r\n            var socketReadyState = { readyState: socket.readyState, status: socket.status };\r\n            socket = null;\r\n\r\n            if (!socketFailedTimestamp) {\r\n                socketFailedTimestamp = new Date();\r\n            }\r\n            \r\n            callMethodOnObservers('onError', socketReadyState);\r\n\r\n        }.bind(this);\r\n\r\n    }.bind(this);\r\n\r\n    this.restartConnection = function (request) {\r\n        console.warn(\"Restarting socket.\");\r\n        this.startCommunication();\r\n    }.bind(this);\r\n\r\n    this.close = function () {\r\n\r\n        if (!socket) {\r\n            return;\r\n        }\r\n\r\n        socket.onopen = null;\r\n        socket.onmessage = null;\r\n        socket.onerror = null;\r\n        socket.onclose = null;\r\n\r\n        socket.close();\r\n        socket = null;\r\n\r\n        if (this.messageInterval) {\r\n            clearInterval(this.messageInterval);\r\n            this.messageInterval = null;\r\n        }\r\n\r\n        console.log('WebSocket closed');\r\n\r\n    }.bind(this);\r\n\r\n\r\n    var onOpen = function (event) {\r\n\r\n        socket.onmessage = onMessage;\r\n        socket.onerror = onError;\r\n        socket.onclose = onClose;\r\n\r\n        // Firefox fix: Close the socket on page refresh - in most other browsers the socket is closed automatically.\r\n        // Without it the browser breaks and stops executing setTimeout/setInterval calls as well as CSS animations after refresh.\r\n        window.addEventListener('beforeunload', this.close);\r\n\r\n        this.messageInterval = setInterval(function () {\r\n            if (socket) {\r\n                socket.send(\"\");\r\n            }\r\n        }, NETWORK.websocketSendMessage);\r\n\r\n        callMethodOnObservers('notifyChannel', true);\r\n\r\n        console.log('WebSocket open');\r\n\r\n    }.bind(this);\r\n\r\n    var onMessage = function (event) {\r\n\r\n        if (lastFrame) {\r\n            delete lastFrame;\r\n            lastFrame = null;\r\n        }\r\n\r\n        lastFrame = new XPMobileSDK.library.VideoHeaderParser(event.data);\r\n\r\n        callMethodOnObservers('notifyObservers', lastFrame);\r\n\r\n    }.bind(this);\r\n\r\n    var onError = function (error) {\r\n\r\n        console.error('WebSocket error', error);\r\n\r\n        if (this.messageInterval) {\r\n            clearInterval(this.messageInterval);\r\n            this.messageInterval = null;\r\n        }\r\n\r\n    }.bind(this);\r\n\r\n    var onClose = function (event) {\r\n        socket.onopen = null;\r\n        socket.onmessage = null;\r\n        socket.onerror = null;\r\n        socket.onclose = null\r\n        socket = null;\r\n\r\n        if (this.messageInterval) {\r\n            clearInterval(this.messageInterval);\r\n            this.messageInterval = null;\r\n        }\r\n        if (this.videoConnectionState == XPMobileSDK.library.VideoConnectionState.running && XPMobileSDK.library.Connection.connectionId) {\r\n            this.restartConnection();\r\n            callMethodOnObservers('videoConnectionTemporaryDown');\r\n        }\r\n\r\n    }.bind(this);\r\n\r\n    this.cleanupCommunication = function () {\r\n        this.close();\r\n    };\r\n\r\n    this.videoConnectionChangedState = function (videoConnectionState) {\r\n        this.videoConnectionState = videoConnectionState;\r\n    };\r\n\r\n    this.addObserver = function (observer) {\r\n        observers.push(observer);\r\n    };\r\n\r\n    this.removeObserver = function (observer) {\r\n        var index = observers.indexOf(observer);\r\n        index != -1 && observers.splice(index, 1);\r\n    };\r\n\r\n    var callMethodOnObservers = function (method, arg) {\r\n        observers.forEach(function (observer) {\r\n            if (observer && observer[method]) {\r\n                observer[method](arg);\r\n            }\r\n        });\r\n    }.bind(this);\r\n\r\n};\r\n","// This file defines objects related to video connection - including the VideoConnection class. \n\n/**\n * Video connection signal - live or playback.\n */\nXPMobileSDK.library.VideoConnectionSignal = {\n    live: 1, // Live signal from the camera\n    playback: 2 // Playback signal from the camera\n};\n\n/**\n * The possible states of the video connection.\n */\nXPMobileSDK.library.VideoConnectionState = {\n    notOpened: 0, // Connection not opened yet\n    running: 1, // Connection started and receiving frames\n    closed: 2, // Connection has been closed and done with\n    closing: 3 // Connection is currently closing\n};\n\n/**\n * The possible states of the video connection stream type.\n */\nXPMobileSDK.library.VideoConnectionStream = {\n    \"native\": 1, // Native video stream\n    transcoded: 3, // Transcoded video stream\n    FragmentedMP4: 4 // Direct streaming video\n};\n\n/**\n * Interface description for the observers of the VideoConnection singleton.\n * \n * If an objects wants to be informed for a specific event (when a frame is received for example) they can register as an observer.\n * Registering an object as an observer for a VideoConnection instance is simple as calling videoConnection.addObserver(object).\n * Then, if the observer defines any of the methods described below, they will be called whenever it is appropriate.\n * \n * All methods are optional. Just implement those you need in your class and add it as observer. \n * \n * @class VideoConnectionObserverInterface\n */\nXPMobileSDK.library.VideoConnectionObserverInterface = {\n\n    /**\n\t * Called when new frame has arrived over the video connection\n\t * \n\t * @method videoConnectionReceivedFrame\n\t * @param {ItemHeaderParser} frame \n\t */\n    videoConnectionReceivedFrame: function (frame) { },\n\n    /**\n\t * Called when an error has occurred during video streaming or in one of the internal control commands which has \n\t * resulted in closing the connection completely.\n\t * \n\t * @method videoConnectionFailed\n\t */\n    videoConnectionFailed: function () { },\n\n    /**\n\t * Called when a HTTP error occurred\n\t * \n\t * @method videoConnectionTemporaryDown\n\t * @param {Number} errorCode - the HTTP error code returned from the server, or -1 if exception was thrown, or -2 if the request was aborted due to a missing response (happens more often on wireless networks)\n\t */\n    videoConnectionTemporaryDown: function (errorCode) { },\n\n    /**\n\t * Called after the connection is no longer down due to an HTTP error. \n\t */\n    videoConnectionRecovered: function () { },\n\n    /**\n\t * Called if the state property of the connection has changed value.\n\t * \n\t * @method videoConnectionChangedState\n\t */\n    videoConnectionChangedState: function () { },\n\n    /**\n\t * Called when the streaming technology is no longer available. \n\t */\n    videoConnectionStreamingError: function () { }\n};\n\n/**\n * Video connection.\n * This class manages an established connection and handles receiving and parsing frames via the ItemHeaderParser class.\n * Do not create instances of that class directly. Instead call XPMobileSDK.requestStream to first prepare the connection to the\n * camera. In the callback you will receive instance of the prepared VideoConnection object ready to be opened. Then set\n * an observer object to receive frames, events and etc and just open the connection.\n * Video connections cannot be reused. Once closed it cannot be reopened. \n * \n * @class VideoConnection\n */\nXPMobileSDK.library.VideoConnection = function (videoId, connectionRequest, callbacks) {\n\n    XPMobileSDK.library.VideoConnection.instances.push(this);\n\n    if (!callbacks) var callbacks = {};\n    callbacks.onClose = callbacks.onClose || function (videoConnection) { };\n    callbacks.onRestart = callbacks.onRestart || function (videoConnection) { };\n    callbacks.onPushFailed = callbacks.onPushFailed || function () { };\n\n    var self = this;\n\n    var observers = [];\n    var state = XPMobileSDK.library.VideoConnectionState.notOpened;\n\n    self.request = {\n        parameters: connectionRequest.params,\n        options: connectionRequest.options\n    };\n    self.response = {\n        parameters: connectionRequest.response.outputParameters\n    };\n\n    self.videoId = videoId;\n    if (self.request.options) {\n        self.cameraId = self.request.options.cameraId;\n        self.signalType = self.request.options.signal;\n        self.isReusable = self.request.options.reuseConnection;\n    }\n    self.isPush = self.request.parameters.MethodType == 'Push';\n    self.isDirectStreaming = self.request.parameters.StreamType == 'FragmentedMP4';\n\n    self.supportsPTZ = self.response.parameters.PTZ == 'Yes';\n    self.supportsPTZPresets = self.response.parameters.Preset == 'Yes';\n    self.supportsPlayback = self.response.parameters.Playback == 'Yes';\n    self.supportsExport = self.response.parameters.ExportAvi == 'Yes';\n\n    var lastData = null; // Property that keeps the last frame received over the connection\n    var channel = new Channel(self.response.parameters);\n\n    var connectionURL = channel.current;\n\n    var noVideoTimeout = null;\n\n    /**\n\t * Opens the connection to start receiving frames. \n\t * \n\t * @method open\n\t */\n    this.open = function () {\n        switch (state) {\n            case XPMobileSDK.library.VideoConnectionState.notOpened:\n                setState(XPMobileSDK.library.VideoConnectionState.running);\n                if (window.Worker && XPMobileSDKSettings.supportsMultiThreaded) {\n                    console.info('Opening multithreaded video connection ' + self.videoId + ' with Web Worker');\n                    self.worker = new Worker(\"js/ThreadConnection.js\");\n                    self.worker.addEventListener('message', function (e) {\n                        if (e.data.message == 'onPushFailed') {\n                            callbacks.onPushFailed();\n                        } else {\n                            callMethodOnObservers(e.data.message, e.data.result);\n                        }\n                    }, false);\n                    self.worker.postMessage({\n                        'message': 'startCommunication',\n                        'arguments': {\n                            \"url\": connectionURL + '/' + self.videoId + '/',\n                            \"signalType\": self.signalType,\n                            \"isPush\": self.isPush\n                        }\n                    });\n                }\n                else {\n                    if (self.isPush) {\n                        console.info('Opening WebSocket video connection ' + self.videoId);\n                        self.communication = new XPMobileSDK.library.PushConnection(connectionURL + '/' + self.videoId + '/', { 'signalType': self.signalType});\n                    }\n                    else {\n                        console.info('Opening AJAX video connection ' + self.videoId);\n                        self.communication = new XPMobileSDK.library.PullConnection(connectionURL + '/' + self.videoId + '/', { 'signalType': self.signalType});\n                    }\n                    self.communication.addObserver({\n                        onError: onError,\n                        onHTTPError: onHTTPError,\n                        onPushFailed: onPushFailed,\n                        notifyChannel: notifyChannel,\n                        notifyObservers: notifyObservers,\n                        videoConnectionTemporaryDown: videoConnectionTemporaryDown,\n                        restart: self.restart\n                    });\n                    self.addObserver(self.communication);\n                    self.communication.startCommunication();\n                }\n                callMethodOnObservers('videoConnectionChangedState', state);\n\n                if (state == XPMobileSDK.library.VideoConnectionState.running) {\n                    resetNoVideoTimeout();\n                }\n\n                break;\n            case XPMobileSDK.library.VideoConnectionState.running:\n                if (self.isReusable) {\n                    console.info('Opening a reusable video connection from the pool ' + self.videoId);\n                } else {\n                    console.warn('WARNING: Attempting to open a running connection!');\n                }\n                resetNoVideoTimeout();\n                break;\n            case XPMobileSDK.library.VideoConnectionState.closed:\n                console.warn('WARNING: Attempting to re-open a closed connection!');\n                stopNoVideoTimeout();\n                break;\n        }\n    };\n\n    var resetNoVideoTimeout = function () {\n        if (noVideoTimeout) {\n            clearTimeout(noVideoTimeout);\n        }\n\n        noVideoTimeout = setTimeout(function () {\n            callMethodOnObservers('noVideoTimeout');\n        }, XPMobileSDKSettings.NoVideoTimeout);\n    };\n\n    var stopNoVideoTimeout = function () {\n        if (noVideoTimeout) {\n            clearTimeout(noVideoTimeout);\n        }\n    };\n\n    /**\n\t * Restarts the connection.\n\t * \n\t * @method restart\n\t */\n    this.restart = function () {\n\n        if (state == XPMobileSDK.library.VideoConnectionState.closed) return;\n\n        console.warn('Restarting video connection ' + self.videoId + ' for camera ' + self.cameraId);\n        setState(XPMobileSDK.library.VideoConnectionState.closed);\n        callbacks.onRestart(self);\n\n        cleanup();\n\n    };\n\n    /**\n\t * Closes the connection.\n\t * \n\t * @method close\n\t */\n    this.close = function () {\n\n        stopNoVideoTimeout();\n\n        if (state == XPMobileSDK.library.VideoConnectionState.closed ||\n            state == XPMobileSDK.library.VideoConnectionState.closing) return;\n\n        setState(XPMobileSDK.library.VideoConnectionState.closing);\n\n\n        if (self.worker && XPMobileSDKSettings.supportsMultiThreaded) {\n            self.worker.terminate();\n        }\n        console.log('Closing video connection ' + self.videoId + ' for camera ' + self.cameraId);\n        setState(XPMobileSDK.library.VideoConnectionState.closed);\n        callbacks.onClose(self);\n\n        cleanup();\n\n    };\n\n    /**\n\t * Adds an observer for the video connection.\n\t * \n\t * @method addObserver\n\t * @param observer Any object. Should implement methods from the VideoConnectionObserverInterface.\n\t */\n    this.addObserver = function (observer) {\n        observers.push(observer);\n    };\n\n    /**\n\t * Removes an observer for the video connection. \n\t * \n\t * @method removeObserver\n\t * @param observer: any object implementing VideoConnectionObserverInterface that should not receive further notifications\n\t */\n    this.removeObserver = function (observer) {\n        var index = observers.indexOf(observer);\n        index != -1 && observers.splice(index, 1);\n    };\n\n    this.resetCommunication = function () {\n        callMethodOnObservers('startCommunication');\n    };\n\n    /**\n\t * Class destructor.\n\t * \n\t * @method destroy\n\t */\n    this.destroy = function () {\n        self.close();\n\n        if (lastData) {\n            lastData.destroy();\n            lastData = null;\n        }\n        observers = [];\n\n        if (self.isPush) return;\n\n        onAjaxComplete = null;\n        onAjaxFailure = null;\n        onAjaxLoading = null;\n\n        frameRequestParams = null;\n\n        if (XPMobileSDK.library.VideoConnection.indexOf(this) != -1) {\n            XPMobileSDK.library.VideoConnection.splice(XPMobileSDK.library.VideoConnection.indexOf(this), 1);\n        }\n    };\n\n    function notifyObservers(item) {\n\n        if (item.stream && item.stream.error) {\n            switch (item.stream.error) {\n                case XPMobileSDK.library.ItemHeaderParser.Error.NonFatal:\n                    // Fallback to Transcoded streaming\n                    self.request.parameters.StreamType = 'Transcoded';\n                    self.restart();\n                    break;\n                case XPMobileSDK.library.ItemHeaderParser.Error.Fatal:\n                    callMethodOnObservers('videoConnectionStreamingError');\n                    self.close();\n                    break;\n            }\n            return;\n        }\n\n        if (observers.length > 0) {\n            callMethodOnObservers('videoConnectionReceivedFrame', item);\n\n            resetNoVideoTimeout();\n\n            if (self.wasConnectionDown) {\n                self.wasConnectionDown = false;\n                callMethodOnObservers('videoConnectionRecovered');\n            }\n        }\n        else {\n            console.warn('Video connection received an item but doesn\\'t have observer to send it to!');\n            self.close();\n            return;\n        }\n    };\n\n    function Channel(parameters) {\n\n        this.connected = false;\n        this.current;\n\n        var channels = [];\n        for (var i = 0, url; url = parameters['VideoChannel' + i]; i++) {\n            channels.push(parseURL(url));\n        }\n        if (!channels.length) channels.push(parseURL(XPMobileSDKSettings.MobileServerURL + XPMobileSDKSettings.videoChanel));\n        console.log('Available video channels: ', channels);\n\n        this.getNext = function () {\n\n            if (!this.connected) this.current = channels.shift();\n            return this.current;\n\n        }.bind(this);\n\n        this.hasNext = function () {\n\n            return !this.connected && channels.length;\n\n        }.bind(this);\n\n        this.getNext();\n\n    };\n\n    function notifyChannel(status) {\n        channel.connected = status;\n    };\n\n    function cleanup() {\n        callMethodOnObservers('cleanupCommunication');\n        if (self.worker && XPMobileSDKSettings.supportsMultiThreaded) {\n            self.worker.terminate();\n            self.worker = null;\n        }\n    };\n\n    function parseURL(url) {\n\n        if (!/^(http|ws)(s)?:/i.test(url)) {\n            var protocol = window.location.protocol + '//';\n            var hostname = document.location.hostname;\n            var port = document.location.port && !/^:\\d+/.test(url) ? ':' + document.location.port : '';\n\n            url = protocol + hostname + port + url;\n        }\n        return self.isPush ? url.replace(/^http(s)?:/i, 'ws$1:') : url.replace(/^ws(s)?:/i, 'http$1:');\n\n    };\n\n    /**\n\t * Sets the state of the connection and calls the observer\n\t */\n    function setState(newState) {\n        if (state == newState) return;\n        state = newState;\n        callMethodOnObservers('videoConnectionChangedState', state);\n    };\n\n    /**\n\t * Get the state of the connection\n\t */\n    this.getState = function () {\n        return state;\n    };\n\n    function onPushFailed() {\n        callbacks.onPushFailed();\n    };\n\n    function onHTTPError(request) {\n        channel.connected && CommunicationStability.addVideoBreakDown();\n        onError(request);\n    };\n\n    function onError(request) {\n\n        if (state == XPMobileSDK.library.VideoConnectionState.closed || XPMobileSDK.library.Connection.connectionId == null) {\n            return;\n        }\n        var timeout = 0;\n\n        if (!channel.connected) {\n            if (channel.hasNext()) {\n                console.log('Try next video channel.');\n                connectionURL = channel.getNext();\n            }\n            else {\n                callMethodOnObservers('videoConnectionNotAvailable');\n                return;\n            }\n        }\n        else {\n            \n            if (request.status) {\n                if (request.status == 410) {\n                    callMethodOnObservers('restartConnection', request);\n                    return;\n                } else {\n                    videoConnectionTemporaryDown(request.status);\n                }\n            }\n            else if (request.readyState && request.readyState == WebSocket.CLOSED) {\n                // WebSocket error or unexpected closure\n                // Do nothing. That callMethodOnObservers('startCommunication') below will restart the socket.\n            }\n            else if (request.status == 0 && (!request.response || request.response.byteLength === 0)) {\n                // Broken AJAX responses\n                videoConnectionTemporaryDown(request.status);\n            }\n\n        }\n\n        callMethodOnObservers('startCommunication', NETWORK.requestTimeOnFailure);\n    };\n\n    function videoConnectionTemporaryDown(status) {\n        self.wasConnectionDown = true;\n\n        callMethodOnObservers('videoConnectionTemporaryDown', status);\n    };\n\n    function callMethodOnObservers(method, arg) {\n        observers.forEach(function (observer) {        \n            if (observer && observer[method]) {\n                observer[method](arg);\n            }\n            if (self.worker) {\n                self.worker.postMessage({ 'message': method, \"arguments\": arg });\n            }\n        });\n    };\n};\n\nXPMobileSDK.library.VideoConnection.instances = [];\n","let VideoStreamState = {\n\tnew: 0,\r\n\topen: 1,\r\n\tclosed: 2\r\n};\n\nclass VideoStream {\n\tconstructor(videoId, connectionRequest, callbacks) {\r\n\t\tthis.videoConnectionElement = document.createElement('video-connection');\n\t\tthis.videoConnectionElement.videoId = this.videoId = videoId;\n\t\tthis.videoConnectionElement.location = XPMobileSDKSettings.MobileServerURL + XPMobileSDKSettings.videoChanel;\n\t\tthis.videoConnectionElement.addEventListener('onReceivedFrame', this.onReceivedFrame.bind(this));\n\t\tlet videoConnectionManagerElement = document.getElementsByTagName('videos-video-connection-manager')[0];\n\t\tif (videoConnectionManagerElement) {\n\t\t\tvideoConnectionManagerElement.appendChild(this.videoConnectionElement);\r\n        }\n\n\t\tthis.request = {\n\t\t\tparameters: connectionRequest.params,\n\t\t\toptions: connectionRequest.options\n\t\t};\n\n\t\tthis.response = {\n\t\t\tparameters: connectionRequest.response.outputParameters\n\t\t};\n\n\t\tif (this.request.options) {\n\t\t\tthis.cameraId = this.request.options.cameraId;\n\t\t\tthis.signalType = this.request.options.signal;\n\t\t\tthis.isReusable = this.request.options.reuseConnection;\n\t\t}\n\t\tthis.isPush = this.request.parameters.MethodType == 'Push';\n\t\tthis.isDirectStreaming = this.request.parameters.StreamType == 'FragmentedMP4';\n\n\t\tthis.supportsPTZ = this.response.parameters.PTZ == 'Yes';\n\t\tthis.supportsPTZPresets = this.response.parameters.Preset == 'Yes';\n\t\tthis.supportsPlayback = this.response.parameters.Playback == 'Yes';\n\t\tthis.supportsExport = this.response.parameters.ExportAvi == 'Yes';\n\n\t\tthis.callbacks = callbacks || {};\n\t\tthis.callbacks.onClose = this.callbacks.onClose || function (videoConnection) { };\n\t\tthis.callbacks.onRestart = this.callbacks.onRestart || function (videoConnection) { };\n\t\tthis.callbacks.onPushFailed = this.callbacks.onPushFailed || function () { };\n\n\t\tthis.observers = [];\n\n\t\tthis.state = VideoStreamState.new;\n\t}\r\n\r\n\topen() {\r\n\t\tif (this.state === VideoStreamState.closed) {\r\n\t\t\treturn\r\n        }\r\n\t\tthis.videoConnectionElement.dispatchEvent(new CustomEvent('start'));\r\n\t\tthis.state = VideoStreamState.closed;\r\n\t}\r\n\r\n\tclose() {\r\n\t\tlet videoConnectionManagerElement = document.getElementsByTagName('videos-video-connection-manager')[0];\n\t\tif (videoConnectionManagerElement && videoConnectionManagerElement.contains(this.videoConnectionElement)) {\n\t\t\tvideoConnectionManagerElement.removeChild(this.videoConnectionElement);\r\n\t\t}\r\n\t\tthis.videoConnectionElement.dispatchEvent(new CustomEvent('destroy'));\r\n\t\tXPMobileSDK.closeStream(this.videoId);\r\n\t\tthis.state = VideoStreamState.close;\r\n\t}\r\n\r\n\tonReceivedFrame(event) {\r\n\t\tif (this.observers.length > 0) {\n\t\t\tthis.callMethodOnObservers('videoConnectionReceivedFrame', event.detail.frame);\n\t\t}\n\t\telse {\n\t\t\tconsole.warn('Video connection received an item but doesn\\'t have observer to send it to!');\n\t\t\tthis.close();\n\t\t\treturn;\n\t\t}\r\n\t}\r\n\r\n\t/**\n\t * Adds an observer for the video connection.\n\t * \n\t * @method addObserver\n\t * @param observer Any object. Should implement methods from the VideoConnectionObserverInterface.\n\t */\n\taddObserver(observer) {\n\t\tthis.observers.push(observer);\n\t}\r\n\r\n\t/**\n\t * Removes an observer for the video connection. \n\t * \n\t * @method removeObserver\n\t * @param observer: any object implementing VideoConnectionObserverInterface that should not receive further notifications\n\t */\n\tremoveObserver(observer) {\n\t\tlet index = this.observers.indexOf(observer);\n\t\tindex != -1 && this.observers.splice(index, 1);\n\t}\r\n\r\n\tcallMethodOnObservers(method, arg) {\n\t\tthis.observers.forEach(function (observer) {\n\t\t\tif (observer && observer[method]) {\n\t\t\t\tobserver[method](arg);\n\t\t\t}\n\t\t});\n\t}\r\n};","; (function (undefined) {\n    /**\n     * Binary parser\n     * Do not create instances of this class directly. They are only created by the video connection object and served to you \n     * via its callback. You can then read its properties and data. Which are:\n     *  - imageURL - if the frame represents an image, this will be a base64 encoded image;\n     *  - frameNumber - index of the frame;\n     *  - timestamp - data and time of the frame (Date object);\n     *  - hasSizeInformation, hasLiveInformation, hasPlaybackInformation - whether the frame has the corresponding extensions.\n     *  If hasSizeInformation is set to true:\n     *  \t- sizeInfo - contains information about frame size and cropping.\n     *  If hasLiveInformation is set to true:\n     *  \t- changedLiveEvents and currentLiveEvents - masks of flags. See ItemHeaderParser.LiveFlags.\n     *  If hasPlaybackInformation is set to true:\n     *  \t- changedPlaybackEvents and currentPlaybackEvents - masks of flags. See ItemHeaderParser.PlaybackFlags.\n     *  \n     *  @class ItemHeaderParser\n     *  @param \t\tbinary\t\tdata\t\tBinary data represented header with all information about the frame and the frame itself\n     */\n    var parser = function (data) {\n        // Stores the context of execution\n        var self = this;\n\n        // Stores the pointer to the current bytes offset.\n        var bytesOffset = 0;\n\n        // Define data view variable used in older browsers that does not support TypedArray\n        var dataView = null;\n\n        var readBytesProcessor = function (arg) {\n            return arg;\n        };\n\n        var readBytesReversedProcessor = function (arr) {\n            return Array.prototype.reverse.call(arr);\n        };\n\n        function skipBytes(bytesToSkip) {\n            bytesOffset += bytesToSkip;\n        }\n\n        function parseDeviceStateInfo(dataCount) {\n            var tempErrorCode;\n            var tempGUID;\n\n            self.errorCodes = [];\n\n            for (var a = 0; a < dataCount; a++) {\n                tempGUID = getGUID();\n                tempErrorCode = readBytes(8);\n\n                self.errorCodes.push({ code: tempErrorCode, guid: tempGUID });\n            }\n        }\n\n        /**\n         * Read bytes from ArrayBuffer\n         * \n         * @param number bytesCount Number of bytes to read from ArrayByffer\n         */\n        function readBytes(bytesCount) {\n            var bytes = new Uint8Array(data, bytesOffset, bytesCount);\n            var result = 0;\n\n            bytesOffset += bytesCount;\n\n            for (var i = 0; i < bytesCount; i++) {\n                result += bytes[i] * Math.pow(2, 8 * i);\n            }\n\n            return result;\n        }\n\n        /**\n         * Get frame timestamp in milliseconds unix timestamp  \n         */\n        function readBytesAsCharacters(bytesCount, flipEndians) {\n            var result = [];\n\n            for (var i = 0; i < bytesCount; i++) {\n                result.push(String.fromCharCode(readBytes(1)));\n            }\n\n            return flipEndians ? result.reverse().join(\"\") : result.join(\"\");\n        }\n\n        /**\n         * Converts byte to hex string\n         * @param {} v \n         * @returns {} \n         */\n        function uintToHexString(v) {\n            var res = '';\n            var map = ['0', '1', '2', '3', '4', '5', '6', '7', '8', '9', 'a', 'b', 'c', 'd', 'e', 'f'];\n\n            var vl = (v & 0xf0) >> 4;\n            res += map[vl];\n\n            var vr = v & 0x0f;\n            res += map[vr];\n\n            return res;\n        }\n\n        /**\n         * Base method for reading bytes from buffer, processing them and converts to hex string\n         * @param {} count - number of bytes to read\n         * @returns {} string - hex representation of the bytes read\n         */\n        function readToStringBase(count, processor) {\n            var arr = new Uint8Array(data, bytesOffset, count);\n            var processed = processor(arr);\n            var res = '';\n            for (var i = 0; i < count; i++) {\n                res += uintToHexString(processed[i]);\n            }\n            bytesOffset += count;\n            return res;\n        }\n\n        /**\n         * Reads bytes from buffer, reverse bytes in the array and converts to hex string\n         * @param {} count - number of bytes to read\n         * @returns {} string - hex representation of the bytes read\n         */\n        function readToString(count) {\n            return readToStringBase(count, readBytesProcessor);\n        }\n\n        /**\n         * Reads bytes from buffer and converts to hex string\n         * @param {} count - number of bytes to read\n         * @returns {} string - hex representation of the bytes read\n         */\n        function readAndReverseToString(count) {\n            return readToStringBase(count, readBytesReversedProcessor);\n        }\n\n        /**\n         * Retrieving string of guid from its binary representation\n         */\n        function getGUID() {\n            var res = '';\n\n            res += readAndReverseToString(4);\n            res += '-';\n            res += readAndReverseToString(2);\n            res += '-';\n            res += readAndReverseToString(2);\n            res += '-';\n            res += readToString(2);\n            res += '-';\n            res += readToString(6);\n\n            return res;\n        }\n\n        self.readBytes = readBytes;\n        self.skipBytes = skipBytes;\n        self.getGUID = getGUID;\n\n        /**\n         * Get all information from header related with frame size\n         */\n        self.parseSizeInformation = function () {\n            self.sizeInfo = { sourceSize: {}, sourceCrop: {}, destinationSize: {} };\n            self.sizeInfo.sourceSize.width = readBytes(4);\n            self.sizeInfo.sourceSize.height = readBytes(4);\n            self.sizeInfo.sourceCrop.left = readBytes(4);\n            self.sizeInfo.sourceCrop.top = readBytes(4);\n            self.sizeInfo.sourceCrop.right = readBytes(4);\n            self.sizeInfo.sourceCrop.bottom = readBytes(4);\n            self.sizeInfo.sourceCrop.width = self.sizeInfo.sourceCrop.right - self.sizeInfo.sourceCrop.left;\n            self.sizeInfo.sourceCrop.height = self.sizeInfo.sourceCrop.bottom - self.sizeInfo.sourceCrop.top;\n            self.sizeInfo.destinationSize.width = readBytes(4);\n            self.sizeInfo.destinationSize.height = readBytes(4);\n            self.sizeInfo.destinationSize.resampling = readBytes(4);\n\n            // Not currently used\n            self.sizeInfo.destinationSize.top = readBytes(4);\n            self.sizeInfo.destinationSize.right = readBytes(4);\n            self.sizeInfo.destinationSize.bottom = readBytes(4);\n        };\n\n        /**\n         * Get video connection GUID \n         */\n        self.parseLiveInformation = function () {\n            self.currentLiveEvents = readBytes(4);\n            self.changedLiveEvents = readBytes(4);\n        };\n\n        /**\n         * Get playback events information \n         */\n        self.parsePlaybackInformation = function () {\n            self.currentPlaybackEvents = readBytes(4);\n            self.changedPlaybackEvents = readBytes(4);\n        };\n\n        /**\n         * Get stream information \n         */\n        self.parseStreamInfo = function () {\n            self.stream = {};\n            self.stream.headerSize = readBytes(4);\n            self.stream.headerVesion = readBytes(4);\n\n            self.stream.reserved = readBytes(4);\n            self.stream.validFields = readBytes(4);\n\n            self.stream.timeBetweenFrames = readBytes(4);\n            self.stream.dataType = readBytesAsCharacters(4, true);\n            self.stream.flags = readBytes(4);\n\n            self.stream.profile = readBytes(4);\n            self.stream.level = readBytes(4);\n\n            self.stream.compatibility = readBytes(4);\n            self.stream.constrains = readBytes(8);\n\n            self.stream.frameCount = readBytes(4);\n\n            self.stream.hasKeyFrame = (self.stream.flags & parser.StreamInfoFlags.HasKeyFrame) === parser.StreamInfoFlags.HasKeyFrame;\n        };\n\n        /**\n         * Retrieve frame binary data  \n         */\n        self.retrieveData = function () {\n            self.data = new Uint8Array(data, self.headerSize, self.dataSize);\n        };\n\n        self.parseDynamicInformation = function () {\n            var dataCount,\n                dataType;\n\n            skipBytes(8);\n\n            dataCount = readBytes(4);\n            dataType = readBytes(4);\n\n            if (dataType == parser.DynamicInfoDataType.HeaderTypeDeviceStateInfo) {\n                parseDeviceStateInfo(dataCount);\n            }\n        };\n    };\n\n    parser.Type = {};\n    parser.Type.Frame = 1;\n    parser.Type.Fragment = 2;\n\n    parser.Error = {};\n    parser.Error.NonFatal = 0x01;\n    parser.Error.Fatal = 0x02;\n\n    parser.MainHeaderLength = 36;\n    parser.SizeInfoHeaderLength = 32;\n    parser.LiveInfoHeaderLength = 8;\n    parser.PlaybackInfoHeaderLength = 8;\n\n    parser.HeaderExtensionSize = 0x01;\n    parser.HeaderExtensionLiveEvents = 0x02;\n    parser.HeaderExtensionPlaybackEvents = 0x04;\n    parser.HeaderExtensionNative = 0x08;\n    parser.HeaderExtensionMotionEvents = 0x10;\n    parser.HeaderExtensionLocationInfo = 0x20;\n    parser.HeaderExtensionStreamInfo = 0x40;\n    parser.HeaderExtensionCarouselInfo = 0x80;\n    parser.HeaderExtensionDynamicInfo = 0x100;\n\n    parser.LiveFlags = {};\n    parser.LiveFlags.LiveFeed = 0x01;\n    parser.LiveFlags.Motion = 0x02;\n    parser.LiveFlags.Recording = 0x04;\n    parser.LiveFlags.Notification = 0x08;\n    parser.LiveFlags.CameraConnectionLost = 0x10;\n    parser.LiveFlags.DatabaseFail = 0x20;\n    parser.LiveFlags.DiskFull = 0x40;\n    parser.LiveFlags.ClientLiveStopped = 0x80;\n\n    parser.PlaybackFlags = {};\n    parser.PlaybackFlags.Stopped = 0x01;\n    parser.PlaybackFlags.Forward = 0x02;\n    parser.PlaybackFlags.Backward = 0x04;\n    parser.PlaybackFlags.DatabaseStart = 0x10;\n    parser.PlaybackFlags.DatabaseEnd = 0x20;\n    parser.PlaybackFlags.DatabaseError = 0x40;\n\n    parser.DynamicInfoDataType = {};\n    parser.DynamicInfoDataType.HeaderTypeDeviceStateInfo = 0;\n\n    parser.StreamInfoFlags = {};\n    parser.StreamInfoFlags.HasKeyFrame = 0x01;\n\n    XPMobileSDK.library.ItemHeaderParser = parser;\n})();","; (function (undefined) {\r\n    var videoParser = function (data) {\r\n        var self = this;\r\n\r\n        XPMobileSDK.library.ItemHeaderParser.call(self, data);\n\n        /**\n         * Get motion amount information \n         */\n        self.parseMotionInformation = function () {\r\n            self.motionHeaderSize = readBytes(4);\n            self.motionAmount = readBytes(4);\r\n        };\n\n        /**\n         * Encode the data using Blob\n         */\n        self.convertToImage = function () {\r\n            self.type = XPMobileSDK.library.ItemHeaderParser.Type.Frame;\n            self.blob = new Blob([self.data], { type: 'image/jpeg' });\r\n        };\n\n        /**\n         * Get carousel information\n         */\n        self.parseCarouselInfo = function () {\r\n            self.carousel = {};\n            self.carousel.headerSize = readBytes(4);\n            self.carousel.headerVesion = readBytes(4);\n            self.carousel.itemId = getGUID();\r\n        };\n\n        /**\n         * Parse video frame headers\n         */\n        function parseHeader() {  \r\n            self.uuid = self.getGUID();\n\n            self.timestamp = new Date(self.readBytes(8));\n            self.frameNumber = self.readBytes(4);\n            self.dataSize = self.readBytes(4);\n            self.headerSize = self.readBytes(2);\n\n            var MainHeader = self.readBytes(2);\n            \n            self.hasSizeInformation = MainHeader & XPMobileSDK.library.ItemHeaderParser.HeaderExtensionSize;\n            self.hasLiveInformation = MainHeader & XPMobileSDK.library.ItemHeaderParser.HeaderExtensionLiveEvents;\n            self.hasPlaybackInformation = MainHeader & XPMobileSDK.library.ItemHeaderParser.HeaderExtensionPlaybackEvents;\n            self.hasNativeData = MainHeader & XPMobileSDK.library.ItemHeaderParser.HeaderExtensionNative;\n            self.hasMotionInformation = MainHeader & XPMobileSDK.library.ItemHeaderParser.HeaderExtensionMotionEvents;\n            self.hasLocationData = MainHeader & XPMobileSDK.library.ItemHeaderParser.HeaderExtensionLocationInfo;\n            self.hasStreamInfo = MainHeader & XPMobileSDK.library.ItemHeaderParser.HeaderExtensionStreamInfo;\n            self.hasCarouselInfo = MainHeader & XPMobileSDK.library.ItemHeaderParser.HeaderExtensionCarouselInfo;\n            \n            if (self.hasSizeInformation) {\r\n                self.parseSizeInformation();\r\n            }\n\n            if (self.hasLiveInformation) {\r\n                self.parseLiveInformation();\r\n            }\n            if (self.hasPlaybackInformation) {\r\n                self.parsePlaybackInformation();\r\n            }\n            if (self.hasNativeData) {\r\n                self.readBytes(readBytes(4)); // Remove this by header parser when we have support for Native data\n            }\n            if (self.hasMotionInformation) {\r\n                self.parseMotionInformation();\r\n            }\n            if (self.hasLocationData) {\r\n                self.readBytes(readBytes(4)); // Remove this by header parser when we have support for Stream location\n            }\n            if (self.hasStreamInfo) {\r\n                self.parseStreamInfo();\r\n            }\n            if (self.hasCarouselInfo) {\r\n                self.parseCarouselInfo();\r\n            }\r\n        }\n\n        /**\n        * Called to get the video data from the binary\n        *\n        * @param dataView, binary, video data\n        */\n        function getData() {\r\n            if (self.dataSize <= 0) {\r\n                return;\r\n            }\r\n\r\n            self.retrieveData();\n\n            if (self.stream) {\r\n                switch (self.stream.dataType) {\r\n                    case 'JPEG': self.convertToImage(); break;\r\n                }\r\n            }\n            else {\r\n                self.convertToImage();\r\n            }\r\n        }\n\n        /**\n         * Initialize the prototype\n         */\n        function initialize() {\r\n            parseHeader();\r\n            getData();\r\n        }\n\n        initialize();\r\n    };\n\r\n    XPMobileSDK.library.VideoHeaderParser = videoParser;\r\n})();","; (function (undefined) {\n    var audioParser = function (data) {\n        var self = this;\r\n\r\n        XPMobileSDK.library.ItemHeaderParser.call(self, data);\n\n        /**\n         * Parse audio frame headers\n         */\n        function parseAudioHeader() {\r\n            self.uuid = self.getGUID();\n            \n            self.skipBytes(18);\n\n            var mainHeader = self.readBytes(2);\n\n            self.skipBytes(4);\n\n            if (mainHeader & XPMobileSDK.library.ItemHeaderParser.HeaderExtensionDynamicInfo) {\r\n                self.parseDynamicInformation();\r\n            }\r\n        };\n\n        /**\n         * Initialize the prototype\n         */\n        function initialize() {\r\n            parseAudioHeader();\r\n        }\n\n        initialize();\r\n    };\n\r\n    XPMobileSDK.library.AudioHeaderParser = audioParser;\r\n})();","/**\n * A pool of reusable video connections. \n * \n * A video connection can be reused if a client needs to open more than one stream for the same camera. In this case the client needs to \n * provide an additional parameter to the command Connection.requestStream. \n * \n * @author rvp\n */\nXPMobileSDK.library.VideoConnectionPool = new function() {\n\t\n\t/**\n\t * An abstraction of a camera in the pool.\n\t * \n\t * @param {String} id: the camera id\n\t */\n\tvar Camera = function(id, videoConn) {\n\t\tthis.id = id;\n\t\tthis.videoConnection = videoConn;\n\t\tthis.response = undefined;\n\t\tthis.count = 1;\n\t\tthis.pendingCallbacks = [];\n\t};\n\t\n\tthis.cameras = [];\n\n\t/**\n\t * Checks if the pool contains a camera with the given cameraId.\n\t */\n\tthis.containsCameraByVideoId = function(cameraId,videoId) {\n\t\treturn this.cameras.some(c => c.id === cameraId && c.videoConnection && c.videoConnection.videoId === videoId);\n\t\t\n\t};\n\n\t/**\n\t * Adds a camera to the pool.\n\t */\n\tthis.addCamera = function(cameraId,videoConn) {\n\t\tthis.cameras.push(new Camera(cameraId,videoConn));\n\t};\n\t\n\t/**\n\t * Removes the camera with the given cameraId from the pool. Further attempts to open a stream for the same camera will result in a new RequestStream command. \n\t */\n\tthis.removeCamera = function(cameraId,videoId) {\n\t\tvar index = this.cameras.findIndex((c)=>{return c.id == cameraId  && c.videoConnection &&c.videoConnection.videoId == videoId;});\n\t\tthis.cameras.splice(index, 1);\n\t};\n\n\t/**\n\t * Removes all cameras from the pool.\n\t */\n\tthis.clear = function() {\n\t\tthis.cameras = [];\n\t};\n\t\n\n\tthis.getCameraByVideoId = function(cameraId, videoId) {\n\t\treturn this.cameras.find(c => c.id === cameraId && c.videoConnection && c.videoConnection.videoId == videoId);\n\t}.bind(this);\n};\n","XPMobileSDK.library.VideoPushConnection = function (successCallback, errorCallback, skipUserMedia) {\n\t\n\tthis.open = open;\n\tthis.close = close;\n\tthis.send = send;\n\tthis.destroy = destroy;\n\tthis.isOpen = isOpen;\n\tthis.getMediaStream = getMediaStream;\n\n\tvar self = this;\n\tvar headerSize = 36;\n\tvar counter = 0;\n\t\n\tvar callbacks = {\n\t\tonSuccess: function (videoPushConnection) {},\n\t\tonError: function (error) {},\n\t\tonStreamSuccess: function (videoPushConnection) {},\n\t\tonStreamError: function (error) {}\n\t};\n\t\n\tvar stream, streamRequest, mediaStream;\n\t\n\tinitialize();\n\t\n\t\n\tfunction initialize() {\n\t\t\n\t\tcallbacks.onSuccess = successCallback || callbacks.onSuccess;\n\t\tcallbacks.onError = errorCallback || callbacks.onError;\n\n\t\tif (skipUserMedia) {\r\n\t\t    callbacks.onSuccess(self);\n\n\t\t    return;\r\n\t\t}\n\n\t\tif (navigator.mediaDevices.getUserMedia) {\n\t\t\tnavigator.mediaDevices.getUserMedia({ video: true, audio: false }).then(onSuccess).catch(onError);\n\t\t}\n\t\telse {\n\t\t\tnavigator.getUserMedia = navigator.getUserMedia || navigator.webkitGetUserMedia || navigator.mozGetUserMedia;\n\t\t\tif (navigator.getUserMedia) {\n\t\t\t\tnavigator.getUserMedia({ video: true, audio: false }, onSuccess, onError);\n\t\t\t}\n\t\t\telse {\n\t\t\t\tconsole.warn(\"Video push not supported!\");\n\t\t\t}\t\t\t\t\n\t\t}\n\t\t\n\t\tfunction onSuccess(userMediaStream) {\n\t\t\t\n\t\t\tmediaStream = userMediaStream;\n\t\t\tcallbacks.onSuccess(self);\t\t\t\n\t\t}\n\t\t\n\t\tfunction onError(error) {\n\t\t    console.error(error.name);\n\t\t\tcallbacks.onError(error);\t\n\t\t}\n\t}\n\t\n\tfunction getMediaStream() {\n\n\t\treturn mediaStream;\n\t}\n\t\n\tfunction open(successCallback, errorCallback) {\n\n\t\tcallbacks.onStreamSuccess = successCallback || callbacks.onStreamSuccess;\n\t\tcallbacks.onStreamError = errorCallback || callbacks.onStreamError;\n\t\t\n\t\tif (isOpen()) return;\n\n\t\tstreamRequest = XPMobileSDK.requestPushStream(streamRequestCallback);\t\t\n\t}\n\t\n\tfunction close() {\n\n\t\tif (!isOpen()) return;\n\n\t\tif (streamRequest) {\n\t\t    XPMobileSDK.cancelRequest(streamRequest);\n\t\t\tstreamRequest = null;\n\t\t}\n\t\tif (stream) {\n\t\t    XPMobileSDK.closeStream(stream.videoId);\n\t\t\tstream = null;\n\t\t}\t\t\n\t}\n\t\n\tfunction streamRequestCallback(parameters, error) {\n\t\t\n\t\tstreamRequest = null;\n\n\t\tif (!parameters) {\n\t\t\tcallbacks.onStreamError(error);\n\t\t\treturn;\n\t\t}\n\t\t\n\t\tstream = parameters;\n\t\tcallbacks.onStreamSuccess(self);\n\t}\n\t\n\tfunction isOpen() {\n\t\treturn stream || streamRequest;\n\t}\n\t\n\tfunction send(base64EncodedImage) {\n\t\t\n\t\tvar bytesArray = XPMobileSDK.library.Bytes.fromBase64(base64EncodedImage);\n\t\t\n\t\tvar buffer = new ArrayBuffer(headerSize + bytesArray.length);\n\t\tvar bufferView = new Uint8Array(buffer);\n\t\t\n\t\t// Header\n\t\tbufferView.set(XPMobileSDK.library.Bytes.fromGuid(stream.videoId, 16));\t\t\t\t// Video id\n\t\tbufferView.set(XPMobileSDK.library.Bytes.fromInt(new Date().getTime(), 8), 16);\t\t// Timestamp\n\t\tbufferView.set(XPMobileSDK.library.Bytes.fromInt(++counter, 4), 24);\t\t\t\t// Frame count\n\t\tbufferView.set(XPMobileSDK.library.Bytes.fromInt(bytesArray.length, 4), 28);\t\t// Frame size in bytes\n\t\tbufferView.set(XPMobileSDK.library.Bytes.fromInt(headerSize, 2), 32);\t\t\t\t// Header size in bytes\n\t\tbufferView.set(XPMobileSDK.library.Bytes.fromInt(0, 2), 34);\t\t\t\t\t\t// Header extension flags\n\t\t// Data\n\t\tbufferView.set(bytesArray, headerSize);\n\t\t\t\t\n\t\tvar url = XPMobileSDKSettings.MobileServerURL + XPMobileSDKSettings.videoChanel + '/' + stream.videoId + '/';\n\t\tvar parameters = {\n\t\t\tmethod: 'post',\n\t\t\tcontentType: 'arraybuffer', \n\t\t\tpostBody: buffer,\n\t\t\tonLoading: onAjaxLoading,\n\t\t\tonSuccess: onAjaxSuccess,\n\t\t\tonFailure: onAjaxFailure\n\t\t};\n\t\t\n\t\tvar ajaxRequest = new XPMobileSDK.library.Ajax.Request(url, parameters);\t\t\n\t}\n\t\n\tfunction onAjaxLoading(request) {}\n\t\n\tfunction onAjaxSuccess(request) {}\n\t\n\tfunction onAjaxFailure(request) {\n\t\tconsole.error('ERROR in ajax request for video push with videoId ' + stream.videoId);\t\t\n\t}\n\t\n\tfunction destroy() {\n\t\t\n\t\tclose();\n\n\t\tif (!mediaStream) return;\n\t\t\n\t\tmediaStream.getTracks().forEach(function (track) {\n\t\t\ttrack.stop();\n\t\t});\n\t\tmediaStream = null;\t\t\n\t}\t\n};\n","XPMobileSDK.library.AudioPushConnection = function (itemIds, sampleRate, successCallback, errorCallback) {\r\n\r\n    this.open = open;\n    this.close = close;\n    this.send = send;\n    this.destroy = destroy;\n    this.isOpen = isOpen;\n\n    var self = this;\n    var headerSize = 36;\n    var counter = 0;\n\n    var callbacks = {\r\n        onStreamSuccess: function (videoPushConnection) { },\n        onStreamError: function (error) { },\r\n        onAjaxLoading: function () { },\r\n        onAjaxSuccess: function (videoPushConnection) { },\n        onAjaxFailure: function () { console.error('ERROR in ajax request for audio push'); }\r\n    };\n\n    var stream,\n        streamRequest;\n\n    initialize();\n\n    function initialize() {\r\n        callbacks.onAjaxSuccess = successCallback || callbacks.onAjaxSuccess;\n        callbacks.onAjaxFailure = errorCallback || callbacks.onAjaxFailure;\r\n    }\n\n    function open(successCallback, errorCallback, onAjaxFailure) {\r\n        callbacks.onStreamSuccess = successCallback || callbacks.onStreamSuccess;\n        callbacks.onStreamError = errorCallback || callbacks.onStreamError;\n\n        if (isOpen()) {\r\n            return;\r\n        }\n\n        var options = {\r\n            AudioSamplingRate: sampleRate || 8000,\n            AudioBitsPerSample: 16\n        };\n\n        streamRequest = XPMobileSDK.requestAudioStreamIn(itemIds, options, streamRequestCallback, streamRequestErrorCallback);\r\n    }\n\n    function close() {\r\n        if (!isOpen()) {\r\n            return;\r\n        }\n\n        if (streamRequest) {\r\n            XPMobileSDK.cancelRequest(streamRequest);\n            streamRequest = null;\r\n        }\n\n        if (stream) {\r\n            XPMobileSDK.closeStream(stream.StreamId);\n            stream = null;\r\n        }\r\n    }\n\n    function streamRequestCallback(parameters, error) {\n        streamRequest = null;\n\n        if (!parameters) {\r\n            callbacks.onStreamError(error);\n            return;\r\n        }\n\n        stream = parameters;\n        callbacks.onStreamSuccess(self);\r\n    }\n\n    function streamRequestErrorCallback(error) {\n        streamRequest = null;\n        stream = null;\n\r\n        callbacks.onStreamError(error);\r\n    }\n\n    function isOpen() {\r\n        return stream || streamRequest;\r\n    }\n\n    function send(pcmData) {\r\n        var buffer = new ArrayBuffer(headerSize + pcmData.length);\n        var bufferView = new Int8Array(buffer);\n\n        // Header\n        bufferView.set(XPMobileSDK.library.Bytes.fromGuid(stream.StreamId, 16));\t\t\t\t// Stream id\n        bufferView.set(XPMobileSDK.library.Bytes.fromInt(new Date().getTime(), 8), 16);\t\t// Timestamp\n        bufferView.set(XPMobileSDK.library.Bytes.fromInt(++counter, 4), 24);\t\t\t\t// Frame count\n        bufferView.set(XPMobileSDK.library.Bytes.fromInt(pcmData.length, 4), 28);\t\t// Frame size in bytes\n        bufferView.set(XPMobileSDK.library.Bytes.fromInt(headerSize, 2), 32);\t\t\t\t// Header size in bytes\n        bufferView.set(XPMobileSDK.library.Bytes.fromInt(0, 2), 34);\t\t\t\t\t\t// Header extension flags\n        // Data\n        bufferView.set(pcmData, headerSize);\n\n        var url = XPMobileSDKSettings.MobileServerURL + XPMobileSDKSettings.audioChannel + '/' + stream.StreamId;\n\n        var parameters = {\r\n            method: 'post',\n            //contentType: 'audio/webm',\n            'Transfer-Encoding': 'chunked',\n            contentType: 'arraybuffer',\n            postBody: buffer,\n            // postBody: bufferView,\n            timeout: 2000,\n            responseType: 'arraybuffer',\n            onLoading: callbacks.onAjaxLoading,\n            onSuccess: callbacks.onAjaxSuccess,\n            onFailure: callbacks.onAjaxFailure,\r\n            onTimeout: callbacks.onAjaxFailure\r\n        };\n\n        var ajaxRequest = new XPMobileSDK.library.Ajax.Request(url, parameters);\r\n    }\n\n    function destroy() {\r\n        close();\r\n    }\r\n};"],"file":"../tools/XPMobileSDK.library.js"}